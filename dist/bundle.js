!function(e){var t={};function o(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);class s{constructor(e){this.element=e}on(e,t,o=this.element){o.addEventListener(e,e=>t(e.detail))}emit(e,t,o=this.element){const s=new CustomEvent(e,{detail:t});o.dispatchEvent(s)}static bindTo(e){let t=e;if("string"==typeof e&&(t=document.querySelector(e)),!(t instanceof HTMLElement||t instanceof HTMLDocument))throw new Error("cannot bound component");new this(t).init()}init(){throw new Error("Must be implemented!")}}class i{constructor(e){this.user_id=parseFloat(e.user_id),this.group_id=parseFloat(e.group_id),this.name=e.name,this.street=e.street,this.zip_code=parseFloat(e.zip_code),this.city=e.city,this.phone=e.phone,this.credits=parseFloat(e.credits)}}class n{constructor(e){this.group_id=e.group_id,this.name=e.name,this.is_admin=e.is_admin}}var r=class extends s{init(){this.users=[],this.groups=[],this.on("actionEvent",this.actionEventFun.bind(this),document),this.on("renderInit",this.renderInitFun.bind(this),document),this.on("postRequestData",this.postBlankEmit.bind(this),document),this.on("editRequestData",this.editBlankEmit.bind(this),document),this.on("fetchPostRequest",this.postUserRequest.bind(this),document),this.on("fetchPutRequest",this.putUserRequest.bind(this),document)}renderInitFun(){setTimeout(function(){this.emit("renderGroups",this.groups,document),this.emit("renderUsers",this.users,document)}.bind(this),5)}actionEventFun(e){let t=e.action.split(":");"updated"==t[1]&&this.fetchFun(e),"removed"==t[1]&&("user"==t[0]&&userDelete(e.id),"group"==t[0]&&groupDelete(e.id))}userDelete(e){let t=this.users.find(t=>t.user_id==e),o=this.users.indexOf(t);this.users.splice(o,1),this.emit("renderInit",null,document)}groupDelete(e){let t=this.groups.find(t=>t.group_id==e),o=this.groups.indexOf(t);this.groups.splice(o,1),this.emit("renderInit",null,document)}fetchFun(e){let t=e.action.split(":"),o=e.id,s=`https://ums-honeybadger.herokuapp.com/${t[0]}/${o}`;fetch(s).then(e=>e.json()).then(e=>{"user"===t[0]&&this.addUser(e),"group"===t[0]&&this.addGroup(e),this.emit("renderInit",null,document)}).catch(console.log)}addUser(e){let t=this.users.find(t=>t.user_id==e.user_id);if(t){let e=this.users.indexOf(t);this.users.splice(e,1)}this.users.push(new i(e)),this.countUsersInGroups()}addGroup(e){this.groups.push(new n(e)),this.countUsersInGroups()}countUsersInGroups(){this.groups.forEach(e=>{e.amountOfUsers=this.users.reduce((t,o)=>o.group_id===e.group_id?t+1:t,0)})}putUserRequest(e){console.log("putUserRequest");let t=`https://ums-honeybadger.herokuapp.com/user/${e.user_id}`,o=new i(e);fetch(t,{method:"put",body:JSON.stringify(o)})}postUserRequest(e){let t=new i(e);t.user_id=void 0,t=JSON.stringify(t),fetch("https://ums-honeybadger.herokuapp.com/user",{method:"post",body:t})}postBlankEmit(){this.emit("postSendData",this.groups,document)}editBlankEmit(e){let t=this.users.find(t=>t.user_id==e);this.emit("editSendData",[t,this.groups],document)}};var d=class extends s{init(){this.socket=new WebSocket("ws://ums-honeybadger.herokuapp.com/ums"),this.socket.onmessage=this.onMessageFun.bind(this),this.socket.onopen=this.onOpenFun.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this)}onMessageFun(e){let t=JSON.parse(e.data);console.log("WEB SOCKET - ",t),t.message,t.action&&this.emit("actionEvent",t,document)}onOpenFun(e){console.log(e)}onError(e){console.log(e)}onClose(e){console.log(e)}};const l=document.querySelector("#slide-out").querySelector("ul"),u=document.querySelector(".page-title");var c=class extends s{init(){this.on("renderGroups",this.renderGroups.bind(this),document),window.onhashchange=(()=>{this.emit("renderInit",null,document)})}renderGroups(e){l.innerHTML="",e.forEach(e=>{let t;document.location.hash.split(/[#\/]/).some(t=>t==e.group_id)?(u.innerText=e.name,t="active"):t="";let o=`<li class=${t}><a href="#${e.group_id}/">${e.name} <span class="badge" data-badge-caption="">${e.amountOfUsers}</span></a></li>`;l.innerHTML+=o}),console.log(e)}};const a=document.querySelector(".striped").querySelector("tbody");var h=class extends s{init(){this.on("renderUsers",this.renderUsers.bind(this),document)}renderUsers(e){a.innerHTML="",e.forEach(e=>{if(document.location.hash.split(/[#\/]/).some(t=>t==e.group_id)){let t=`\n          <tr id="${e.user_id}">\n            <td>${e.name}</td>\n            <td>${e.street}</td>\n            <td>${e.zip_code}</td>\n            <td>${e.city}</td>\n            <td>${e.phone}</td>\n          </tr>\n          `;a.innerHTML+=t}}),console.log(e)}};const m=document.querySelector(".navigation-add").querySelector("a"),p=document.querySelector("#modalAdd").querySelector("#groups"),g=document.querySelector("#modalAdd").querySelector("select"),y=document.querySelector("#modalAdd").querySelector("#first_name"),S=document.querySelector("#modalAdd").querySelector("#last_name"),b=document.querySelector("#modalAdd").querySelector("#street"),q=document.querySelector("#modalAdd").querySelector("#zip_code"),f=document.querySelector("#modalAdd").querySelector("#city"),v=document.querySelector("#modalAdd").querySelector("#phone"),_=document.querySelector("#modalAdd").querySelector("#range_credit"),E=document.querySelector("#modalAdd").querySelector("#create_button");var k=class extends s{init(){this.on("postSendData",this.initBlank.bind(this),document),m.addEventListener("click",this.postRequestData.bind(this),!1),E.addEventListener("click",this.postBlankCreate.bind(this),!1),M.Modal.init(document.querySelector("#modalAdd"),{})}initBlank(e){y.value="",S.value="",b.value="",q.value="",f.value="",v.value="",_.value="",this.groups=e,M.updateTextFields(),p.innerHTML="",p.innerHTML+='<option value="" disabled selected>Choose group</option>',e.forEach(e=>{p.innerHTML+=`<option value="${e.group_id}" id="${e.group_id}">${e.name}</option>`}),M.FormSelect.init(g,{});let t=document.querySelector("#modalAdd").querySelector(".select-wrapper").querySelector("ul");Array.from(t.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}postRequestData(){this.emit("postRequestData",null,document)}groupChoosed(){console.log("GROUP CHOOSED"),this.instance=M.FormSelect.init(g,{}),this.instance=M.FormSelect.getInstance(g);let e=this.instance.getSelectedValues()[0];if(console.log(e),e){console.log(this.groups,"groups");let t=this.groups.find(t=>t.group_id==e);console.log("sel group",t),t&&t.is_admin?(console.log("rangeCreditSel.disabled = true;"),_.disabled=!0):_.disabled=!1}let t=document.querySelector("#modalAdd").querySelector(".select-wrapper").querySelector("ul");Array.from(t.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}postBlankCreate(){this.instance=M.FormSelect.init(g,{}),this.instance=M.FormSelect.getInstance(g);let e={};e.group_id=this.instance.getSelectedValues()[0],e.name=y.value+" "+S.value,e.street=b.value,e.zip_code=q.value,e.city=f.value,e.phone=v.value,e.credits=_.value,this.emit("fetchPostRequest",e,document)}};const F=document.querySelector("#modalEdit"),T=document.querySelector("#modalEdit").querySelector("#groups"),O=document.querySelector("#modalEdit").querySelector("select"),$=document.querySelector("#modalEdit").querySelector("#first_name"),U=document.querySelector("#modalEdit").querySelector("#last_name"),w=document.querySelector("#modalEdit").querySelector("#street"),C=document.querySelector("#modalEdit").querySelector("#zip_code"),L=document.querySelector("#modalEdit").querySelector("#city"),x=document.querySelector("#modalEdit").querySelector("#phone"),A=document.querySelector("#modalEdit").querySelector("#range_credit"),D=document.querySelector("#modalEdit").querySelector(".modal-content"),R=document.querySelector("#modalEdit").querySelector("#update_button"),I=document.querySelector("main").querySelector("tbody");var H=class extends s{init(){I.addEventListener("dblclick",this.dblClickListenerFun.bind(this),!1),this.on("editSendData",this.initBlank.bind(this),document),M.Modal.init(F,{}),R.addEventListener("click",this.editBlankUpdate.bind(this),!1)}dblClickListenerFun(e){this.emit("editRequestData",e.target.parentNode.id,document)}initBlank(e){let t=e[0];this.groups=e[1];let o=this.groups.find(e=>e.group_id==t.group_id);T.innerHTML="",T.innerHTML+=`<option value="${t.group_id}" disabled selected>${o.name}</option>`,this.groups.forEach(e=>{T.innerHTML+=`<option value="${e.group_id}" id="${e.group_id}">${e.name}</option>`}),console.log("choosedGroup",o),o.is_admin?(console.log("true;"),A.disabled=!0):(console.log("false"),A.disabled=!1),D.id=t.user_id;let s=t.name.split(" ");$.value=s[0],s.splice(0,1),U.value=s.join(" "),w.value=t.street,C.value=t.zip_code,L.value=t.city,x.value=t.phone,A.value=t.credits,0==A.value?($.disabled=!0,U.disabled=!0,w.disabled=!0,C.disabled=!0,L.disabled=!0,x.disabled=!0,A.disabled=!0,T.disabled=!0):($.disabled=!1,U.disabled=!1,w.disabled=!1,C.disabled=!1,L.disabled=!1,x.disabled=!1,A.disabled=!1,T.disabled=!1),o.is_admin?(console.log("true;"),A.disabled=!0):(console.log("false"),A.disabled=!1),M.FormSelect.init(O,{}),M.updateTextFields(),M.Modal.getInstance(F).open();let i=document.querySelector("#modalEdit").querySelector(".select-wrapper").querySelector("ul");Array.from(i.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}editBlankUpdate(){this.instance=M.FormSelect.init(O,{}),this.instance=M.FormSelect.getInstance(O);let e={};e.user_id=D.id,e.group_id=this.instance.getSelectedValues()[0],e.name=$.value+" "+U.value,e.street=w.value,e.zip_code=C.value,e.city=L.value,e.phone=x.value,e.credits=A.value,this.emit("fetchPutRequest",e,document)}groupChoosed(){console.log("GROUP CHOOSED"),this.instance=M.FormSelect.init(O,{}),this.instance=M.FormSelect.getInstance(O);let e=this.instance.getSelectedValues()[0];if(console.log(e),e){console.log(this.groups,"groups");let t=this.groups.find(t=>t.group_id==e);console.log("sel group",t),t&&t.is_admin?(console.log("rangeCreditSel.disabled = true;"),A.disabled=!0):A.disabled=!1}let t=document.querySelector("#modalEdit").querySelector(".select-wrapper").querySelector("ul");Array.from(t.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}};console.log("main.js"),r.bindTo(document),d.bindTo(document),c.bindTo(document),h.bindTo(document),k.bindTo(document),H.bindTo(document)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2pzL2RhdGFfc3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvd2ViX3NvY2tldC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9ncm91cHNfdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9qcy91c2Vyc192aWV3LmpzIiwid2VicGFjazovLy8uL2pzL3Bvc3RfYmxhbmsuanMiLCJ3ZWJwYWNrOi8vLy4vanMvZWRpdF9ibGFuay5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYWluLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDb21wb25lbnQiLCJbb2JqZWN0IE9iamVjdF0iLCJlbGVtZW50IiwidGhpcyIsImV2ZW50VHlwZSIsImNhbGxiYWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZGV0YWlsIiwiZGF0YSIsIkN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTEVsZW1lbnQiLCJIVE1MRG9jdW1lbnQiLCJFcnJvciIsImluaXQiLCJkYXRhX3N0b3JlX1VzZXJPYmoiLCJ1c2VyIiwidXNlcl9pZCIsInBhcnNlRmxvYXQiLCJncm91cF9pZCIsInN0cmVldCIsInppcF9jb2RlIiwiY2l0eSIsInBob25lIiwiY3JlZGl0cyIsImRhdGFfc3RvcmVfR3JvdXBPYmoiLCJnIiwiaXNfYWRtaW4iLCJkYXRhX3N0b3JlIiwidXNlcnMiLCJncm91cHMiLCJvbiIsImFjdGlvbkV2ZW50RnVuIiwiYmluZCIsInJlbmRlckluaXRGdW4iLCJwb3N0QmxhbmtFbWl0IiwiZWRpdEJsYW5rRW1pdCIsInBvc3RVc2VyUmVxdWVzdCIsInB1dFVzZXJSZXF1ZXN0Iiwic2V0VGltZW91dCIsImVtaXQiLCJhY3Rpb24iLCJzcGxpdCIsImZldGNoRnVuIiwidXNlckRlbGV0ZSIsImlkIiwiZ3JvdXBEZWxldGUiLCJ0ZW1wIiwiZmluZCIsIml0ZW0iLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJ1cmwiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJhZGRVc2VyIiwiYWRkR3JvdXAiLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJwdXNoIiwiY291bnRVc2Vyc0luR3JvdXBzIiwiZ3JvdXAiLCJmb3JFYWNoIiwiYW1vdW50T2ZVc2VycyIsInJlZHVjZSIsImFjYyIsImN1ciIsIm9iaiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidW5kZWZpbmVkIiwid2ViX3NvY2tldCIsInNvY2tldCIsIldlYlNvY2tldCIsIm9ubWVzc2FnZSIsIm9uTWVzc2FnZUZ1biIsIm9ub3BlbiIsIm9uT3BlbkZ1biIsIm9uZXJyb3IiLCJvbkVycm9yIiwib25jbG9zZSIsIm9uQ2xvc2UiLCJtZXNzYWdlIiwicGFyc2UiLCJlIiwiZ3JvdXBzX3ZpZXdfZ3JvdXBzVWxTZWwiLCJncm91cHNfdmlld19wYWdlVGl0bGVTZWwiLCJncm91cHNfdmlldyIsInJlbmRlckdyb3VwcyIsIndpbmRvdyIsIm9uaGFzaGNoYW5nZSIsImlubmVySFRNTCIsImFjdGl2ZSIsImxvY2F0aW9uIiwiaGFzaCIsInNvbWUiLCJpbm5lclRleHQiLCJteVRlbXBsYXRlIiwidXNlcnNfdmlld191c2Vyc1RhYmxlQm9keVNlbCIsInVzZXJzX3ZpZXciLCJyZW5kZXJVc2VycyIsInBvc3RfYmxhbmtfbmF2QWRkU2VsIiwicG9zdF9ibGFua19ibGFua0dyb3Vwc1NlbCIsInBvc3RfYmxhbmtfZ3JvdXBTZWwiLCJwb3N0X2JsYW5rX2ZpcnN0TmFtZVNlbCIsInBvc3RfYmxhbmtfbGFzdE5hbWVTZWwiLCJwb3N0X2JsYW5rX3N0cmVldFNlbCIsInBvc3RfYmxhbmtfemlwQ29kZVNlbCIsInBvc3RfYmxhbmtfY2l0eVNlbCIsInBvc3RfYmxhbmtfcGhvbmVTZWwiLCJwb3N0X2JsYW5rX3JhbmdlQ3JlZGl0U2VsIiwicG9zdF9ibGFua19jcmVhdGVCdXR0b25TZWwiLCJwb3N0X2JsYW5rIiwiaW5pdEJsYW5rIiwicG9zdFJlcXVlc3REYXRhIiwicG9zdEJsYW5rQ3JlYXRlIiwiTSIsIk1vZGFsIiwidXBkYXRlVGV4dEZpZWxkcyIsIkZvcm1TZWxlY3QiLCJtYXRlcmlhbEdyb3VwVWwiLCJBcnJheSIsImZyb20iLCJjaGlsZHJlbiIsImxpIiwib25jbGljayIsImdyb3VwQ2hvb3NlZCIsImluc3RhbmNlIiwiZ2V0SW5zdGFuY2UiLCJncm91cElkIiwiZ2V0U2VsZWN0ZWRWYWx1ZXMiLCJzZWxlY3RlZEdyb3VwIiwiZGlzYWJsZWQiLCJ0ZW1wVXNlciIsImVkaXRfYmxhbmtfbW9kYWxFZGl0U2VsIiwiZWRpdF9ibGFua19ibGFua0dyb3Vwc1NlbCIsImVkaXRfYmxhbmtfZ3JvdXBTZWwiLCJlZGl0X2JsYW5rX2ZpcnN0TmFtZVNlbCIsImVkaXRfYmxhbmtfbGFzdE5hbWVTZWwiLCJlZGl0X2JsYW5rX3N0cmVldFNlbCIsImVkaXRfYmxhbmtfemlwQ29kZVNlbCIsImVkaXRfYmxhbmtfY2l0eVNlbCIsImVkaXRfYmxhbmtfcGhvbmVTZWwiLCJlZGl0X2JsYW5rX3JhbmdlQ3JlZGl0U2VsIiwiZWRpdF9ibGFua19pZENvbnRhaW5lclNlbCIsImVkaXRfYmxhbmtfdXBkYXRlQnV0dG9uU2VsIiwiZWRpdF9ibGFua19tYWluVGFibGVTZWwiLCJlZGl0X2JsYW5rIiwiZGJsQ2xpY2tMaXN0ZW5lckZ1biIsImVkaXRCbGFua1VwZGF0ZSIsInRhcmdldCIsInBhcmVudE5vZGUiLCJwYXJhbXMiLCJjaG9vc2VkR3JvdXAiLCJmdWxsbmFtZSIsImpvaW4iLCJvcGVuIiwiYmluZFRvIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REeEIsRUFBQTJCLEVBQUEsR0FJQTNCLElBQUE0QixFQUFBLCtDQ25FQUMsRUFDQUMsWUFBQUMsR0FDQUMsS0FBQUQsVUFHQUQsR0FBQUcsRUFBQUMsRUFBQUgsRUFBQUMsS0FBQUQsU0FFQUEsRUFBQUksaUJBQUFGLEVBREFHLEdB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dW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgb24oZXZlbnRUeXBlLCBjYWxsYmFjaywgZWxlbWVudCA9IHRoaXMuZWxlbWVudCkge1xyXG4gICAgY29uc3QgY2JXcmFwID0gZXZlbnQgPT4gY2FsbGJhY2soZXZlbnQuZGV0YWlsKTtcclxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNiV3JhcCk7XHJcbiAgfVxyXG5cclxuICBlbWl0KGV2ZW50VHlwZSwgZGF0YSwgZWxlbWVudCA9IHRoaXMuZWxlbWVudCkge1xyXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoZXZlbnRUeXBlLCB7IGRldGFpbDogZGF0YSB9KTtcclxuICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYmluZFRvKHNlbGVjdG9yKSB7XHJcbiAgICBsZXQgZWxlbWVudCA9IHNlbGVjdG9yO1xyXG4gICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBlbGVtZW50IGluc3RhbmNlb2YgSFRNTERvY3VtZW50KSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCBib3VuZCBjb21wb25lbnQnKTtcclxuICAgIH1cclxuXHJcbiAgICAobmV3IHRoaXMoZWxlbWVudCkpLmluaXQoKTtcclxuICB9XHJcblxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXHJcbiAgaW5pdCgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBiZSBpbXBsZW1lbnRlZCEnKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudCc7XHJcblxyXG5jbGFzcyBEYXRhU3RvcmUgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy51c2VycyA9IFtdO1xyXG4gICAgdGhpcy5ncm91cHMgPSBbXTtcclxuICAgIHRoaXMub24oJ2FjdGlvbkV2ZW50JywgdGhpcy5hY3Rpb25FdmVudEZ1bi5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XHJcbiAgICB0aGlzLm9uKCdyZW5kZXJJbml0JywgdGhpcy5yZW5kZXJJbml0RnVuLmJpbmQodGhpcyksIGRvY3VtZW50KTtcclxuICAgIHRoaXMub24oJ3Bvc3RSZXF1ZXN0RGF0YScsIHRoaXMucG9zdEJsYW5rRW1pdC5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XHJcbiAgICB0aGlzLm9uKCdlZGl0UmVxdWVzdERhdGEnLCB0aGlzLmVkaXRCbGFua0VtaXQuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgdGhpcy5vbignZmV0Y2hQb3N0UmVxdWVzdCcsIHRoaXMucG9zdFVzZXJSZXF1ZXN0LmJpbmQodGhpcyksIGRvY3VtZW50KTtcclxuICAgIHRoaXMub24oJ2ZldGNoUHV0UmVxdWVzdCcsIHRoaXMucHV0VXNlclJlcXVlc3QuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgLy93aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnJlbmRlckluaXRGdW4uYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySW5pdEZ1bigpIHtcclxuICAgIGZ1bmN0aW9uIGZ1bigpIHtcclxuICAgICAgdGhpcy5lbWl0KCdyZW5kZXJHcm91cHMnLCB0aGlzLmdyb3VwcywgZG9jdW1lbnQpO1xyXG4gICAgICB0aGlzLmVtaXQoJ3JlbmRlclVzZXJzJywgdGhpcy51c2VycywgZG9jdW1lbnQpO1xyXG4gICAgfVxyXG4gICAgc2V0VGltZW91dChmdW4uYmluZCh0aGlzKSwgNSk7XHJcbiAgfVxyXG5cclxuICBhY3Rpb25FdmVudEZ1bihkYXRhKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnZGF0YScsIGRhdGEpO1xyXG4gICAgbGV0IGFjdGlvbiA9IGRhdGEuYWN0aW9uLnNwbGl0KCc6Jyk7XHJcbiAgICBpZiAoIGFjdGlvblsxXSA9PSAndXBkYXRlZCcpIHtcclxuICAgICAgdGhpcy5mZXRjaEZ1bihkYXRhKTtcclxuICAgIH1cclxuICAgIGlmICggYWN0aW9uWzFdID09ICdyZW1vdmVkJykge1xyXG4gICAgICBpZiAoIGFjdGlvblswXSA9PSAndXNlcicgKSB7XHJcbiAgICAgICAgdXNlckRlbGV0ZShkYXRhLmlkKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIGFjdGlvblswXSA9PSAnZ3JvdXAnICkge1xyXG4gICAgICAgIGdyb3VwRGVsZXRlKGRhdGEuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyB0aGlzLmZldGNoRnVuKGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgdXNlckRlbGV0ZShpZCkge1xyXG4gICAgbGV0IHRlbXAgPSB0aGlzLnVzZXJzLmZpbmQoIChpdGVtKSA9PiBpdGVtLnVzZXJfaWQgPT0gaWQgKTtcclxuICAgIGxldCBpbmRleCA9IHRoaXMudXNlcnMuaW5kZXhPZih0ZW1wKTtcclxuICAgIHRoaXMudXNlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHRoaXMuZW1pdCgncmVuZGVySW5pdCcsIG51bGwsIGRvY3VtZW50KTtcclxuICB9XHJcblxyXG4gIGdyb3VwRGVsZXRlKGlkKSB7XHJcbiAgICBsZXQgdGVtcCA9IHRoaXMuZ3JvdXBzLmZpbmQoIChpdGVtKSA9PiBpdGVtLmdyb3VwX2lkID09IGlkICk7XHJcbiAgICBsZXQgaW5kZXggPSB0aGlzLmdyb3Vwcy5pbmRleE9mKHRlbXApO1xyXG4gICAgdGhpcy5ncm91cHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHRoaXMuZW1pdCgncmVuZGVySW5pdCcsIG51bGwsIGRvY3VtZW50KTtcclxuICB9XHJcblxyXG4gIGZldGNoRnVuKGRhdGEpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgbGV0IGFjdGlvbiA9IGRhdGEuYWN0aW9uLnNwbGl0KCc6Jyk7XHJcbiAgICBsZXQgaWQgPSBkYXRhLmlkO1xyXG4gICAgbGV0IHVybCA9IGBodHRwczovL3Vtcy1ob25leWJhZGdlci5oZXJva3VhcHAuY29tLyR7YWN0aW9uWzBdfS8ke2lkfWA7XHJcbiAgICBmZXRjaCh1cmwpXHJcbiAgICAgIC50aGVuKCAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSApXHJcbiAgICAgIC50aGVuKCAoanNvbikgPT4ge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdqc29uJywganNvbik7XHJcbiAgICAgICAgaWYgKGFjdGlvblswXSA9PT0gJ3VzZXInKXtcclxuICAgICAgICAgIHRoaXMuYWRkVXNlcihqc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjdGlvblswXSA9PT0gJ2dyb3VwJyl7XHJcbiAgICAgICAgICB0aGlzLmFkZEdyb3VwKGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVtaXQoJ3JlbmRlckluaXQnLCBudWxsLCBkb2N1bWVudCk7XHJcbiAgICAgIH0pXHJcbiAgICAuY2F0Y2goIGNvbnNvbGUubG9nICk7XHJcbiAgfVxyXG5cclxuICBhZGRVc2VyKHVzZXIpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCd1c2VyJywgdXNlcik7XHJcbiAgICBsZXQgdGVtcCA9IHRoaXMudXNlcnMuZmluZCggKGl0ZW0pID0+IGl0ZW0udXNlcl9pZCA9PSB1c2VyLnVzZXJfaWQgKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCd0ZW1wJywgdGVtcClcclxuICAgIGlmICh0ZW1wKSB7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdpbnNpZGUgQWRkVXNlciBJZicpO1xyXG4gICAgICBsZXQgaW5kZXggPSB0aGlzLnVzZXJzLmluZGV4T2YodGVtcCk7XHJcbiAgICAgIHRoaXMudXNlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuICAgIHRoaXMudXNlcnMucHVzaChuZXcgVXNlck9iaih1c2VyKSk7XHJcbiAgICB0aGlzLmNvdW50VXNlcnNJbkdyb3VwcygpO1xyXG4gIH1cclxuXHJcbiAgYWRkR3JvdXAoZ3JvdXApIHtcclxuICAgIHRoaXMuZ3JvdXBzLnB1c2gobmV3IEdyb3VwT2JqKGdyb3VwKSk7XHJcbiAgICB0aGlzLmNvdW50VXNlcnNJbkdyb3VwcygpO1xyXG4gIH1cclxuXHJcbiAgY291bnRVc2Vyc0luR3JvdXBzKCkge1xyXG4gICAgdGhpcy5ncm91cHMuZm9yRWFjaCggKGdyb3VwKSA9PiB7XHJcbiAgICAgIGdyb3VwLmFtb3VudE9mVXNlcnMgPSB0aGlzLnVzZXJzLnJlZHVjZSggKGFjYywgY3VyKSA9PiB7XHJcbiAgICAgICAgaWYgKCBjdXIuZ3JvdXBfaWQgPT09IGdyb3VwLmdyb3VwX2lkICkgcmV0dXJuIGFjYyArIDE7XHJcbiAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgfSwgMCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1dFVzZXJSZXF1ZXN0KG9iaikge1xyXG4gICAgY29uc29sZS5sb2coJ3B1dFVzZXJSZXF1ZXN0Jyk7XHJcbiAgICBsZXQgdXJsID0gYGh0dHBzOi8vdW1zLWhvbmV5YmFkZ2VyLmhlcm9rdWFwcC5jb20vdXNlci8ke29iai51c2VyX2lkfWA7XHJcbiAgICBsZXQgdGVtcCA9IG5ldyBVc2VyT2JqKG9iaik7XHJcbiAgICBmZXRjaCh1cmwsIHtcclxuICAgICAgbWV0aG9kOiAncHV0JyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGVtcClcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcG9zdFVzZXJSZXF1ZXN0KG9iaikge1xyXG4gICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vdW1zLWhvbmV5YmFkZ2VyLmhlcm9rdWFwcC5jb20vdXNlcic7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhvYmopO1xyXG4gICAgbGV0IHRlbXAgPSBuZXcgVXNlck9iaihvYmopO1xyXG4gICAgdGVtcC51c2VyX2lkID0gdW5kZWZpbmVkO1xyXG4gICAgdGVtcCA9IEpTT04uc3RyaW5naWZ5KHRlbXApO1xyXG4gICAgLy8gY29uc29sZS5sb2codGVtcCk7XHJcblxyXG4gICAgZmV0Y2godXJsLCB7XHJcbiAgICAgIG1ldGhvZDogJ3Bvc3QnLFxyXG4gICAgICBib2R5OiB0ZW1wXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHBvc3RCbGFua0VtaXQoKSB7XHJcbiAgICB0aGlzLmVtaXQoJ3Bvc3RTZW5kRGF0YScsIHRoaXMuZ3JvdXBzLCBkb2N1bWVudCk7XHJcbiAgfVxyXG5cclxuICBlZGl0QmxhbmtFbWl0KGlkKSB7XHJcbiAgICBsZXQgdXNlciA9IHRoaXMudXNlcnMuZmluZCggKGl0ZW0pID0+IGl0ZW0udXNlcl9pZCA9PSBpZCApXHJcbiAgICB0aGlzLmVtaXQoJ2VkaXRTZW5kRGF0YScsIFt1c2VyLCB0aGlzLmdyb3Vwc10sIGRvY3VtZW50KTtcclxuICB9XHJcbiAgXHJcbn1cclxuXHJcbmNsYXNzIFVzZXJPYmoge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXIpIHtcclxuICAgIHRoaXMudXNlcl9pZCA9IHBhcnNlRmxvYXQodXNlci51c2VyX2lkKTtcclxuICAgIHRoaXMuZ3JvdXBfaWQgPSBwYXJzZUZsb2F0KHVzZXIuZ3JvdXBfaWQpO1xyXG4gICAgdGhpcy5uYW1lID0gdXNlci5uYW1lO1xyXG4gICAgdGhpcy5zdHJlZXQgPSB1c2VyLnN0cmVldDtcclxuICAgIHRoaXMuemlwX2NvZGUgPSBwYXJzZUZsb2F0KHVzZXIuemlwX2NvZGUpO1xyXG4gICAgdGhpcy5jaXR5ID0gdXNlci5jaXR5O1xyXG4gICAgdGhpcy5waG9uZSA9IHVzZXIucGhvbmU7XHJcbiAgICB0aGlzLmNyZWRpdHMgPSBwYXJzZUZsb2F0KHVzZXIuY3JlZGl0cyk7XHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBHcm91cE9iaiB7XHJcbiAgY29uc3RydWN0b3IoZykge1xyXG4gICAgdGhpcy5ncm91cF9pZCA9IGcuZ3JvdXBfaWQ7XHJcbiAgICB0aGlzLm5hbWUgPSBnLm5hbWU7XHJcbiAgICB0aGlzLmlzX2FkbWluID0gZy5pc19hZG1pbjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IERhdGFTdG9yZTtcclxuXHJcblxyXG5cclxuLy8gY29uc3QgdXJsID0gJ2h0dHBzOi8vdW1zLWhvbmV5YmFkZ2VyLmhlcm9rdWFwcC5jb20vdXNlcic7XHJcbi8vICAgICBmZXRjaCh1cmwsIHtcclxuLy8gICAgICAgbWV0aG9kOiAncG9zdCcsXHJcbi8vICAgICAgIGJvZHk6ICd7XCJ1c2VyX2lkXCI6MTIzNDYxLFwiZ3JvdXBfaWRcIjo0LFwibmFtZVwiOlwiTW9yZSBLb2NoXCIsXCJzdHJlZXRcIjpcIjc3OSBMeW5jaCBTdHJlZXRcIixcInppcF9jb2RlXCI6NjE3OCxcImNpdHlcIjpcIk5ld2Nhc3RsZVwiLFwicGhvbmVcIjpcIiszNSAoOTgzKSA2NjYtMzQyM1wiLFwiY3JlZGl0c1wiOjEwMH0nXHJcbi8vICAgICB9KTtcclxuXHJcbi8vIHtcImdyb3VwX2lkXCI6NSxcIm5hbWVcIjpcIjEgMlwiLFwic3RyZWV0XCI6XCIzXCIsXCJ6aXBfY29kZVwiOjQsXCJjaXR5XCI6XCI1XCIsXCJwaG9uZVwiOlwiNlwiLFwiY3JlZGl0c1wiOjQ0MTh9IiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudCc7XHJcblxyXG5jbGFzcyBNeVdlYlNvY2tldCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCgnd3M6Ly91bXMtaG9uZXliYWRnZXIuaGVyb2t1YXBwLmNvbS91bXMnKTtcclxuICAgICAgICB0aGlzLnNvY2tldC5vbm1lc3NhZ2UgPSB0aGlzLm9uTWVzc2FnZUZ1bi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc29ja2V0Lm9ub3BlbiA9IHRoaXMub25PcGVuRnVuLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zb2NrZXQub25lcnJvciA9IHRoaXMub25FcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc29ja2V0Lm9uY2xvc2UgPSB0aGlzLm9uQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvbk1lc3NhZ2VGdW4obWVzc2FnZSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xyXG4gICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShtZXNzYWdlLmRhdGEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdXRUIgU09DS0VUIC0gJywgZGF0YSk7XHJcbiAgICAgICAgaWYgKGRhdGEubWVzc2FnZSl7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdNRVNTQUdFIC0gJywgZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGEuYWN0aW9uKXtcclxuICAgICAgICAgICAgLy9sZXQgYWN0aW9uID0gZGF0YS5hY3Rpb24uc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgLy9sZXQgaWQgPSBkYXRhLmlkO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFjdGlvbik7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWN0aW9uRXZlbnQnLCBkYXRhLCBkb2N1bWVudCk7XHJcbiAgICAgICAgICAgIC8vIGlmIChhY3Rpb25bMF0gPT09ICd1c2VyJyl7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoYWN0aW9uWzFdID09PSAndXBkYXRlZCcpe1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGxldCB1c2VySWQgPSBkYXRhLmlkO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCd1c2VySWQgdXBkYXRlZCcsIHVzZXJJZCk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gaWYgKGFjdGlvblswXSA9PT0gJ2dyb3VwJyl7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoYWN0aW9uWzFdID09PSAndXBkYXRlZCcpe1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGxldCAgZ3JvdXBJZCA9IGRhdGEuaWQ7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ2dyb3VwSWQgdXBkYXRlZCAnLCBncm91cElkKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW5GdW4oZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRXJyb3IoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UobSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNeVdlYlNvY2tldDsiLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50JztcclxuY29uc3QgZ3JvdXBzVWxTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2xpZGUtb3V0JykucXVlcnlTZWxlY3RvcigndWwnKTtcclxuY29uc3QgcGFnZVRpdGxlU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UtdGl0bGUnKTtcclxuXHJcbmNsYXNzIEdyb3Vwc1ZpZXcgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5vbigncmVuZGVyR3JvdXBzJywgdGhpcy5yZW5kZXJHcm91cHMuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgLy8gZ3JvdXBzVWxTZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHt0aGlzLmVtaXQoJ3JlbmRlckluaXQnLCBudWxsLCBkb2N1bWVudCk7fSwgZmFsc2UpO1xyXG4gICAgd2luZG93Lm9uaGFzaGNoYW5nZSA9ICgpPT4ge3RoaXMuZW1pdCgncmVuZGVySW5pdCcsIG51bGwsIGRvY3VtZW50KTt9O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyR3JvdXBzKGdyb3Vwcykge1xyXG4gICAgZ3JvdXBzVWxTZWwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICBncm91cHMuZm9yRWFjaCggKGdyb3VwKSA9PiB7XHJcbiAgICAgIC8vIGxldCBhY3RpdmUgPSAoZG9jdW1lbnQubG9jYXRpb24uaGFzaC5pbmNsdWRlcyhncm91cC5ncm91cF9pZCkpID8gJ2FjdGl2ZScgOiAnJztcclxuICAgICAgbGV0IGFjdGl2ZTtcclxuICAgICAgbGV0IGhhc2ggPSBkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnNwbGl0KC9bI1xcL10vKTtcclxuICAgICAgaWYgKGhhc2guc29tZSggKGl0ZW0pID0+IGl0ZW0gPT0gZ3JvdXAuZ3JvdXBfaWQpKSB7XHJcbiAgICAgICAgcGFnZVRpdGxlU2VsLmlubmVyVGV4dCA9IGdyb3VwLm5hbWU7XHJcbiAgICAgICAgYWN0aXZlID0gJ2FjdGl2ZSc7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWN0aXZlID0gJyc7XHJcbiAgICAgIH1cclxuICAgICAgLy8gY29uc29sZS5sb2coJ2hhc2gnLCBkb2N1bWVudC5sb2NhdGlvbi5oYXNoKTtcclxuICAgICAgbGV0IG15VGVtcGxhdGUgPSBgPGxpIGNsYXNzPSR7YWN0aXZlfT48YSBocmVmPVwiIyR7Z3JvdXAuZ3JvdXBfaWR9L1wiPiR7Z3JvdXAubmFtZX0gPHNwYW4gY2xhc3M9XCJiYWRnZVwiIGRhdGEtYmFkZ2UtY2FwdGlvbj1cIlwiPiR7Z3JvdXAuYW1vdW50T2ZVc2Vyc308L3NwYW4+PC9hPjwvbGk+YDtcclxuICAgICAgZ3JvdXBzVWxTZWwuaW5uZXJIVE1MICs9IG15VGVtcGxhdGU7XHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKGdyb3Vwcyk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgR3JvdXBzVmlldzsiLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50JztcclxuY29uc3QgdXNlcnNUYWJsZUJvZHlTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RyaXBlZCcpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XHJcblxyXG5jbGFzcyBVc2Vyc1ZpZXcgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5vbigncmVuZGVyVXNlcnMnLCB0aGlzLnJlbmRlclVzZXJzLmJpbmQodGhpcyksIGRvY3VtZW50KTtcclxuICB9XHJcblxyXG4gIHJlbmRlclVzZXJzKHVzZXJzKSB7XHJcbiAgICB1c2Vyc1RhYmxlQm9keVNlbC5pbm5lckhUTUwgPSAnJztcclxuICAgIHVzZXJzLmZvckVhY2goICh1c2VyKSA9PiB7XHJcbiAgICAgIGxldCBoYXNoID0gZG9jdW1lbnQubG9jYXRpb24uaGFzaC5zcGxpdCgvWyNcXC9dLyk7XHJcbiAgICAgIGlmIChoYXNoLnNvbWUoIChpdGVtKSA9PiBpdGVtID09IHVzZXIuZ3JvdXBfaWQpKSB7XHJcbiAgICAgICAgICBsZXQgbXlUZW1wbGF0ZSA9IGBcclxuICAgICAgICAgIDx0ciBpZD1cIiR7dXNlci51c2VyX2lkfVwiPlxyXG4gICAgICAgICAgICA8dGQ+JHt1c2VyLm5hbWV9PC90ZD5cclxuICAgICAgICAgICAgPHRkPiR7dXNlci5zdHJlZXR9PC90ZD5cclxuICAgICAgICAgICAgPHRkPiR7dXNlci56aXBfY29kZX08L3RkPlxyXG4gICAgICAgICAgICA8dGQ+JHt1c2VyLmNpdHl9PC90ZD5cclxuICAgICAgICAgICAgPHRkPiR7dXNlci5waG9uZX08L3RkPlxyXG4gICAgICAgICAgPC90cj5cclxuICAgICAgICAgIGBcclxuICAgICAgICB1c2Vyc1RhYmxlQm9keVNlbC5pbm5lckhUTUwgKz0gbXlUZW1wbGF0ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZyh1c2Vycyk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlcnNWaWV3OyIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xyXG5cclxuY29uc3QgbmF2QWRkU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb24tYWRkJykucXVlcnlTZWxlY3RvcignYScpO1xyXG5jb25zdCBibGFua0dyb3Vwc1NlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNncm91cHMnKTtcclxuXHJcbmNvbnN0IGdyb3VwU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XHJcblxyXG5jb25zdCBmaXJzdE5hbWVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCcjZmlyc3RfbmFtZScpO1xyXG5jb25zdCBsYXN0TmFtZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNsYXN0X25hbWUnKTtcclxuY29uc3Qgc3RyZWV0U2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI3N0cmVldCcpO1xyXG5jb25zdCB6aXBDb2RlU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI3ppcF9jb2RlJyk7XHJcbmNvbnN0IGNpdHlTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCcjY2l0eScpO1xyXG5jb25zdCBwaG9uZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNwaG9uZScpO1xyXG5jb25zdCByYW5nZUNyZWRpdFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNyYW5nZV9jcmVkaXQnKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUJ1dHRvblNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNjcmVhdGVfYnV0dG9uJyk7XHJcblxyXG5jbGFzcyBQb3N0QmxhbmsgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICAvLyB0aGlzLm9uKCdwb3N0U2VuZERhdGEnLCB0aGlzLnJlbmRlclBvc3RCbGFuay5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XHJcbiAgICAgICAgdGhpcy5vbigncG9zdFNlbmREYXRhJywgdGhpcy5pbml0QmxhbmsuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgICAgIG5hdkFkZFNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucG9zdFJlcXVlc3REYXRhLmJpbmQodGhpcyksIGZhbHNlKTtcclxuICAgICAgICAvLyBuYXZBZGRTZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmluaXRCbGFuay5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICAgICAgY3JlYXRlQnV0dG9uU2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5wb3N0QmxhbmtDcmVhdGUuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgICAgIE0uTW9kYWwuaW5pdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKSwge30pO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRCbGFuayhncm91cHMpIHtcclxuICAgICAgICBmaXJzdE5hbWVTZWwudmFsdWUgPSAnJztcclxuICAgICAgICBsYXN0TmFtZVNlbC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIHN0cmVldFNlbC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIHppcENvZGVTZWwudmFsdWUgPSAnJztcclxuICAgICAgICBjaXR5U2VsLnZhbHVlID0gJyc7XHJcbiAgICAgICAgcGhvbmVTZWwudmFsdWUgPSAnJztcclxuICAgICAgICByYW5nZUNyZWRpdFNlbC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuZ3JvdXBzID0gZ3JvdXBzO1xyXG4gICAgICAgIE0udXBkYXRlVGV4dEZpZWxkcygpO1xyXG5cclxuICAgICAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgKz0gYDxvcHRpb24gdmFsdWU9XCJcIiBkaXNhYmxlZCBzZWxlY3RlZD5DaG9vc2UgZ3JvdXA8L29wdGlvbj5gO1xyXG4gICAgICAgIGdyb3Vwcy5mb3JFYWNoKCAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgKz0gYDxvcHRpb24gdmFsdWU9XCIke2l0ZW0uZ3JvdXBfaWR9XCIgaWQ9XCIke2l0ZW0uZ3JvdXBfaWR9XCI+JHtpdGVtLm5hbWV9PC9vcHRpb24+YDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBNLkZvcm1TZWxlY3QuaW5pdChncm91cFNlbCwge30pO1xyXG5cclxuICAgICAgICBsZXQgbWF0ZXJpYWxHcm91cFVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignLnNlbGVjdC13cmFwcGVyJykucXVlcnlTZWxlY3RvcigndWwnKTtcclxuICAgICAgICBBcnJheS5mcm9tKG1hdGVyaWFsR3JvdXBVbC5jaGlsZHJlbikuZm9yRWFjaCggKGxpKSA9PiB7XHJcbiAgICAgICAgICAgIGxpLm9uY2xpY2sgPSB0aGlzLmdyb3VwQ2hvb3NlZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIG1hdGVyaWFsR3JvdXBJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5ncm91cENob29zZWQuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgICAgIC8vIG1hdGVyaWFsR3JvdXBVbC5ibHVyID0gdGhpcy5ncm91cENob29zZWQuYmluZCh0aGlzKTtcclxuICAgICAgICAvLyBtYXRlcmlhbEdyb3VwVWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmdyb3VwQ2hvb3NlZC5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHBvc3RSZXF1ZXN0RGF0YSgpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncG9zdFJlcXVlc3REYXRhJyk7XHJcbiAgICAgICAgdGhpcy5lbWl0KCdwb3N0UmVxdWVzdERhdGEnLCBudWxsLCBkb2N1bWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVuZGVyUG9zdEJsYW5rIChncm91cHMpIHtcclxuICAgIC8vICAgICBjb25zb2xlLmxvZygncmVuZGVyUG9zdEJsYW5rJyk7XHJcbiAgICAvLyAgICAgYmxhbmtHcm91cHNTZWwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAvLyAgICAgYmxhbmtHcm91cHNTZWwuaW5uZXJIVE1MICs9IGA8b3B0aW9uIHZhbHVlPVwiXCIgZGlzYWJsZWQgc2VsZWN0ZWQ+Q2hvb3NlIGdyb3VwPC9vcHRpb24+YDtcclxuICAgIC8vICAgICBncm91cHMuZm9yRWFjaCggKGl0ZW0pID0+IHtcclxuICAgIC8vICAgICAgICAgYmxhbmtHcm91cHNTZWwuaW5uZXJIVE1MICs9IGA8b3B0aW9uIHZhbHVlPVwiJHtpdGVtLmdyb3VwX2lkfVwiIGlkPVwiJHtpdGVtLmdyb3VwX2lkfVwiPiR7aXRlbS5uYW1lfTwvb3B0aW9uPmA7XHJcbiAgICAvLyAgICAgfSk7XHJcbiAgICAvLyAgICAgTS5Gb3JtU2VsZWN0LmluaXQoZ3JvdXBTZWwsIHt9KTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBncm91cENob29zZWQoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0dST1VQIENIT09TRUQnKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmluaXQoZ3JvdXBTZWwsIHt9KTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmdldEluc3RhbmNlKGdyb3VwU2VsKTtcclxuICAgICAgICBsZXQgZ3JvdXBJZCA9IHRoaXMuaW5zdGFuY2UuZ2V0U2VsZWN0ZWRWYWx1ZXMoKVswXTtcclxuICAgICAgICBjb25zb2xlLmxvZyhncm91cElkKTtcclxuICAgICAgICBpZiAoZ3JvdXBJZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmdyb3VwcywgJ2dyb3VwcycpO1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRHcm91cCA9IHRoaXMuZ3JvdXBzLmZpbmQoIChpdGVtKSA9PiBpdGVtLmdyb3VwX2lkID09IGdyb3VwSWQgKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbCBncm91cCcsIHNlbGVjdGVkR3JvdXApXHJcbiAgICAgICAgICAgIGlmICggc2VsZWN0ZWRHcm91cCAmJiBzZWxlY3RlZEdyb3VwLmlzX2FkbWluICkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JhbmdlQ3JlZGl0U2VsLmRpc2FibGVkID0gdHJ1ZTsnKTtcclxuICAgICAgICAgICAgICAgIHJhbmdlQ3JlZGl0U2VsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJhbmdlQ3JlZGl0U2VsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vINC60L7RgdGC0YvQu9GMLCDRgdC/0LDQtNCw0Y7RgiDQu9C40YHQtdC90LXRgNGLXHJcbiAgICAgICAgbGV0IG1hdGVyaWFsR3JvdXBVbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3Qtd3JhcHBlcicpLnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7XHJcbiAgICAgICAgQXJyYXkuZnJvbShtYXRlcmlhbEdyb3VwVWwuY2hpbGRyZW4pLmZvckVhY2goIChsaSkgPT4ge1xyXG4gICAgICAgICAgICBsaS5vbmNsaWNrID0gdGhpcy5ncm91cENob29zZWQuYmluZCh0aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyByYW5nZUNyZWRpdFNlbFxyXG4gICAgfVxyXG5cclxuICAgIHBvc3RCbGFua0NyZWF0ZSgpIHtcclxuICAgICAgICAvLyBncm91cFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBNLkZvcm1TZWxlY3QuaW5pdChncm91cFNlbCwge30pO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBNLkZvcm1TZWxlY3QuZ2V0SW5zdGFuY2UoZ3JvdXBTZWwpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaW5zdGFuY2UuZ2V0U2VsZWN0ZWRWYWx1ZXMoKSk7XHJcblxyXG4gICAgICAgIGxldCB0ZW1wVXNlciA9IHt9O1xyXG4gICAgICAgIHRlbXBVc2VyLmdyb3VwX2lkID0gdGhpcy5pbnN0YW5jZS5nZXRTZWxlY3RlZFZhbHVlcygpWzBdO1xyXG4gICAgICAgIHRlbXBVc2VyLm5hbWUgPSBmaXJzdE5hbWVTZWwudmFsdWUgKyAnICcgKyBsYXN0TmFtZVNlbC52YWx1ZTtcclxuICAgICAgICB0ZW1wVXNlci5zdHJlZXQgPSBzdHJlZXRTZWwudmFsdWU7XHJcbiAgICAgICAgdGVtcFVzZXIuemlwX2NvZGUgPSB6aXBDb2RlU2VsLnZhbHVlO1xyXG4gICAgICAgIHRlbXBVc2VyLmNpdHkgPSBjaXR5U2VsLnZhbHVlO1xyXG4gICAgICAgIHRlbXBVc2VyLnBob25lID0gcGhvbmVTZWwudmFsdWU7XHJcbiAgICAgICAgdGVtcFVzZXIuY3JlZGl0cyA9IHJhbmdlQ3JlZGl0U2VsLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuZW1pdCgnZmV0Y2hQb3N0UmVxdWVzdCcsIHRlbXBVc2VyLCBkb2N1bWVudCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGVtcFVzZXIpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9zdEJsYW5rO1xyXG5cclxuLy8gZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpO1xyXG4vLyAvL2luc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmluaXQoZWxlbSk7XHJcbi8vIGluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmdldEluc3RhbmNlKGVsZW0pO1xyXG4vLyBpbnN0YW5jZS5nZXRTZWxlY3RlZFZhbHVlcygpO1xyXG5cclxuLy8gZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpO1xyXG4vLyBpbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5nZXRJbnN0YW5jZShlbGVtKTtcclxuLy8gaW5zdGFuY2UuZ2V0U2VsZWN0ZWRWYWx1ZXMoKTsiLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50JztcclxuXHJcbmNvbnN0IG1vZGFsRWRpdFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKTtcclxuXHJcbmNvbnN0IGJsYW5rR3JvdXBzU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJyNncm91cHMnKTtcclxuXHJcbmNvbnN0IGdyb3VwU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpO1xyXG5cclxuY29uc3QgZmlyc3ROYW1lU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJyNmaXJzdF9uYW1lJyk7XHJcbmNvbnN0IGxhc3ROYW1lU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJyNsYXN0X25hbWUnKTtcclxuY29uc3Qgc3RyZWV0U2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJyNzdHJlZXQnKTtcclxuY29uc3QgemlwQ29kZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjemlwX2NvZGUnKTtcclxuY29uc3QgY2l0eVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjY2l0eScpO1xyXG5jb25zdCBwaG9uZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjcGhvbmUnKTtcclxuY29uc3QgcmFuZ2VDcmVkaXRTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI3JhbmdlX2NyZWRpdCcpO1xyXG5jb25zdCBpZENvbnRhaW5lclNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCcpO1xyXG5cclxuY29uc3QgdXBkYXRlQnV0dG9uU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJyN1cGRhdGVfYnV0dG9uJyk7XHJcblxyXG5jb25zdCBtYWluVGFibGVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykucXVlcnlTZWxlY3RvcigndGJvZHknKTtcclxuXHJcbmNsYXNzIEVkaXRCbGFuayBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIG1haW5UYWJsZVNlbC5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIHRoaXMuZGJsQ2xpY2tMaXN0ZW5lckZ1bi5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5vbignZWRpdFNlbmREYXRhJywgdGhpcy5pbml0QmxhbmsuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgICAgIE0uTW9kYWwuaW5pdChtb2RhbEVkaXRTZWwsIHt9KTtcclxuICAgICAgICB1cGRhdGVCdXR0b25TZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmVkaXRCbGFua1VwZGF0ZS5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRibENsaWNrTGlzdGVuZXJGdW4oZSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdlZGl0UmVxdWVzdERhdGEnKTtcclxuICAgICAgICB0aGlzLmVtaXQoJ2VkaXRSZXF1ZXN0RGF0YScsIGUudGFyZ2V0LnBhcmVudE5vZGUuaWQsIGRvY3VtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0QmxhbmsocGFyYW1zKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2luaXRCbGFuaycpO1xyXG4gICAgICAgIGxldCB1c2VyID0gcGFyYW1zWzBdO1xyXG4gICAgICAgIHRoaXMuZ3JvdXBzID0gcGFyYW1zWzFdO1xyXG4gICAgICAgIGxldCBjaG9vc2VkR3JvdXAgPSB0aGlzLmdyb3Vwcy5maW5kKCAoaXRlbSkgPT4gaXRlbS5ncm91cF9pZCA9PSB1c2VyLmdyb3VwX2lkICk7XHJcbiAgICAgICAgYmxhbmtHcm91cHNTZWwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgYmxhbmtHcm91cHNTZWwuaW5uZXJIVE1MICs9IGA8b3B0aW9uIHZhbHVlPVwiJHt1c2VyLmdyb3VwX2lkfVwiIGRpc2FibGVkIHNlbGVjdGVkPiR7Y2hvb3NlZEdyb3VwLm5hbWV9PC9vcHRpb24+YDtcclxuICAgICAgICB0aGlzLmdyb3Vwcy5mb3JFYWNoKCAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgKz0gYDxvcHRpb24gdmFsdWU9XCIke2l0ZW0uZ3JvdXBfaWR9XCIgaWQ9XCIke2l0ZW0uZ3JvdXBfaWR9XCI+JHtpdGVtLm5hbWV9PC9vcHRpb24+YDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ2Nob29zZWRHcm91cCcsIGNob29zZWRHcm91cCk7XHJcbiAgICAgICAgaWYgKGNob29zZWRHcm91cC5pc19hZG1pbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndHJ1ZTsnKTtcclxuICAgICAgICAgICAgcmFuZ2VDcmVkaXRTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmYWxzZScpO1xyXG4gICAgICAgICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTS5Gb3JtU2VsZWN0LmluaXQoZ3JvdXBTZWwsIHt9KTtcclxuXHJcbiAgICAgICAgaWRDb250YWluZXJTZWwuaWQgPSB1c2VyLnVzZXJfaWQ7XHJcbiAgICAgICAgbGV0IGZ1bGxuYW1lID0gdXNlci5uYW1lLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgZmlyc3ROYW1lU2VsLnZhbHVlID0gZnVsbG5hbWVbMF07XHJcbiAgICAgICAgZnVsbG5hbWUuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgIGxhc3ROYW1lU2VsLnZhbHVlID0gZnVsbG5hbWUuam9pbignICcpO1xyXG4gICAgICAgIHN0cmVldFNlbC52YWx1ZSA9IHVzZXIuc3RyZWV0O1xyXG4gICAgICAgIHppcENvZGVTZWwudmFsdWUgPSB1c2VyLnppcF9jb2RlO1xyXG4gICAgICAgIGNpdHlTZWwudmFsdWUgPSB1c2VyLmNpdHk7XHJcbiAgICAgICAgcGhvbmVTZWwudmFsdWUgPSB1c2VyLnBob25lO1xyXG4gICAgICAgIHJhbmdlQ3JlZGl0U2VsLnZhbHVlID0gdXNlci5jcmVkaXRzO1xyXG5cclxuICAgICAgICBpZiAocmFuZ2VDcmVkaXRTZWwudmFsdWUgPT0gMCkge1xyXG4gICAgICAgICAgICBmaXJzdE5hbWVTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBsYXN0TmFtZVNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHN0cmVldFNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHppcENvZGVTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBjaXR5U2VsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgcGhvbmVTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGJsYW5rR3JvdXBzU2VsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmaXJzdE5hbWVTZWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgbGFzdE5hbWVTZWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgc3RyZWV0U2VsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHppcENvZGVTZWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgY2l0eVNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBwaG9uZVNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBibGFua0dyb3Vwc1NlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNob29zZWRHcm91cC5pc19hZG1pbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndHJ1ZTsnKTtcclxuICAgICAgICAgICAgcmFuZ2VDcmVkaXRTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmYWxzZScpO1xyXG4gICAgICAgICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTS5Gb3JtU2VsZWN0LmluaXQoZ3JvdXBTZWwsIHt9KTtcclxuXHJcbiAgICAgICAgTS51cGRhdGVUZXh0RmllbGRzKCk7XHJcblxyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IE0uTW9kYWwuZ2V0SW5zdGFuY2UobW9kYWxFZGl0U2VsKTtcclxuICAgICAgICBpbnN0YW5jZS5vcGVuKCk7XHJcblxyXG4gICAgICAgIGxldCBtYXRlcmlhbEdyb3VwVWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignLnNlbGVjdC13cmFwcGVyJykucXVlcnlTZWxlY3RvcigndWwnKTtcclxuICAgICAgICBBcnJheS5mcm9tKG1hdGVyaWFsR3JvdXBVbC5jaGlsZHJlbikuZm9yRWFjaCggKGxpKSA9PiB7XHJcbiAgICAgICAgICAgIGxpLm9uY2xpY2sgPSB0aGlzLmdyb3VwQ2hvb3NlZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyB0aGlzLnVzZXJfaWQgPSBwYXJzZUZsb2F0KHVzZXIudXNlcl9pZCk7XHJcbiAgICAgICAgLy8gdGhpcy5ncm91cF9pZCA9IHBhcnNlRmxvYXQodXNlci5ncm91cF9pZCk7XHJcbiAgICAgICAgLy8gdGhpcy5uYW1lID0gdXNlci5uYW1lO1xyXG4gICAgICAgIC8vIHRoaXMuc3RyZWV0ID0gdXNlci5zdHJlZXQ7XHJcbiAgICAgICAgLy8gdGhpcy56aXBfY29kZSA9IHBhcnNlRmxvYXQodXNlci56aXBfY29kZSk7XHJcbiAgICAgICAgLy8gdGhpcy5jaXR5ID0gdXNlci5jaXR5O1xyXG4gICAgICAgIC8vIHRoaXMucGhvbmUgPSB1c2VyLnBob25lO1xyXG4gICAgICAgIC8vIHRoaXMuY3JlZGl0cyA9IHBhcnNlRmxvYXQodXNlci5jcmVkaXRzKTtcclxuICAgIH1cclxuXHJcbiAgICBlZGl0QmxhbmtVcGRhdGUoKSB7XHJcbiAgICAgICAgLy8gZ3JvdXBTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5pbml0KGdyb3VwU2VsLCB7fSk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5nZXRJbnN0YW5jZShncm91cFNlbCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5pbnN0YW5jZS5nZXRTZWxlY3RlZFZhbHVlcygpKTtcclxuXHJcbiAgICAgICAgbGV0IHRlbXBVc2VyID0ge307XHJcbiAgICAgICAgdGVtcFVzZXIudXNlcl9pZCA9IGlkQ29udGFpbmVyU2VsLmlkO1xyXG4gICAgICAgIHRlbXBVc2VyLmdyb3VwX2lkID0gdGhpcy5pbnN0YW5jZS5nZXRTZWxlY3RlZFZhbHVlcygpWzBdO1xyXG4gICAgICAgIHRlbXBVc2VyLm5hbWUgPSBmaXJzdE5hbWVTZWwudmFsdWUgKyAnICcgKyBsYXN0TmFtZVNlbC52YWx1ZTtcclxuICAgICAgICB0ZW1wVXNlci5zdHJlZXQgPSBzdHJlZXRTZWwudmFsdWU7XHJcbiAgICAgICAgdGVtcFVzZXIuemlwX2NvZGUgPSB6aXBDb2RlU2VsLnZhbHVlO1xyXG4gICAgICAgIHRlbXBVc2VyLmNpdHkgPSBjaXR5U2VsLnZhbHVlO1xyXG4gICAgICAgIHRlbXBVc2VyLnBob25lID0gcGhvbmVTZWwudmFsdWU7XHJcbiAgICAgICAgdGVtcFVzZXIuY3JlZGl0cyA9IHJhbmdlQ3JlZGl0U2VsLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuZW1pdCgnZmV0Y2hQdXRSZXF1ZXN0JywgdGVtcFVzZXIsIGRvY3VtZW50KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZW1wVXNlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ3JvdXBDaG9vc2VkKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdHUk9VUCBDSE9PU0VEJyk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5pbml0KGdyb3VwU2VsLCB7fSk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5nZXRJbnN0YW5jZShncm91cFNlbCk7XHJcbiAgICAgICAgbGV0IGdyb3VwSWQgPSB0aGlzLmluc3RhbmNlLmdldFNlbGVjdGVkVmFsdWVzKClbMF07XHJcbiAgICAgICAgY29uc29sZS5sb2coZ3JvdXBJZCk7XHJcbiAgICAgICAgaWYgKGdyb3VwSWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5ncm91cHMsICdncm91cHMnKTtcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkR3JvdXAgPSB0aGlzLmdyb3Vwcy5maW5kKCAoaXRlbSkgPT4gaXRlbS5ncm91cF9pZCA9PSBncm91cElkICk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZWwgZ3JvdXAnLCBzZWxlY3RlZEdyb3VwKVxyXG4gICAgICAgICAgICBpZiAoIHNlbGVjdGVkR3JvdXAgJiYgc2VsZWN0ZWRHcm91cC5pc19hZG1pbiApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IHRydWU7Jyk7XHJcbiAgICAgICAgICAgICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDQutC+0YHRgtGL0LvRjCwg0YHQv9Cw0LTQsNGO0YIg0LvQuNGB0LXQvdC10YDRi1xyXG4gICAgICAgIGxldCBtYXRlcmlhbEdyb3VwVWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignLnNlbGVjdC13cmFwcGVyJykucXVlcnlTZWxlY3RvcigndWwnKTtcclxuICAgICAgICBBcnJheS5mcm9tKG1hdGVyaWFsR3JvdXBVbC5jaGlsZHJlbikuZm9yRWFjaCggKGxpKSA9PiB7XHJcbiAgICAgICAgICAgIGxpLm9uY2xpY2sgPSB0aGlzLmdyb3VwQ2hvb3NlZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJhbmdlQ3JlZGl0U2VsXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBFZGl0Qmxhbms7XHJcblxyXG4vLyBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XHJcbi8vIC8vaW5zdGFuY2UgPSBNLkZvcm1TZWxlY3QuaW5pdChlbGVtKTtcclxuLy8gaW5zdGFuY2UgPSBNLkZvcm1TZWxlY3QuZ2V0SW5zdGFuY2UoZWxlbSk7XHJcbi8vIGluc3RhbmNlLmdldFNlbGVjdGVkVmFsdWVzKCk7XHJcblxyXG4vLyBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XHJcbi8vIGluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmdldEluc3RhbmNlKGVsZW0pO1xyXG4vLyBpbnN0YW5jZS5nZXRTZWxlY3RlZFZhbHVlcygpOyIsImltcG9ydCBEYXRhU3RvcmUgZnJvbSAnLi9kYXRhX3N0b3JlJztcclxuaW1wb3J0IE15V2ViU29ja2V0IGZyb20gJy4vd2ViX3NvY2tldCc7XHJcbmltcG9ydCBHcm91cHNWaWV3IGZyb20gJy4vZ3JvdXBzX3ZpZXcnO1xyXG5pbXBvcnQgVXNlcnNWaWV3IGZyb20gJy4vdXNlcnNfdmlldyc7XHJcbmltcG9ydCBQb3N0QmxhbmsgZnJvbSAnLi9wb3N0X2JsYW5rJztcclxuaW1wb3J0IEVkaXRCbGFuayBmcm9tICcuL2VkaXRfYmxhbmsnO1xyXG5cclxuY29uc29sZS5sb2coJ21haW4uanMnKTtcclxuRGF0YVN0b3JlLmJpbmRUbyhkb2N1bWVudCk7XHJcbk15V2ViU29ja2V0LmJpbmRUbyhkb2N1bWVudCk7XHJcbkdyb3Vwc1ZpZXcuYmluZFRvKGRvY3VtZW50KTtcclxuVXNlcnNWaWV3LmJpbmRUbyhkb2N1bWVudCk7XHJcblBvc3RCbGFuay5iaW5kVG8oZG9jdW1lbnQpO1xyXG5FZGl0QmxhbmsuYmluZFRvKGRvY3VtZW50KTsiXSwic291cmNlUm9vdCI6IiJ9