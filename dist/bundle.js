!function(e){var t={};function o(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);class s{constructor(e){this.element=e}on(e,t,o=this.element){o.addEventListener(e,e=>t(e.detail))}emit(e,t,o=this.element){const s=new CustomEvent(e,{detail:t});o.dispatchEvent(s)}static bindTo(e){let t=e;if("string"==typeof e&&(t=document.querySelector(e)),!(t instanceof HTMLElement||t instanceof HTMLDocument))throw new Error("cannot bound component");new this(t).init()}init(){throw new Error("Must be implemented!")}}class i{constructor(e){this.user_id=parseFloat(e.user_id),this.group_id=parseFloat(e.group_id),this.name=e.name,this.street=e.street,this.zip_code=parseFloat(e.zip_code),this.city=e.city,this.phone=e.phone,this.credits=parseFloat(e.credits)}}class n{constructor(e){this.group_id=e.group_id,this.name=e.name,this.is_admin=e.is_admin}}var r=class extends s{init(){this.users=[],this.groups=[],this.on("actionEvent",this.actionEventFun.bind(this),document),this.on("renderInit",this.renderInitFun.bind(this),document),this.on("postRequestData",this.postBlankEmit.bind(this),document),this.on("editRequestData",this.editBlankEmit.bind(this),document),this.on("fetchPostRequest",this.postUserRequest.bind(this),document),this.on("fetchPutRequest",this.putUserRequest.bind(this),document)}renderInitFun(){this.sortData(),console.log("users",this.users),console.log("groups",this.groups),setTimeout(function(){this.emit("renderGroups",this.groups,document),this.emit("renderUsers",this.users,document)}.bind(this),5)}actionEventFun(e){const t=e.action.split(":");"updated"==t[1]&&this.fetchFun(e),"removed"==t[1]&&("user"==t[0]&&this.userDelete(e.id),"group"==t[0]&&this.groupDelete(e.id))}userDelete(e){const t=this.users.find(t=>t.user_id==e),o=this.users.indexOf(t);this.users.splice(o,1),this.emit("renderInit",null,document)}groupDelete(e){const t=this.groups.find(t=>t.group_id==e),o=this.groups.indexOf(t);this.groups.splice(o,1),this.emit("renderInit",null,document)}fetchFun(e){const t=e.action.split(":"),o=e.id,s=`https://ums-honeybadger.herokuapp.com/${t[0]}/${o}`;fetch(s).then(e=>{if(console.log("response",e),200!==e.status)throw new Error;return e.json()}).then(e=>{"user"===t[0]&&this.addUser(e),"group"===t[0]&&this.addGroup(e),this.emit("renderInit",null,document)}).catch(console.log)}addUser(e){const t=this.users.find(t=>t.user_id==e.user_id);if(t){const e=this.users.indexOf(t);this.users.splice(e,1)}this.users.push(new i(e)),this.countUsersInGroups()}addGroup(e){this.groups.push(new n(e)),this.countUsersInGroups()}countUsersInGroups(){this.groups.forEach(e=>{e.amountOfUsers=this.users.reduce((t,o)=>o.group_id===e.group_id?t+1:t,0)})}putUserRequest(e){const t=`https://ums-honeybadger.herokuapp.com/user/${e.user_id}`,o=new i(e);fetch(t,{method:"put",body:JSON.stringify(o)}).then(e=>{if(console.log("response",e),200!==e.status)throw new Error}).catch(console.log)}postUserRequest(e){let t=new i(e);t.user_id=void 0,t=JSON.stringify(t),fetch("https://ums-honeybadger.herokuapp.com/user",{method:"post",body:t}).then(e=>{if(console.log("response",e),201!==e.status)throw new Error}).catch(console.log)}postBlankEmit(){this.emit("postSendData",this.groups,document)}editBlankEmit(e){const t=this.users.find(t=>t.user_id==e);this.emit("editSendData",[t,this.groups],document)}sortData(){this.users.sort((e,t)=>e.user_id-t.user_id),this.groups.sort((e,t)=>e.group_id-t.group_id)}};var d=class extends s{init(){this.socket=new WebSocket("ws://ums-honeybadger.herokuapp.com/ums"),this.socket.onmessage=this.onMessageFun.bind(this),this.socket.onopen=this.onOpenFun.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this)}onMessageFun(e){const t=JSON.parse(e.data);console.log("WEB SOCKET - ",t),t.message&&console.log("MESSAGE - ",t.message),t.action&&this.emit("actionEvent",t,document)}onOpenFun(e){console.log(e)}onError(e){console.log(e)}onClose(e){console.log(e)}};const u=document.querySelector("#slide-out").querySelector("ul"),c=document.querySelector(".page-title");var l=class extends s{init(){this.on("renderGroups",this.renderGroups.bind(this),document),window.onhashchange=(()=>{this.emit("renderInit",null,document)})}renderGroups(e){u.innerHTML="",e.forEach(e=>{let t;document.location.hash.split(/[#/]/)[1]===e.group_id?(c.innerText=e.name,t="active"):t="";const o=`<li class=${t}><a href="#${e.group_id}/">${e.name} <span class="badge" data-badge-caption="">${e.amountOfUsers}</span></a></li>`;u.innerHTML+=o})}};const a=document.querySelector(".striped").querySelector("tbody");var h=class extends s{init(){this.on("renderUsers",this.renderUsers.bind(this),document)}renderUsers(e){a.innerHTML="",e.forEach(e=>{if(document.location.hash.split(/[#\/]/).some(t=>t==e.group_id)){let t=`\n        <tr id="${e.user_id}">\n          <td>${e.name}</td>\n          <td>${e.street}</td>\n          <td>${e.zip_code}</td>\n          <td>${e.city}</td>\n          <td>${e.phone}</td>\n        </tr>\n        `;a.innerHTML+=t}})}};const m=document.querySelector(".navigation-add").querySelector("a"),p=document.querySelector("#modalAdd").querySelector("#groups"),g=document.querySelector("#modalAdd").querySelector("select"),y=document.querySelector("#modalAdd").querySelector("#first_name"),S=document.querySelector("#modalAdd").querySelector("#last_name"),q=document.querySelector("#modalAdd").querySelector("#street"),b=document.querySelector("#modalAdd").querySelector("#zip_code"),f=document.querySelector("#modalAdd").querySelector("#city"),_=document.querySelector("#modalAdd").querySelector("#phone"),v=document.querySelector("#modalAdd").querySelector("#range_credit"),E=document.querySelector("#modalAdd").querySelector("#create_button");var k=class extends s{init(){this.on("postSendData",this.initBlank.bind(this),document),m.addEventListener("click",this.postRequestData.bind(this),!1),E.addEventListener("click",this.postBlankCreate.bind(this),!1),M.Modal.init(document.querySelector("#modalAdd"),{})}initBlank(e){y.value="",S.value="",q.value="",b.value="",f.value="",_.value="",v.value="",this.groups=e,M.updateTextFields(),p.innerHTML="",p.innerHTML+='<option value="" disabled selected>Choose group</option>',e.forEach(e=>{p.innerHTML+=`<option value="${e.group_id}" id="${e.group_id}">${e.name}</option>`}),M.FormSelect.init(g,{});const t=document.querySelector("#modalAdd").querySelector(".select-wrapper").querySelector("ul");Array.from(t.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}postRequestData(){this.emit("postRequestData",null,document)}groupChoosed(){this.instance=M.FormSelect.init(g,{}),this.instance=M.FormSelect.getInstance(g);const e=this.instance.getSelectedValues()[0];if(e){const t=this.groups.find(t=>t.group_id==e);t&&t.is_admin?v.disabled=!0:v.disabled=!1}const t=document.querySelector("#modalAdd").querySelector(".select-wrapper").querySelector("ul");Array.from(t.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}postBlankCreate(){this.instance=M.FormSelect.init(g,{}),this.instance=M.FormSelect.getInstance(g);const e={};[e.group_id]=this.instance.getSelectedValues(),e.name=`${y.value} ${S.value}`,e.street=q.value,e.zip_code=b.value,e.city=f.value,e.phone=_.value,e.credits=v.value,this.emit("fetchPostRequest",e,document)}};const F=document.querySelector("#modalEdit"),w=document.querySelector("#modalEdit").querySelector("#groups"),$=document.querySelector("#modalEdit").querySelector("select"),T=document.querySelector("#modalEdit").querySelector("#first_name"),L=document.querySelector("#modalEdit").querySelector("#last_name"),A=document.querySelector("#modalEdit").querySelector("#street"),x=document.querySelector("#modalEdit").querySelector("#zip_code"),D=document.querySelector("#modalEdit").querySelector("#city"),U=document.querySelector("#modalEdit").querySelector("#phone"),C=document.querySelector("#modalEdit").querySelector("#range_credit"),I=document.querySelector("#modalEdit").querySelector(".modal-content"),O=document.querySelector("#modalEdit").querySelector("#update_button"),R=document.querySelector("main").querySelector("tbody");var B=class extends s{init(){R.addEventListener("dblclick",this.dblClickListenerFun.bind(this),!1),this.on("editSendData",this.initBlank.bind(this),document),M.Modal.init(F,{}),O.addEventListener("click",this.editBlankUpdate.bind(this),!1)}dblClickListenerFun(e){this.emit("editRequestData",e.target.parentNode.id,document)}initBlank(e){const t=e[0];this.groups=e[1];const o=this.groups.find(e=>e.group_id==t.group_id);w.innerHTML="",w.innerHTML+=`<option value="${t.group_id}" disabled selected>${o.name}</option>`,this.groups.forEach(e=>{w.innerHTML+=`<option value="${e.group_id}" id="${e.group_id}">${e.name}</option>`}),o.is_admin?C.disabled=!0:C.disabled=!1,I.id=t.user_id;const s=t.name.split(" ");T.value=s[0],s.splice(0,1),L.value=s.join(" "),A.value=t.street,x.value=t.zip_code,D.value=t.city,U.value=t.phone,C.value=t.credits,0==C.value?(T.disabled=!0,L.disabled=!0,A.disabled=!0,x.disabled=!0,D.disabled=!0,U.disabled=!0,C.disabled=!0,w.disabled=!0):(T.disabled=!1,L.disabled=!1,A.disabled=!1,x.disabled=!1,D.disabled=!1,U.disabled=!1,C.disabled=!1,w.disabled=!1),o.is_admin?C.disabled=!0:C.disabled=!1,M.FormSelect.init($,{}),M.updateTextFields(),M.Modal.getInstance(F).open();const i=document.querySelector("#modalEdit").querySelector(".select-wrapper").querySelector("ul");Array.from(i.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}editBlankUpdate(){this.instance=M.FormSelect.init($,{}),this.instance=M.FormSelect.getInstance($);const e={};e.user_id=I.id,e.group_id=this.instance.getSelectedValues()[0],e.name=`${T.value} ${L.value}`,e.street=A.value,e.zip_code=x.value,e.city=D.value,e.phone=U.value,e.credits=C.value,this.emit("fetchPutRequest",e,document)}groupChoosed(){this.instance=M.FormSelect.init($,{}),this.instance=M.FormSelect.getInstance($);const e=this.instance.getSelectedValues()[0];if(e){const t=this.groups.find(t=>t.group_id==e);t&&t.is_admin?C.disabled=!0:C.disabled=!1}const t=document.querySelector("#modalEdit").querySelector(".select-wrapper").querySelector("ul");Array.from(t.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}};r.bindTo(document),d.bindTo(document),l.bindTo(document),h.bindTo(document),k.bindTo(document),B.bindTo(document)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2pzL2RhdGFfc3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvd2ViX3NvY2tldC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9ncm91cHNfdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9qcy91c2Vyc192aWV3LmpzIiwid2VicGFjazovLy8uL2pzL3Bvc3RfYmxhbmsuanMiLCJ3ZWJwYWNrOi8vLy4vanMvZWRpdF9ibGFuay5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYWluLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDb21wb25lbnQiLCJbb2JqZWN0IE9iamVjdF0iLCJlbGVtZW50IiwidGhpcyIsImV2ZW50VHlwZSIsImNhbGxiYWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZGV0YWlsIiwiZGF0YSIsIkN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTEVsZW1lbnQiLCJIVE1MRG9jdW1lbnQiLCJFcnJvciIsImluaXQiLCJkYXRhX3N0b3JlX1VzZXJPYmoiLCJ1c2VyIiwidXNlcl9pZCIsInBhcnNlRmxvYXQiLCJncm91cF9pZCIsInN0cmVldCIsInppcF9jb2RlIiwiY2l0eSIsInBob25lIiwiY3JlZGl0cyIsImRhdGFfc3RvcmVfR3JvdXBPYmoiLCJnIiwiaXNfYWRtaW4iLCJkYXRhX3N0b3JlIiwidXNlcnMiLCJncm91cHMiLCJvbiIsImFjdGlvbkV2ZW50RnVuIiwiYmluZCIsInJlbmRlckluaXRGdW4iLCJwb3N0QmxhbmtFbWl0IiwiZWRpdEJsYW5rRW1pdCIsInBvc3RVc2VyUmVxdWVzdCIsInB1dFVzZXJSZXF1ZXN0Iiwic29ydERhdGEiLCJjb25zb2xlIiwibG9nIiwic2V0VGltZW91dCIsImVtaXQiLCJhY3Rpb24iLCJzcGxpdCIsImZldGNoRnVuIiwidXNlckRlbGV0ZSIsImlkIiwiZ3JvdXBEZWxldGUiLCJ0ZW1wIiwiZmluZCIsIml0ZW0iLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJ1cmwiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsInN0YXR1cyIsImpzb24iLCJhZGRVc2VyIiwiYWRkR3JvdXAiLCJjYXRjaCIsInB1c2giLCJjb3VudFVzZXJzSW5Hcm91cHMiLCJncm91cCIsImZvckVhY2giLCJhbW91bnRPZlVzZXJzIiwicmVkdWNlIiwiYWNjIiwiY3VyIiwib2JqIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJzb3J0IiwiYSIsImIiLCJ3ZWJfc29ja2V0Iiwic29ja2V0IiwiV2ViU29ja2V0Iiwib25tZXNzYWdlIiwib25NZXNzYWdlRnVuIiwib25vcGVuIiwib25PcGVuRnVuIiwib25lcnJvciIsIm9uRXJyb3IiLCJvbmNsb3NlIiwib25DbG9zZSIsIm1lc3NhZ2UiLCJwYXJzZSIsImUiLCJncm91cHNfdmlld19ncm91cHNVbFNlbCIsImdyb3Vwc192aWV3X3BhZ2VUaXRsZVNlbCIsImdyb3Vwc192aWV3IiwicmVuZGVyR3JvdXBzIiwid2luZG93Iiwib25oYXNoY2hhbmdlIiwiaW5uZXJIVE1MIiwiYWN0aXZlIiwibG9jYXRpb24iLCJoYXNoIiwiaW5uZXJUZXh0IiwibXlUZW1wbGF0ZSIsInVzZXJzX3ZpZXdfdXNlcnNUYWJsZUJvZHlTZWwiLCJ1c2Vyc192aWV3IiwicmVuZGVyVXNlcnMiLCJzb21lIiwicG9zdF9ibGFua19uYXZBZGRTZWwiLCJwb3N0X2JsYW5rX2JsYW5rR3JvdXBzU2VsIiwicG9zdF9ibGFua19ncm91cFNlbCIsInBvc3RfYmxhbmtfZmlyc3ROYW1lU2VsIiwicG9zdF9ibGFua19sYXN0TmFtZVNlbCIsInBvc3RfYmxhbmtfc3RyZWV0U2VsIiwicG9zdF9ibGFua196aXBDb2RlU2VsIiwicG9zdF9ibGFua19jaXR5U2VsIiwicG9zdF9ibGFua19waG9uZVNlbCIsInBvc3RfYmxhbmtfcmFuZ2VDcmVkaXRTZWwiLCJwb3N0X2JsYW5rX2NyZWF0ZUJ1dHRvblNlbCIsInBvc3RfYmxhbmsiLCJpbml0QmxhbmsiLCJwb3N0UmVxdWVzdERhdGEiLCJwb3N0QmxhbmtDcmVhdGUiLCJNIiwiTW9kYWwiLCJ1cGRhdGVUZXh0RmllbGRzIiwiRm9ybVNlbGVjdCIsIm1hdGVyaWFsR3JvdXBVbCIsIkFycmF5IiwiZnJvbSIsImNoaWxkcmVuIiwibGkiLCJvbmNsaWNrIiwiZ3JvdXBDaG9vc2VkIiwiaW5zdGFuY2UiLCJnZXRJbnN0YW5jZSIsImdyb3VwSWQiLCJnZXRTZWxlY3RlZFZhbHVlcyIsInNlbGVjdGVkR3JvdXAiLCJkaXNhYmxlZCIsInRlbXBVc2VyIiwiZWRpdF9ibGFua19tb2RhbEVkaXRTZWwiLCJlZGl0X2JsYW5rX2JsYW5rR3JvdXBzU2VsIiwiZWRpdF9ibGFua19ncm91cFNlbCIsImVkaXRfYmxhbmtfZmlyc3ROYW1lU2VsIiwiZWRpdF9ibGFua19sYXN0TmFtZVNlbCIsImVkaXRfYmxhbmtfc3RyZWV0U2VsIiwiZWRpdF9ibGFua196aXBDb2RlU2VsIiwiZWRpdF9ibGFua19jaXR5U2VsIiwiZWRpdF9ibGFua19waG9uZVNlbCIsImVkaXRfYmxhbmtfcmFuZ2VDcmVkaXRTZWwiLCJlZGl0X2JsYW5rX2lkQ29udGFpbmVyU2VsIiwiZWRpdF9ibGFua191cGRhdGVCdXR0b25TZWwiLCJlZGl0X2JsYW5rX21haW5UYWJsZVNlbCIsImVkaXRfYmxhbmsiLCJkYmxDbGlja0xpc3RlbmVyRnVuIiwiZWRpdEJsYW5rVXBkYXRlIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsInBhcmFtcyIsImNob29zZWRHcm91cCIsImZ1bGxuYW1lIiwiam9pbiIsIm9wZW4iLCJiaW5kVG8iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWpCLEdBQ0FZLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURrQixPQUFBLEtBSWpEcEIsRUFBQXFCLEVBQUEsU0FBQWxCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQW1CLFdBQ0EsV0FBMkIsT0FBQW5CLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFVLEVBQUFDLEdBQXNELE9BQUFWLE9BQUFXLFVBQUFDLGVBQUFuQixLQUFBZ0IsRUFBQUMsSUFHdER4QixFQUFBMkIsRUFBQSxHQUlBM0IsSUFBQTRCLEVBQUEsK0NDbkVBQyxFQUNBQyxZQUFBQyxHQUNBQyxLQUFBRCxVQUdBRCxHQUFBRyxFQUFBQyxFQUFBSCxFQUFB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LFVBQ0F5RSxFQUFBc0YsT0FBQS9KLFVBQ0F5RixFQUFBc0UsT0FBQS9KLFVBQ0FvRyxFQUFBMkQsT0FBQS9KLFVBQ0FrSCxFQUFBNkMsT0FBQS9KLFVBQ0FxSixFQUFBVSxPQUFBL0oiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xyXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICB9XHJcblxyXG4gIG9uKGV2ZW50VHlwZSwgY2FsbGJhY2ssIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGNiV3JhcCA9IGV2ZW50ID0+IGNhbGxiYWNrKGV2ZW50LmRldGFpbCk7XHJcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYldyYXApO1xyXG4gIH1cclxuXHJcbiAgZW1pdChldmVudFR5cGUsIGRhdGEsIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50VHlwZSwgeyBkZXRhaWw6IGRhdGEgfSk7XHJcbiAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGJpbmRUbyhzZWxlY3Rvcikge1xyXG4gICAgbGV0IGVsZW1lbnQgPSBzZWxlY3RvcjtcclxuICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxEb2N1bWVudCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3QgYm91bmQgY29tcG9uZW50Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgKG5ldyB0aGlzKGVsZW1lbnQpKS5pbml0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xyXG4gIGluaXQoKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3QgYmUgaW1wbGVtZW50ZWQhJyk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xyXG5cclxuY2xhc3MgVXNlck9iaiB7XHJcbiAgY29uc3RydWN0b3IodXNlcikge1xyXG4gICAgdGhpcy51c2VyX2lkID0gcGFyc2VGbG9hdCh1c2VyLnVzZXJfaWQpO1xyXG4gICAgdGhpcy5ncm91cF9pZCA9IHBhcnNlRmxvYXQodXNlci5ncm91cF9pZCk7XHJcbiAgICB0aGlzLm5hbWUgPSB1c2VyLm5hbWU7XHJcbiAgICB0aGlzLnN0cmVldCA9IHVzZXIuc3RyZWV0O1xyXG4gICAgdGhpcy56aXBfY29kZSA9IHBhcnNlRmxvYXQodXNlci56aXBfY29kZSk7XHJcbiAgICB0aGlzLmNpdHkgPSB1c2VyLmNpdHk7XHJcbiAgICB0aGlzLnBob25lID0gdXNlci5waG9uZTtcclxuICAgIHRoaXMuY3JlZGl0cyA9IHBhcnNlRmxvYXQodXNlci5jcmVkaXRzKTtcclxuICB9XHJcbn1cclxuXHJcbmNsYXNzIEdyb3VwT2JqIHtcclxuICBjb25zdHJ1Y3RvcihnKSB7XHJcbiAgICB0aGlzLmdyb3VwX2lkID0gZy5ncm91cF9pZDtcclxuICAgIHRoaXMubmFtZSA9IGcubmFtZTtcclxuICAgIHRoaXMuaXNfYWRtaW4gPSBnLmlzX2FkbWluO1xyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgRGF0YVN0b3JlIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMudXNlcnMgPSBbXTtcclxuICAgIHRoaXMuZ3JvdXBzID0gW107XHJcbiAgICB0aGlzLm9uKCdhY3Rpb25FdmVudCcsIHRoaXMuYWN0aW9uRXZlbnRGdW4uYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgdGhpcy5vbigncmVuZGVySW5pdCcsIHRoaXMucmVuZGVySW5pdEZ1bi5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XHJcbiAgICB0aGlzLm9uKCdwb3N0UmVxdWVzdERhdGEnLCB0aGlzLnBvc3RCbGFua0VtaXQuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgdGhpcy5vbignZWRpdFJlcXVlc3REYXRhJywgdGhpcy5lZGl0QmxhbmtFbWl0LmJpbmQodGhpcyksIGRvY3VtZW50KTtcclxuICAgIHRoaXMub24oJ2ZldGNoUG9zdFJlcXVlc3QnLCB0aGlzLnBvc3RVc2VyUmVxdWVzdC5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XHJcbiAgICB0aGlzLm9uKCdmZXRjaFB1dFJlcXVlc3QnLCB0aGlzLnB1dFVzZXJSZXF1ZXN0LmJpbmQodGhpcyksIGRvY3VtZW50KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckluaXRGdW4oKSB7XHJcbiAgICB0aGlzLnNvcnREYXRhKCk7XHJcbiAgICBjb25zb2xlLmxvZygndXNlcnMnLCB0aGlzLnVzZXJzKTtcclxuICAgIGNvbnNvbGUubG9nKCdncm91cHMnLCB0aGlzLmdyb3Vwcyk7XHJcbiAgICBmdW5jdGlvbiBmdW4oKSB7XHJcbiAgICAgIHRoaXMuZW1pdCgncmVuZGVyR3JvdXBzJywgdGhpcy5ncm91cHMsIGRvY3VtZW50KTtcclxuICAgICAgdGhpcy5lbWl0KCdyZW5kZXJVc2VycycsIHRoaXMudXNlcnMsIGRvY3VtZW50KTtcclxuICAgIH1cclxuICAgIHNldFRpbWVvdXQoZnVuLmJpbmQodGhpcyksIDUpO1xyXG4gIH1cclxuXHJcbiAgYWN0aW9uRXZlbnRGdW4oZGF0YSkge1xyXG4gICAgY29uc3QgYWN0aW9uID0gZGF0YS5hY3Rpb24uc3BsaXQoJzonKTtcclxuICAgIGlmIChhY3Rpb25bMV0gPT0gJ3VwZGF0ZWQnKSB7XHJcbiAgICAgIHRoaXMuZmV0Y2hGdW4oZGF0YSk7XHJcbiAgICB9XHJcbiAgICBpZiAoYWN0aW9uWzFdID09ICdyZW1vdmVkJykge1xyXG4gICAgICBpZiAoYWN0aW9uWzBdID09ICd1c2VyJykge1xyXG4gICAgICAgIHRoaXMudXNlckRlbGV0ZShkYXRhLmlkKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoYWN0aW9uWzBdID09ICdncm91cCcpIHtcclxuICAgICAgICB0aGlzLmdyb3VwRGVsZXRlKGRhdGEuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1c2VyRGVsZXRlKGlkKSB7XHJcbiAgICBjb25zdCB0ZW1wID0gdGhpcy51c2Vycy5maW5kKGl0ZW0gPT4gaXRlbS51c2VyX2lkID09IGlkKTtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy51c2Vycy5pbmRleE9mKHRlbXApO1xyXG4gICAgdGhpcy51c2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgdGhpcy5lbWl0KCdyZW5kZXJJbml0JywgbnVsbCwgZG9jdW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZ3JvdXBEZWxldGUoaWQpIHtcclxuICAgIGNvbnN0IHRlbXAgPSB0aGlzLmdyb3Vwcy5maW5kKGl0ZW0gPT4gaXRlbS5ncm91cF9pZCA9PSBpZCk7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZ3JvdXBzLmluZGV4T2YodGVtcCk7XHJcbiAgICB0aGlzLmdyb3Vwcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgdGhpcy5lbWl0KCdyZW5kZXJJbml0JywgbnVsbCwgZG9jdW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZmV0Y2hGdW4oZGF0YSkge1xyXG4gICAgY29uc3QgYWN0aW9uID0gZGF0YS5hY3Rpb24uc3BsaXQoJzonKTtcclxuICAgIGNvbnN0IGlkID0gZGF0YS5pZDtcclxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3Vtcy1ob25leWJhZGdlci5oZXJva3VhcHAuY29tLyR7YWN0aW9uWzBdfS8ke2lkfWA7XHJcbiAgICBmZXRjaCh1cmwpXHJcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZScsIHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoanNvbikgPT4ge1xyXG4gICAgICAgIGlmIChhY3Rpb25bMF0gPT09ICd1c2VyJykge1xyXG4gICAgICAgICAgdGhpcy5hZGRVc2VyKGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWN0aW9uWzBdID09PSAnZ3JvdXAnKSB7XHJcbiAgICAgICAgICB0aGlzLmFkZEdyb3VwKGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVtaXQoJ3JlbmRlckluaXQnLCBudWxsLCBkb2N1bWVudCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XHJcbiAgfVxyXG5cclxuICBhZGRVc2VyKHVzZXIpIHtcclxuICAgIGNvbnN0IHRlbXAgPSB0aGlzLnVzZXJzLmZpbmQoaXRlbSA9PiBpdGVtLnVzZXJfaWQgPT0gdXNlci51c2VyX2lkKTtcclxuICAgIGlmICh0ZW1wKSB7XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy51c2Vycy5pbmRleE9mKHRlbXApO1xyXG4gICAgICB0aGlzLnVzZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVzZXJzLnB1c2gobmV3IFVzZXJPYmoodXNlcikpO1xyXG4gICAgdGhpcy5jb3VudFVzZXJzSW5Hcm91cHMoKTtcclxuICB9XHJcblxyXG4gIGFkZEdyb3VwKGdyb3VwKSB7XHJcbiAgICB0aGlzLmdyb3Vwcy5wdXNoKG5ldyBHcm91cE9iaihncm91cCkpO1xyXG4gICAgdGhpcy5jb3VudFVzZXJzSW5Hcm91cHMoKTtcclxuICB9XHJcblxyXG4gIGNvdW50VXNlcnNJbkdyb3VwcygpIHtcclxuICAgIHRoaXMuZ3JvdXBzLmZvckVhY2goKGdyb3VwKSA9PiB7XHJcbiAgICAgIGdyb3VwLmFtb3VudE9mVXNlcnMgPSB0aGlzLnVzZXJzLnJlZHVjZSgoYWNjLCBjdXIpID0+IHtcclxuICAgICAgICBpZiAoY3VyLmdyb3VwX2lkID09PSBncm91cC5ncm91cF9pZCkgcmV0dXJuIGFjYyArIDE7XHJcbiAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgfSwgMCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXHJcbiAgcHV0VXNlclJlcXVlc3Qob2JqKSB7XHJcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly91bXMtaG9uZXliYWRnZXIuaGVyb2t1YXBwLmNvbS91c2VyLyR7b2JqLnVzZXJfaWR9YDtcclxuICAgIGNvbnN0IHRlbXAgPSBuZXcgVXNlck9iaihvYmopO1xyXG4gICAgZmV0Y2godXJsLCB7XHJcbiAgICAgIG1ldGhvZDogJ3B1dCcsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRlbXApLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xyXG4gIH1cclxuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcclxuICBwb3N0VXNlclJlcXVlc3Qob2JqKSB7XHJcbiAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly91bXMtaG9uZXliYWRnZXIuaGVyb2t1YXBwLmNvbS91c2VyJztcclxuICAgIGxldCB0ZW1wID0gbmV3IFVzZXJPYmoob2JqKTtcclxuICAgIHRlbXAudXNlcl9pZCA9IHVuZGVmaW5lZDtcclxuICAgIHRlbXAgPSBKU09OLnN0cmluZ2lmeSh0ZW1wKTtcclxuXHJcbiAgICBmZXRjaCh1cmwsIHtcclxuICAgICAgbWV0aG9kOiAncG9zdCcsXHJcbiAgICAgIGJvZHk6IHRlbXAsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygncmVzcG9uc2UnLCByZXNwb25zZSk7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAxKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XHJcbiAgfVxyXG5cclxuICBwb3N0QmxhbmtFbWl0KCkge1xyXG4gICAgdGhpcy5lbWl0KCdwb3N0U2VuZERhdGEnLCB0aGlzLmdyb3VwcywgZG9jdW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZWRpdEJsYW5rRW1pdChpZCkge1xyXG4gICAgY29uc3QgdXNlciA9IHRoaXMudXNlcnMuZmluZChpdGVtID0+IGl0ZW0udXNlcl9pZCA9PSBpZCk7XHJcbiAgICB0aGlzLmVtaXQoJ2VkaXRTZW5kRGF0YScsIFt1c2VyLCB0aGlzLmdyb3Vwc10sIGRvY3VtZW50KTtcclxuICB9XHJcblxyXG4gIHNvcnREYXRhKCkge1xyXG4gICAgdGhpcy51c2Vycy5zb3J0KChhLCBiKSA9PiBhLnVzZXJfaWQgLSBiLnVzZXJfaWQpO1xyXG4gICAgdGhpcy5ncm91cHMuc29ydCgoYSwgYikgPT4gYS5ncm91cF9pZCAtIGIuZ3JvdXBfaWQpO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IERhdGFTdG9yZTtcclxuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudCc7XHJcblxyXG5jbGFzcyBNeVdlYlNvY2tldCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCgnd3M6Ly91bXMtaG9uZXliYWRnZXIuaGVyb2t1YXBwLmNvbS91bXMnKTtcclxuICAgIHRoaXMuc29ja2V0Lm9ubWVzc2FnZSA9IHRoaXMub25NZXNzYWdlRnVuLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnNvY2tldC5vbm9wZW4gPSB0aGlzLm9uT3BlbkZ1bi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5zb2NrZXQub25lcnJvciA9IHRoaXMub25FcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IHRoaXMub25DbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb25NZXNzYWdlRnVuKG1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKG1lc3NhZ2UuZGF0YSk7XHJcbiAgICBjb25zb2xlLmxvZygnV0VCIFNPQ0tFVCAtICcsIGRhdGEpO1xyXG4gICAgaWYgKGRhdGEubWVzc2FnZSkge1xyXG4gICAgICBjb25zb2xlLmxvZygnTUVTU0FHRSAtICcsIGRhdGEubWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YS5hY3Rpb24pIHtcclxuICAgICAgdGhpcy5lbWl0KCdhY3Rpb25FdmVudCcsIGRhdGEsIGRvY3VtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXHJcbiAgb25PcGVuRnVuKGUpIHtcclxuICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gIH1cclxuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcclxuICBvbkVycm9yKGUpIHtcclxuICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gIH1cclxuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcclxuICBvbkNsb3NlKG0pIHtcclxuICAgIGNvbnNvbGUubG9nKG0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTXlXZWJTb2NrZXQ7XHJcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xyXG5cclxuY29uc3QgZ3JvdXBzVWxTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2xpZGUtb3V0JykucXVlcnlTZWxlY3RvcigndWwnKTtcclxuY29uc3QgcGFnZVRpdGxlU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UtdGl0bGUnKTtcclxuXHJcbmNsYXNzIEdyb3Vwc1ZpZXcgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5vbigncmVuZGVyR3JvdXBzJywgdGhpcy5yZW5kZXJHcm91cHMuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgd2luZG93Lm9uaGFzaGNoYW5nZSA9ICgpID0+IHsgdGhpcy5lbWl0KCdyZW5kZXJJbml0JywgbnVsbCwgZG9jdW1lbnQpOyB9O1xyXG4gIH1cclxuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcclxuICByZW5kZXJHcm91cHMoZ3JvdXBzKSB7XHJcbiAgICBncm91cHNVbFNlbC5pbm5lckhUTUwgPSAnJztcclxuICAgIGdyb3Vwcy5mb3JFYWNoKChncm91cCkgPT4ge1xyXG4gICAgICBsZXQgYWN0aXZlO1xyXG4gICAgICBjb25zdCBoYXNoID0gZG9jdW1lbnQubG9jYXRpb24uaGFzaC5zcGxpdCgvWyMvXS8pWzFdO1xyXG4gICAgICAvLyBpZiAoaGFzaC5zb21lKGl0ZW0gPT4gaXRlbSA9PT0gZ3JvdXAuZ3JvdXBfaWQpKSB7XHJcbiAgICAgIGlmIChoYXNoID09PSBncm91cC5ncm91cF9pZCkge1xyXG4gICAgICAgIHBhZ2VUaXRsZVNlbC5pbm5lclRleHQgPSBncm91cC5uYW1lO1xyXG4gICAgICAgIGFjdGl2ZSA9ICdhY3RpdmUnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFjdGl2ZSA9ICcnO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG15VGVtcGxhdGUgPSBgPGxpIGNsYXNzPSR7YWN0aXZlfT48YSBocmVmPVwiIyR7Z3JvdXAuZ3JvdXBfaWR9L1wiPiR7Z3JvdXAubmFtZX0gPHNwYW4gY2xhc3M9XCJiYWRnZVwiIGRhdGEtYmFkZ2UtY2FwdGlvbj1cIlwiPiR7Z3JvdXAuYW1vdW50T2ZVc2Vyc308L3NwYW4+PC9hPjwvbGk+YDtcclxuICAgICAgZ3JvdXBzVWxTZWwuaW5uZXJIVE1MICs9IG15VGVtcGxhdGU7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHcm91cHNWaWV3O1xyXG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50JztcclxuXHJcbmNvbnN0IHVzZXJzVGFibGVCb2R5U2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0cmlwZWQnKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xyXG5cclxuY2xhc3MgVXNlcnNWaWV3IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMub24oJ3JlbmRlclVzZXJzJywgdGhpcy5yZW5kZXJVc2Vycy5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XHJcbiAgfVxyXG5cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xyXG4gIHJlbmRlclVzZXJzKHVzZXJzKSB7XHJcbiAgICB1c2Vyc1RhYmxlQm9keVNlbC5pbm5lckhUTUwgPSAnJztcclxuICAgIHVzZXJzLmZvckVhY2goICh1c2VyKSA9PiB7XHJcbiAgICAgIGxldCBoYXNoID0gZG9jdW1lbnQubG9jYXRpb24uaGFzaC5zcGxpdCgvWyNcXC9dLyk7XHJcbiAgICAgIGlmIChoYXNoLnNvbWUoIChpdGVtKSA9PiBpdGVtID09IHVzZXIuZ3JvdXBfaWQpKSB7XHJcbiAgICAgICAgbGV0IG15VGVtcGxhdGUgPSBgXHJcbiAgICAgICAgPHRyIGlkPVwiJHt1c2VyLnVzZXJfaWR9XCI+XHJcbiAgICAgICAgICA8dGQ+JHt1c2VyLm5hbWV9PC90ZD5cclxuICAgICAgICAgIDx0ZD4ke3VzZXIuc3RyZWV0fTwvdGQ+XHJcbiAgICAgICAgICA8dGQ+JHt1c2VyLnppcF9jb2RlfTwvdGQ+XHJcbiAgICAgICAgICA8dGQ+JHt1c2VyLmNpdHl9PC90ZD5cclxuICAgICAgICAgIDx0ZD4ke3VzZXIucGhvbmV9PC90ZD5cclxuICAgICAgICA8L3RyPlxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgdXNlcnNUYWJsZUJvZHlTZWwuaW5uZXJIVE1MICs9IG15VGVtcGxhdGU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJzVmlldzsiLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50JztcclxuXHJcbmNvbnN0IG5hdkFkZFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLWFkZCcpLnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcclxuY29uc3QgYmxhbmtHcm91cHNTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCcjZ3JvdXBzJyk7XHJcblxyXG5jb25zdCBncm91cFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpO1xyXG5cclxuY29uc3QgZmlyc3ROYW1lU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI2ZpcnN0X25hbWUnKTtcclxuY29uc3QgbGFzdE5hbWVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCcjbGFzdF9uYW1lJyk7XHJcbmNvbnN0IHN0cmVldFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNzdHJlZXQnKTtcclxuY29uc3QgemlwQ29kZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyN6aXBfY29kZScpO1xyXG5jb25zdCBjaXR5U2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI2NpdHknKTtcclxuY29uc3QgcGhvbmVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCcjcGhvbmUnKTtcclxuY29uc3QgcmFuZ2VDcmVkaXRTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCcjcmFuZ2VfY3JlZGl0Jyk7XHJcblxyXG5jb25zdCBjcmVhdGVCdXR0b25TZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCcjY3JlYXRlX2J1dHRvbicpO1xyXG5cclxuY2xhc3MgUG9zdEJsYW5rIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5vbigncG9zdFNlbmREYXRhJywgdGhpcy5pbml0QmxhbmsuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgbmF2QWRkU2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5wb3N0UmVxdWVzdERhdGEuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgY3JlYXRlQnV0dG9uU2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5wb3N0QmxhbmtDcmVhdGUuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgTS5Nb2RhbC5pbml0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLCB7fSk7XHJcbiAgfVxyXG5cclxuICBpbml0QmxhbmsoZ3JvdXBzKSB7XHJcbiAgICBmaXJzdE5hbWVTZWwudmFsdWUgPSAnJztcclxuICAgIGxhc3ROYW1lU2VsLnZhbHVlID0gJyc7XHJcbiAgICBzdHJlZXRTZWwudmFsdWUgPSAnJztcclxuICAgIHppcENvZGVTZWwudmFsdWUgPSAnJztcclxuICAgIGNpdHlTZWwudmFsdWUgPSAnJztcclxuICAgIHBob25lU2VsLnZhbHVlID0gJyc7XHJcbiAgICByYW5nZUNyZWRpdFNlbC52YWx1ZSA9ICcnO1xyXG4gICAgdGhpcy5ncm91cHMgPSBncm91cHM7XHJcbiAgICBNLnVwZGF0ZVRleHRGaWVsZHMoKTtcclxuXHJcbiAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgPSAnJztcclxuICAgIGJsYW5rR3JvdXBzU2VsLmlubmVySFRNTCArPSAnPG9wdGlvbiB2YWx1ZT1cIlwiIGRpc2FibGVkIHNlbGVjdGVkPkNob29zZSBncm91cDwvb3B0aW9uPic7XHJcbiAgICBncm91cHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgKz0gYDxvcHRpb24gdmFsdWU9XCIke2l0ZW0uZ3JvdXBfaWR9XCIgaWQ9XCIke2l0ZW0uZ3JvdXBfaWR9XCI+JHtpdGVtLm5hbWV9PC9vcHRpb24+YDtcclxuICAgIH0pO1xyXG4gICAgTS5Gb3JtU2VsZWN0LmluaXQoZ3JvdXBTZWwsIHt9KTtcclxuXHJcbiAgICBjb25zdCBtYXRlcmlhbEdyb3VwVWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LXdyYXBwZXInKS5xdWVyeVNlbGVjdG9yKCd1bCcpO1xyXG4gICAgQXJyYXkuZnJvbShtYXRlcmlhbEdyb3VwVWwuY2hpbGRyZW4pLmZvckVhY2goKGxpKSA9PiB7XHJcbiAgICAgIGxpLm9uY2xpY2sgPSB0aGlzLmdyb3VwQ2hvb3NlZC5iaW5kKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgcG9zdFJlcXVlc3REYXRhKCkge1xyXG4gICAgdGhpcy5lbWl0KCdwb3N0UmVxdWVzdERhdGEnLCBudWxsLCBkb2N1bWVudCk7XHJcbiAgfVxyXG5cclxuICBncm91cENob29zZWQoKSB7XHJcbiAgICB0aGlzLmluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmluaXQoZ3JvdXBTZWwsIHt9KTtcclxuICAgIHRoaXMuaW5zdGFuY2UgPSBNLkZvcm1TZWxlY3QuZ2V0SW5zdGFuY2UoZ3JvdXBTZWwpO1xyXG4gICAgY29uc3QgZ3JvdXBJZCA9IHRoaXMuaW5zdGFuY2UuZ2V0U2VsZWN0ZWRWYWx1ZXMoKVswXTtcclxuICAgIGlmIChncm91cElkKSB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkR3JvdXAgPSB0aGlzLmdyb3Vwcy5maW5kKGl0ZW0gPT4gaXRlbS5ncm91cF9pZCA9PSBncm91cElkKTtcclxuICAgICAgaWYgKHNlbGVjdGVkR3JvdXAgJiYgc2VsZWN0ZWRHcm91cC5pc19hZG1pbikge1xyXG4gICAgICAgIHJhbmdlQ3JlZGl0U2VsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWF0ZXJpYWxHcm91cFVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignLnNlbGVjdC13cmFwcGVyJykucXVlcnlTZWxlY3RvcigndWwnKTtcclxuICAgIEFycmF5LmZyb20obWF0ZXJpYWxHcm91cFVsLmNoaWxkcmVuKS5mb3JFYWNoKChsaSkgPT4ge1xyXG4gICAgICBsaS5vbmNsaWNrID0gdGhpcy5ncm91cENob29zZWQuYmluZCh0aGlzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcG9zdEJsYW5rQ3JlYXRlKCkge1xyXG4gICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5pbml0KGdyb3VwU2VsLCB7fSk7XHJcbiAgICB0aGlzLmluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmdldEluc3RhbmNlKGdyb3VwU2VsKTtcclxuXHJcbiAgICBjb25zdCB0ZW1wVXNlciA9IHt9O1xyXG4gICAgW3RlbXBVc2VyLmdyb3VwX2lkXSA9IHRoaXMuaW5zdGFuY2UuZ2V0U2VsZWN0ZWRWYWx1ZXMoKTtcclxuICAgIC8vIHRlbXBVc2VyLmdyb3VwX2lkID0gdGhpcy5pbnN0YW5jZS5nZXRTZWxlY3RlZFZhbHVlcygpWzBdO1xyXG4gICAgdGVtcFVzZXIubmFtZSA9IGAke2ZpcnN0TmFtZVNlbC52YWx1ZX0gJHtsYXN0TmFtZVNlbC52YWx1ZX1gO1xyXG4gICAgdGVtcFVzZXIuc3RyZWV0ID0gc3RyZWV0U2VsLnZhbHVlO1xyXG4gICAgdGVtcFVzZXIuemlwX2NvZGUgPSB6aXBDb2RlU2VsLnZhbHVlO1xyXG4gICAgdGVtcFVzZXIuY2l0eSA9IGNpdHlTZWwudmFsdWU7XHJcbiAgICB0ZW1wVXNlci5waG9uZSA9IHBob25lU2VsLnZhbHVlO1xyXG4gICAgdGVtcFVzZXIuY3JlZGl0cyA9IHJhbmdlQ3JlZGl0U2VsLnZhbHVlO1xyXG4gICAgdGhpcy5lbWl0KCdmZXRjaFBvc3RSZXF1ZXN0JywgdGVtcFVzZXIsIGRvY3VtZW50KTtcclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3N0Qmxhbms7IiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudCc7XHJcblxyXG5jb25zdCBtb2RhbEVkaXRTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0Jyk7XHJcblxyXG5jb25zdCBibGFua0dyb3Vwc1NlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjZ3JvdXBzJyk7XHJcblxyXG5jb25zdCBncm91cFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKTtcclxuXHJcbmNvbnN0IGZpcnN0TmFtZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjZmlyc3RfbmFtZScpO1xyXG5jb25zdCBsYXN0TmFtZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjbGFzdF9uYW1lJyk7XHJcbmNvbnN0IHN0cmVldFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjc3RyZWV0Jyk7XHJcbmNvbnN0IHppcENvZGVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI3ppcF9jb2RlJyk7XHJcbmNvbnN0IGNpdHlTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI2NpdHknKTtcclxuY29uc3QgcGhvbmVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI3Bob25lJyk7XHJcbmNvbnN0IHJhbmdlQ3JlZGl0U2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJyNyYW5nZV9jcmVkaXQnKTtcclxuY29uc3QgaWRDb250YWluZXJTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQnKTtcclxuXHJcbmNvbnN0IHVwZGF0ZUJ1dHRvblNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjdXBkYXRlX2J1dHRvbicpO1xyXG5cclxuY29uc3QgbWFpblRhYmxlU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XHJcblxyXG5jbGFzcyBFZGl0QmxhbmsgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIGluaXQoKSB7XHJcbiAgICBtYWluVGFibGVTZWwuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCB0aGlzLmRibENsaWNrTGlzdGVuZXJGdW4uYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgdGhpcy5vbignZWRpdFNlbmREYXRhJywgdGhpcy5pbml0QmxhbmsuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgTS5Nb2RhbC5pbml0KG1vZGFsRWRpdFNlbCwge30pO1xyXG4gICAgdXBkYXRlQnV0dG9uU2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5lZGl0QmxhbmtVcGRhdGUuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgZGJsQ2xpY2tMaXN0ZW5lckZ1bihlKSB7XHJcbiAgICB0aGlzLmVtaXQoJ2VkaXRSZXF1ZXN0RGF0YScsIGUudGFyZ2V0LnBhcmVudE5vZGUuaWQsIGRvY3VtZW50KTtcclxuICB9XHJcblxyXG4gIGluaXRCbGFuayhwYXJhbXMpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBwYXJhbXNbMF07XHJcbiAgICB0aGlzLmdyb3VwcyA9IHBhcmFtc1sxXTtcclxuICAgIC8vIGNvbnN0IHVzZXI7XHJcbiAgICAvLyBbdXNlciwgdGhpcy5ncm91cHNdID0gcGFyYW1zO1xyXG4gICAgY29uc3QgY2hvb3NlZEdyb3VwID0gdGhpcy5ncm91cHMuZmluZChpdGVtID0+IGl0ZW0uZ3JvdXBfaWQgPT0gdXNlci5ncm91cF9pZCk7XHJcbiAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgPSAnJztcclxuICAgIGJsYW5rR3JvdXBzU2VsLmlubmVySFRNTCArPSBgPG9wdGlvbiB2YWx1ZT1cIiR7dXNlci5ncm91cF9pZH1cIiBkaXNhYmxlZCBzZWxlY3RlZD4ke2Nob29zZWRHcm91cC5uYW1lfTwvb3B0aW9uPmA7XHJcbiAgICB0aGlzLmdyb3Vwcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGJsYW5rR3JvdXBzU2VsLmlubmVySFRNTCArPSBgPG9wdGlvbiB2YWx1ZT1cIiR7aXRlbS5ncm91cF9pZH1cIiBpZD1cIiR7aXRlbS5ncm91cF9pZH1cIj4ke2l0ZW0ubmFtZX08L29wdGlvbj5gO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGNob29zZWRHcm91cC5pc19hZG1pbikge1xyXG4gICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlkQ29udGFpbmVyU2VsLmlkID0gdXNlci51c2VyX2lkO1xyXG4gICAgY29uc3QgZnVsbG5hbWUgPSB1c2VyLm5hbWUuc3BsaXQoJyAnKTtcclxuICAgIGZpcnN0TmFtZVNlbC52YWx1ZSA9IGZ1bGxuYW1lWzBdO1xyXG4gICAgZnVsbG5hbWUuc3BsaWNlKDAsIDEpO1xyXG4gICAgbGFzdE5hbWVTZWwudmFsdWUgPSBmdWxsbmFtZS5qb2luKCcgJyk7XHJcbiAgICBzdHJlZXRTZWwudmFsdWUgPSB1c2VyLnN0cmVldDtcclxuICAgIHppcENvZGVTZWwudmFsdWUgPSB1c2VyLnppcF9jb2RlO1xyXG4gICAgY2l0eVNlbC52YWx1ZSA9IHVzZXIuY2l0eTtcclxuICAgIHBob25lU2VsLnZhbHVlID0gdXNlci5waG9uZTtcclxuICAgIHJhbmdlQ3JlZGl0U2VsLnZhbHVlID0gdXNlci5jcmVkaXRzO1xyXG5cclxuICAgIGlmIChyYW5nZUNyZWRpdFNlbC52YWx1ZSA9PSAwKSB7XHJcbiAgICAgIGZpcnN0TmFtZVNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIGxhc3ROYW1lU2VsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgc3RyZWV0U2VsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgemlwQ29kZVNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIGNpdHlTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICBwaG9uZVNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIHJhbmdlQ3JlZGl0U2VsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgYmxhbmtHcm91cHNTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZmlyc3ROYW1lU2VsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGxhc3ROYW1lU2VsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIHN0cmVldFNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICB6aXBDb2RlU2VsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGNpdHlTZWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgcGhvbmVTZWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgcmFuZ2VDcmVkaXRTZWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgYmxhbmtHcm91cHNTZWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2hvb3NlZEdyb3VwLmlzX2FkbWluKSB7XHJcbiAgICAgIHJhbmdlQ3JlZGl0U2VsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJhbmdlQ3JlZGl0U2VsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgTS5Gb3JtU2VsZWN0LmluaXQoZ3JvdXBTZWwsIHt9KTtcclxuXHJcbiAgICBNLnVwZGF0ZVRleHRGaWVsZHMoKTtcclxuXHJcbiAgICBjb25zdCBpbnN0YW5jZSA9IE0uTW9kYWwuZ2V0SW5zdGFuY2UobW9kYWxFZGl0U2VsKTtcclxuICAgIGluc3RhbmNlLm9wZW4oKTtcclxuXHJcbiAgICBjb25zdCBtYXRlcmlhbEdyb3VwVWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignLnNlbGVjdC13cmFwcGVyJykucXVlcnlTZWxlY3RvcigndWwnKTtcclxuICAgIEFycmF5LmZyb20obWF0ZXJpYWxHcm91cFVsLmNoaWxkcmVuKS5mb3JFYWNoKChsaSkgPT4ge1xyXG4gICAgICBsaS5vbmNsaWNrID0gdGhpcy5ncm91cENob29zZWQuYmluZCh0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIGVkaXRCbGFua1VwZGF0ZSgpIHtcclxuICAgIHRoaXMuaW5zdGFuY2UgPSBNLkZvcm1TZWxlY3QuaW5pdChncm91cFNlbCwge30pO1xyXG4gICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5nZXRJbnN0YW5jZShncm91cFNlbCk7XHJcblxyXG4gICAgY29uc3QgdGVtcFVzZXIgPSB7fTtcclxuICAgIHRlbXBVc2VyLnVzZXJfaWQgPSBpZENvbnRhaW5lclNlbC5pZDtcclxuICAgIHRlbXBVc2VyLmdyb3VwX2lkID0gdGhpcy5pbnN0YW5jZS5nZXRTZWxlY3RlZFZhbHVlcygpWzBdO1xyXG4gICAgdGVtcFVzZXIubmFtZSA9IGAke2ZpcnN0TmFtZVNlbC52YWx1ZX0gJHtsYXN0TmFtZVNlbC52YWx1ZX1gO1xyXG4gICAgdGVtcFVzZXIuc3RyZWV0ID0gc3RyZWV0U2VsLnZhbHVlO1xyXG4gICAgdGVtcFVzZXIuemlwX2NvZGUgPSB6aXBDb2RlU2VsLnZhbHVlO1xyXG4gICAgdGVtcFVzZXIuY2l0eSA9IGNpdHlTZWwudmFsdWU7XHJcbiAgICB0ZW1wVXNlci5waG9uZSA9IHBob25lU2VsLnZhbHVlO1xyXG4gICAgdGVtcFVzZXIuY3JlZGl0cyA9IHJhbmdlQ3JlZGl0U2VsLnZhbHVlO1xyXG4gICAgdGhpcy5lbWl0KCdmZXRjaFB1dFJlcXVlc3QnLCB0ZW1wVXNlciwgZG9jdW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZ3JvdXBDaG9vc2VkKCkge1xyXG4gICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5pbml0KGdyb3VwU2VsLCB7fSk7XHJcbiAgICB0aGlzLmluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmdldEluc3RhbmNlKGdyb3VwU2VsKTtcclxuICAgIGNvbnN0IGdyb3VwSWQgPSB0aGlzLmluc3RhbmNlLmdldFNlbGVjdGVkVmFsdWVzKClbMF07XHJcbiAgICBpZiAoZ3JvdXBJZCkge1xyXG4gICAgICBjb25zdCBzZWxlY3RlZEdyb3VwID0gdGhpcy5ncm91cHMuZmluZChpdGVtID0+IGl0ZW0uZ3JvdXBfaWQgPT0gZ3JvdXBJZCk7XHJcbiAgICAgIGlmIChzZWxlY3RlZEdyb3VwICYmIHNlbGVjdGVkR3JvdXAuaXNfYWRtaW4pIHtcclxuICAgICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmFuZ2VDcmVkaXRTZWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1hdGVyaWFsR3JvdXBVbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LXdyYXBwZXInKS5xdWVyeVNlbGVjdG9yKCd1bCcpO1xyXG4gICAgQXJyYXkuZnJvbShtYXRlcmlhbEdyb3VwVWwuY2hpbGRyZW4pLmZvckVhY2goKGxpKSA9PiB7XHJcbiAgICAgIGxpLm9uY2xpY2sgPSB0aGlzLmdyb3VwQ2hvb3NlZC5iaW5kKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRWRpdEJsYW5rOyIsImltcG9ydCBEYXRhU3RvcmUgZnJvbSAnLi9kYXRhX3N0b3JlJztcclxuaW1wb3J0IE15V2ViU29ja2V0IGZyb20gJy4vd2ViX3NvY2tldCc7XHJcbmltcG9ydCBHcm91cHNWaWV3IGZyb20gJy4vZ3JvdXBzX3ZpZXcnO1xyXG5pbXBvcnQgVXNlcnNWaWV3IGZyb20gJy4vdXNlcnNfdmlldyc7XHJcbmltcG9ydCBQb3N0QmxhbmsgZnJvbSAnLi9wb3N0X2JsYW5rJztcclxuaW1wb3J0IEVkaXRCbGFuayBmcm9tICcuL2VkaXRfYmxhbmsnO1xyXG5cclxuRGF0YVN0b3JlLmJpbmRUbyhkb2N1bWVudCk7XHJcbk15V2ViU29ja2V0LmJpbmRUbyhkb2N1bWVudCk7XHJcbkdyb3Vwc1ZpZXcuYmluZFRvKGRvY3VtZW50KTtcclxuVXNlcnNWaWV3LmJpbmRUbyhkb2N1bWVudCk7XHJcblBvc3RCbGFuay5iaW5kVG8oZG9jdW1lbnQpO1xyXG5FZGl0QmxhbmsuYmluZFRvKGRvY3VtZW50KTsiXSwic291cmNlUm9vdCI6IiJ9