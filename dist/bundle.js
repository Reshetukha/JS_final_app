!function(e){var t={};function s(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);class o{constructor(e){this.element=e}on(e,t,s=this.element){s.addEventListener(e,e=>t(e.detail))}emit(e,t,s=this.element){const o=new CustomEvent(e,{detail:t});s.dispatchEvent(o)}static bindTo(e){let t=e;if("string"==typeof e&&(t=document.querySelector(e)),!(t instanceof HTMLElement||t instanceof HTMLDocument))throw new Error("cannot bound component");new this(t).init()}init(){throw new Error("Must be implemented!")}}class n{constructor(e){this.user_id=parseFloat(e.user_id),this.group_id=parseFloat(e.group_id),this.name=e.name,this.street=e.street,this.zip_code=parseFloat(e.zip_code),this.city=e.city,this.phone=e.phone,this.credits=parseFloat(e.credits)}}class i{constructor(e){this.group_id=e.group_id,this.name=e.name,this.is_admin=e.is_admin}}var r=class extends o{init(){this.users=[],this.groups=[],this.on("actionEvent",this.actionEventFun.bind(this),document),this.on("renderInit",this.renderInitFun.bind(this),document),this.on("postRequestData",this.postBlankEmit.bind(this),document),this.on("editRequestData",this.editBlankEmit.bind(this),document),this.on("fetchPostRequest",this.postUserRequest.bind(this),document),this.on("fetchPutRequest",this.putUserRequest.bind(this),document)}renderInitFun(){this.sortData(),console.log("users",this.users),console.log("groups",this.groups),setTimeout(function(){this.emit("renderGroups",this.groups,document),this.emit("renderUsers",this.users,document)}.bind(this),5)}actionEventFun(e){const t=e.action.split(":");"updated"===t[1]&&this.fetchFun(e),"removed"===t[1]&&("user"===t[0]&&this.userDelete(e.id),"group"===t[0]&&this.groupDelete(e.id))}userDelete(e){const t=this.users.find(t=>t.user_id===e),s=this.users.indexOf(t);this.users.splice(s,1),this.emit("renderInit",null,document)}groupDelete(e){const t=this.groups.find(t=>t.group_id===e),s=this.groups.indexOf(t);this.groups.splice(s,1),this.emit("renderInit",null,document)}fetchFun(e){console.log("data",e);const t=e.action.split(":"),s=e.id;console.log("action",t),console.log("id",s);const o=`https://ums-honeybadger.herokuapp.com/${t[0]}/${s}`;fetch(o).then(e=>{if(console.log("response",e),200!==e.status)throw new Error;return e.json()}).then(e=>{"user"===t[0]&&this.addUser(e),"group"===t[0]&&this.addGroup(e),this.emit("renderInit",null,document)}).catch(console.log)}addUser(e){const t=this.users.find(t=>t.user_id===e.user_id);if(t){const e=this.users.indexOf(t);this.users.splice(e,1)}this.users.push(new n(e)),this.countUsersInGroups()}addGroup(e){this.groups.push(new i(e)),this.countUsersInGroups()}countUsersInGroups(){this.groups.forEach(e=>{e.amountOfUsers=this.users.reduce((t,s)=>s.group_id===e.group_id?t+1:t,0)})}putUserRequest(e){const t=`https://ums-honeybadger.herokuapp.com/user/${e.user_id}`,s=new n(e);fetch(t,{method:"put",body:JSON.stringify(s)}).then(e=>{if(console.log("response",e),200!==e.status)throw new Error}).catch(console.log)}postUserRequest(e){const t=new n(e);t.user_id=void 0,fetch("https://ums-honeybadger.herokuapp.com/user",{method:"post",body:JSON.stringify(t)}).then(e=>{if(console.log("response",e),201!==e.status)throw new Error}).catch(console.log)}postBlankEmit(){this.emit("postSendData",this.groups,document)}editBlankEmit(e){const t=this.users.find(t=>t.user_id==e);this.emit("editSendData",[t,this.groups],document)}sortData(){this.users.sort((e,t)=>e.user_id-t.user_id),this.groups.sort((e,t)=>e.group_id-t.group_id)}};var d=class extends o{init(){this.socket=new WebSocket("ws://ums-honeybadger.herokuapp.com/ums"),this.socket.onmessage=this.onMessageFun.bind(this),this.socket.onopen=this.onOpenFun.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this)}onMessageFun(e){const t=JSON.parse(e.data);console.log("WEB SOCKET - ",t),t.message&&console.log("MESSAGE - ",t.message),t.action&&this.emit("actionEvent",t,document)}onOpenFun(e){console.log(e)}onError(e){console.log(e)}onClose(e){console.log(e)}};const u=document.querySelector("#slide-out").querySelector("ul"),c=document.querySelector(".page-title");var a=class extends o{init(){this.on("renderGroups",this.renderGroups.bind(this),document),window.onhashchange=(()=>{this.emit("renderInit",null,document)})}renderGroups(e){u.innerHTML="",e.forEach(e=>{let t;document.location.hash.split(/[#/]/)[1]===e.group_id?(c.innerText=e.name,t="active"):t="";const s=`<li class=${t}><a href="#${e.group_id}/">${e.name} <span class="badge" data-badge-caption="">${e.amountOfUsers}</span></a></li>`;u.innerHTML+=s})}};const l=document.querySelector(".striped").querySelector("tbody");var h=class extends o{init(){this.on("renderUsers",this.renderUsers.bind(this),document)}renderUsers(e){l.innerHTML="",e.forEach(e=>{if(document.location.hash.split(/[#\/]/).some(t=>t==e.group_id)){let t=`\n        <tr id="${e.user_id}">\n          <td>${e.name}</td>\n          <td>${e.street}</td>\n          <td>${e.zip_code}</td>\n          <td>${e.city}</td>\n          <td>${e.phone}</td>\n        </tr>\n        `;l.innerHTML+=t}})}};const m=document.querySelector(".navigation-add").querySelector("a"),p=document.querySelector("#modalAdd").querySelector("#groups"),g=document.querySelector("#modalAdd").querySelector("select"),y=document.querySelector("#modalAdd").querySelector("#first_name"),S=document.querySelector("#modalAdd").querySelector("#last_name"),b=document.querySelector("#modalAdd").querySelector("#street"),q=document.querySelector("#modalAdd").querySelector("#zip_code"),v=document.querySelector("#modalAdd").querySelector("#city"),_=document.querySelector("#modalAdd").querySelector("#phone"),f=document.querySelector("#modalAdd").querySelector("#range_credit"),E=document.querySelector("#modalAdd").querySelector("#create_button");var k=class extends o{init(){this.on("postSendData",this.initBlank.bind(this),document),m.addEventListener("click",this.postRequestData.bind(this),!1),E.addEventListener("click",this.postBlankCreate.bind(this),!1),M.Modal.init(document.querySelector("#modalAdd"),{})}initBlank(e){y.value="",S.value="",b.value="",q.value="",v.value="",_.value="",f.value="",this.groups=e,M.updateTextFields(),p.innerHTML="",p.innerHTML+='<option value="" disabled selected>Choose group</option>',e.forEach(e=>{p.innerHTML+=`<option value="${e.group_id}" id="${e.group_id}">${e.name}</option>`}),M.FormSelect.init(g,{})}postRequestData(){this.emit("postRequestData",null,document)}postBlankCreate(){this.instance=M.FormSelect.init(g,{}),this.instance=M.FormSelect.getInstance(g);const e={};[e.group_id]=this.instance.getSelectedValues(),e.name=`${y.value} ${S.value}`,e.street=b.value,e.zip_code=q.value,e.city=v.value,e.phone=_.value,e.credits=f.value,this.emit("fetchPostRequest",e,document)}};const F=document.querySelector("#modalEdit"),$=document.querySelector("#modalEdit").querySelector("#groups"),T=document.querySelector("#modalEdit").querySelector("select"),w=document.querySelector("#modalEdit").querySelector("#first_name"),L=document.querySelector("#modalEdit").querySelector("#last_name"),x=document.querySelector("#modalEdit").querySelector("#street"),D=document.querySelector("#modalEdit").querySelector("#zip_code"),U=document.querySelector("#modalEdit").querySelector("#city"),O=document.querySelector("#modalEdit").querySelector("#phone"),R=document.querySelector("#modalEdit").querySelector("#range_credit"),B=document.querySelector("#modalEdit").querySelector(".modal-content"),I=document.querySelector("#modalEdit").querySelector("#update_button"),A=document.querySelector("main").querySelector("tbody");var H=class extends o{init(){A.addEventListener("dblclick",this.dblClickListenerFun.bind(this),!1),this.on("editSendData",this.initBlank.bind(this),document),M.Modal.init(F,{}),I.addEventListener("click",this.editBlankUpdate.bind(this),!1)}dblClickListenerFun(e){this.emit("editRequestData",e.target.parentNode.id,document)}initBlank(e){[this.user,this.groups]=e;const t=this.groups.find(e=>e.group_id===this.user.group_id);$.innerHTML="",$.innerHTML+=`<option value="${this.user.group_id}" disabled selected>${t.name}</option>`,this.groups.forEach(e=>{$.innerHTML+=`<option value="${e.group_id}" id="${e.group_id}">${e.name}</option>`}),B.id=this.user.user_id;const s=this.user.name.split(" ");[w.value]=s,s.splice(0,1),L.value=s.join(" "),x.value=this.user.street,D.value=this.user.zip_code,U.value=this.user.city,O.value=this.user.phone,R.value=this.user.credits,0===parseFloat(R.value)?(w.disabled=!0,L.disabled=!0,x.disabled=!0,D.disabled=!0,U.disabled=!0,O.disabled=!0,R.disabled=!0,$.disabled=!0):(w.disabled=!1,L.disabled=!1,x.disabled=!1,D.disabled=!1,U.disabled=!1,O.disabled=!1,R.disabled=!1,$.disabled=!1),t.is_admin&&(R.disabled=!0),M.FormSelect.init(T,{}),M.updateTextFields(),M.Modal.getInstance(F).open()}editBlankUpdate(){this.instance=M.FormSelect.init(T,{}),this.instance=M.FormSelect.getInstance(T);const e={};e.user_id=B.id,[e.group_id]=this.instance.getSelectedValues(),e.name=`${w.value} ${L.value}`,e.street=x.value,e.zip_code=D.value,e.city=U.value,e.phone=O.value,e.credits=R.value,this.emit("fetchPutRequest",e,document)}};r.bindTo(document),d.bindTo(document),a.bindTo(document),h.bindTo(document),k.bindTo(document),H.bindTo(document)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2pzL2RhdGFfc3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvd2ViX3NvY2tldC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9ncm91cHNfdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9qcy91c2Vyc192aWV3LmpzIiwid2VicGFjazovLy8uL2pzL3Bvc3RfYmxhbmsuanMiLCJ3ZWJwYWNrOi8vLy4vanMvZWRpdF9ibGFuay5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYWluLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDb21wb25lbnQiLCJbb2JqZWN0IE9iamVjdF0iLCJlbGVtZW50IiwidGhpcyIsImV2ZW50VHlwZSIsImNhbGxiYWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZGV0YWlsIiwiZGF0YSIsIkN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTEVsZW1lbnQiLCJIVE1MRG9jdW1lbnQiLCJFcnJvciIsImluaXQiLCJkYXRhX3N0b3JlX1VzZXJPYmoiLCJ1c2VyIiwidXNlcl9pZCIsInBhcnNlRmxvYXQiLCJncm91cF9pZCIsInN0cmVldCIsInppcF9jb2RlIiwiY2l0eSIsInBob25lIiwiY3JlZGl0cyIsImRhdGFfc3RvcmVfR3JvdXBPYmoiLCJnIiwiaXNfYWRtaW4iLCJkYXRhX3N0b3JlIiwidXNlcnMiLCJncm91cHMiLCJvbiIsImFjdGlvbkV2ZW50RnVuIiwiYmluZCIsInJlbmRlckluaXRGdW4iLCJwb3N0QmxhbmtFbWl0IiwiZWRpdEJsYW5rRW1pdCIsInBvc3RVc2VyUmVxdWVzdCIsInB1dFVzZXJSZXF1ZXN0Iiwic29ydERhdGEiLCJjb25zb2xlIiwibG9nIiwic2V0VGltZW91dCIsImVtaXQiLCJhY3Rpb24iLCJzcGxpdCIsImZldGNoRnVuIiwidXNlckRlbGV0ZSIsImlkIiwiZ3JvdXBEZWxldGUiLCJ0ZW1wIiwiZmluZCIsIml0ZW0iLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJ1cmwiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsInN0YXR1cyIsImpzb24iLCJhZGRVc2VyIiwiYWRkR3JvdXAiLCJjYXRjaCIsInB1c2giLCJjb3VudFVzZXJzSW5Hcm91cHMiLCJncm91cCIsImZvckVhY2giLCJhbW91bnRPZlVzZXJzIiwicmVkdWNlIiwiYWNjIiwiY3VyIiwib2JqIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJzb3J0IiwiYSIsImIiLCJ3ZWJfc29ja2V0Iiwic29ja2V0IiwiV2ViU29ja2V0Iiwib25tZXNzYWdlIiwib25NZXNzYWdlRnVuIiwib25vcGVuIiwib25PcGVuRnVuIiwib25lcnJvciIsIm9uRXJyb3IiLCJvbmNsb3NlIiwib25DbG9zZSIsIm1lc3NhZ2UiLCJwYXJzZSIsImUiLCJncm91cHNfdmlld19ncm91cHNVbFNlbCIsImdyb3Vwc192aWV3X3BhZ2VUaXRsZVNlbCIsImdyb3Vwc192aWV3IiwicmVuZGVyR3JvdXBzIiwid2luZG93Iiwib25oYXNoY2hhbmdlIiwiaW5uZXJIVE1MIiwiYWN0aXZlIiwibG9jYXRpb24iLCJoYXNoIiwiaW5uZXJUZXh0IiwibXlUZW1wbGF0ZSIsInVzZXJzX3ZpZXdfdXNlcnNUYWJsZUJvZHlTZWwiLCJ1c2Vyc192aWV3IiwicmVuZGVyVXNlcnMiLCJzb21lIiwicG9zdF9ibGFua19uYXZBZGRTZWwiLCJwb3N0X2JsYW5rX2JsYW5rR3JvdXBzU2VsIiwicG9zdF9ibGFua19ncm91cFNlbCIsInBvc3RfYmxhbmtfZmlyc3ROYW1lU2VsIiwicG9zdF9ibGFua19sYXN0TmFtZVNlbCIsInBvc3RfYmxhbmtfc3RyZWV0U2VsIiwicG9zdF9ibGFua196aXBDb2RlU2VsIiwicG9zdF9ibGFua19jaXR5U2VsIiwicG9zdF9ibGFua19waG9uZVNlbCIsInBvc3RfYmxhbmtfcmFuZ2VDcmVkaXRTZWwiLCJwb3N0X2JsYW5rX2NyZWF0ZUJ1dHRvblNlbCIsInBvc3RfYmxhbmsiLCJpbml0QmxhbmsiLCJwb3N0UmVxdWVzdERhdGEiLCJwb3N0QmxhbmtDcmVhdGUiLCJNIiwiTW9kYWwiLCJ1cGRhdGVUZXh0RmllbGRzIiwiRm9ybVNlbGVjdCIsImluc3RhbmNlIiwiZ2V0SW5zdGFuY2UiLCJ0ZW1wVXNlciIsImdldFNlbGVjdGVkVmFsdWVzIiwiZWRpdF9ibGFua19tb2RhbEVkaXRTZWwiLCJlZGl0X2JsYW5rX2JsYW5rR3JvdXBzU2VsIiwiZWRpdF9ibGFua19ncm91cFNlbCIsImVkaXRfYmxhbmtfZmlyc3ROYW1lU2VsIiwiZWRpdF9ibGFua19sYXN0TmFtZVNlbCIsImVkaXRfYmxhbmtfc3RyZWV0U2VsIiwiZWRpdF9ibGFua196aXBDb2RlU2VsIiwiZWRpdF9ibGFua19jaXR5U2VsIiwiZWRpdF9ibGFua19waG9uZVNlbCIsImVkaXRfYmxhbmtfcmFuZ2VDcmVkaXRTZWwiLCJlZGl0X2JsYW5rX2lkQ29udGFpbmVyU2VsIiwiZWRpdF9ibGFua191cGRhdGVCdXR0b25TZWwiLCJlZGl0X2JsYW5rX21haW5UYWJsZVNlbCIsImVkaXRfYmxhbmsiLCJkYmxDbGlja0xpc3RlbmVyRnVuIiwiZWRpdEJsYW5rVXBkYXRlIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsInBhcmFtcyIsImNob29zZWRHcm91cCIsImZ1bGxuYW1lIiwiam9pbiIsImRpc2FibGVkIiwib3BlbiIsImJpbmRUbyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBakIsR0FDQVksT0FBQUMsZUFBQWIsRUFBQSxjQUFpRGtCLE9BQUEsS0FJakRwQixFQUFBcUIsRUFBQSxTQUFBbEIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBbUIsV0FDQSxXQUEyQixPQUFBbkIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVUsRUFBQUMsR0FBc0QsT0FBQVYsT0FBQVcsVUFBQUMsZUFBQW5CLEtBQUFnQixFQUFBQyxJQUd0RHhCLEVBQUEyQixFQUFBLEdBSUEzQixJQUFBNEIsRUFBQSwrQ0NuRUFDLEVBQ0FDLFlBQUFDLEdBQ0FDLEtBQUFELFVBR0FELEdBQUFHLEVBQUFDLEVBQUFILEVBQUFDLEtBQUFELFNBRUFBLEVBQUFJLGlCQUFBRixFQURBRyxHQUFBRixFQUFBRSxFQUFBQyxTQUlBUCxLQUFBRyxFQUFBSyxFQUFBUCxFQUFBQyxLQUFBRCxTQUNBLE1BQUFLLEVB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Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICB9XG5cbiAgb24oZXZlbnRUeXBlLCBjYWxsYmFjaywgZWxlbWVudCA9IHRoaXMuZWxlbWVudCkge1xuICAgIGNvbnN0IGNiV3JhcCA9IGV2ZW50ID0+IGNhbGxiYWNrKGV2ZW50LmRldGFpbCk7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2JXcmFwKTtcbiAgfVxuXG4gIGVtaXQoZXZlbnRUeXBlLCBkYXRhLCBlbGVtZW50ID0gdGhpcy5lbGVtZW50KSB7XG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoZXZlbnRUeXBlLCB7IGRldGFpbDogZGF0YSB9KTtcbiAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9XG5cbiAgc3RhdGljIGJpbmRUbyhzZWxlY3Rvcikge1xuICAgIGxldCBlbGVtZW50ID0gc2VsZWN0b3I7XG4gICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxEb2N1bWVudCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY2Fubm90IGJvdW5kIGNvbXBvbmVudCcpO1xuICAgIH1cblxuICAgIChuZXcgdGhpcyhlbGVtZW50KSkuaW5pdCgpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgaW5pdCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3QgYmUgaW1wbGVtZW50ZWQhJyk7XG4gIH1cbn1cbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xuXG5jbGFzcyBVc2VyT2JqIHtcbiAgY29uc3RydWN0b3IodXNlcikge1xuICAgIHRoaXMudXNlcl9pZCA9IHBhcnNlRmxvYXQodXNlci51c2VyX2lkKTtcbiAgICB0aGlzLmdyb3VwX2lkID0gcGFyc2VGbG9hdCh1c2VyLmdyb3VwX2lkKTtcbiAgICB0aGlzLm5hbWUgPSB1c2VyLm5hbWU7XG4gICAgdGhpcy5zdHJlZXQgPSB1c2VyLnN0cmVldDtcbiAgICB0aGlzLnppcF9jb2RlID0gcGFyc2VGbG9hdCh1c2VyLnppcF9jb2RlKTtcbiAgICB0aGlzLmNpdHkgPSB1c2VyLmNpdHk7XG4gICAgdGhpcy5waG9uZSA9IHVzZXIucGhvbmU7XG4gICAgdGhpcy5jcmVkaXRzID0gcGFyc2VGbG9hdCh1c2VyLmNyZWRpdHMpO1xuICB9XG59XG5cbmNsYXNzIEdyb3VwT2JqIHtcbiAgY29uc3RydWN0b3IoZykge1xuICAgIHRoaXMuZ3JvdXBfaWQgPSBnLmdyb3VwX2lkO1xuICAgIHRoaXMubmFtZSA9IGcubmFtZTtcbiAgICB0aGlzLmlzX2FkbWluID0gZy5pc19hZG1pbjtcbiAgfVxufVxuXG5jbGFzcyBEYXRhU3RvcmUgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gIGluaXQoKSB7XG4gICAgdGhpcy51c2VycyA9IFtdO1xuICAgIHRoaXMuZ3JvdXBzID0gW107XG4gICAgdGhpcy5vbignYWN0aW9uRXZlbnQnLCB0aGlzLmFjdGlvbkV2ZW50RnVuLmJpbmQodGhpcyksIGRvY3VtZW50KTtcbiAgICB0aGlzLm9uKCdyZW5kZXJJbml0JywgdGhpcy5yZW5kZXJJbml0RnVuLmJpbmQodGhpcyksIGRvY3VtZW50KTtcbiAgICB0aGlzLm9uKCdwb3N0UmVxdWVzdERhdGEnLCB0aGlzLnBvc3RCbGFua0VtaXQuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xuICAgIHRoaXMub24oJ2VkaXRSZXF1ZXN0RGF0YScsIHRoaXMuZWRpdEJsYW5rRW1pdC5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XG4gICAgdGhpcy5vbignZmV0Y2hQb3N0UmVxdWVzdCcsIHRoaXMucG9zdFVzZXJSZXF1ZXN0LmJpbmQodGhpcyksIGRvY3VtZW50KTtcbiAgICB0aGlzLm9uKCdmZXRjaFB1dFJlcXVlc3QnLCB0aGlzLnB1dFVzZXJSZXF1ZXN0LmJpbmQodGhpcyksIGRvY3VtZW50KTtcbiAgfVxuXG4gIHJlbmRlckluaXRGdW4oKSB7XG4gICAgdGhpcy5zb3J0RGF0YSgpO1xuICAgIGNvbnNvbGUubG9nKCd1c2VycycsIHRoaXMudXNlcnMpO1xuICAgIGNvbnNvbGUubG9nKCdncm91cHMnLCB0aGlzLmdyb3Vwcyk7XG4gICAgZnVuY3Rpb24gZnVuKCkge1xuICAgICAgdGhpcy5lbWl0KCdyZW5kZXJHcm91cHMnLCB0aGlzLmdyb3VwcywgZG9jdW1lbnQpO1xuICAgICAgdGhpcy5lbWl0KCdyZW5kZXJVc2VycycsIHRoaXMudXNlcnMsIGRvY3VtZW50KTtcbiAgICB9XG4gICAgc2V0VGltZW91dChmdW4uYmluZCh0aGlzKSwgNSk7XG4gIH1cblxuICBhY3Rpb25FdmVudEZ1bihkYXRhKSB7XG4gICAgY29uc3QgYWN0aW9uID0gZGF0YS5hY3Rpb24uc3BsaXQoJzonKTtcbiAgICBpZiAoYWN0aW9uWzFdID09PSAndXBkYXRlZCcpIHtcbiAgICAgIHRoaXMuZmV0Y2hGdW4oZGF0YSk7XG4gICAgfVxuICAgIGlmIChhY3Rpb25bMV0gPT09ICdyZW1vdmVkJykge1xuICAgICAgaWYgKGFjdGlvblswXSA9PT0gJ3VzZXInKSB7XG4gICAgICAgIHRoaXMudXNlckRlbGV0ZShkYXRhLmlkKTtcbiAgICAgIH1cbiAgICAgIGlmIChhY3Rpb25bMF0gPT09ICdncm91cCcpIHtcbiAgICAgICAgdGhpcy5ncm91cERlbGV0ZShkYXRhLmlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB1c2VyRGVsZXRlKGlkKSB7XG4gICAgY29uc3QgdGVtcCA9IHRoaXMudXNlcnMuZmluZChpdGVtID0+IGl0ZW0udXNlcl9pZCA9PT0gaWQpO1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy51c2Vycy5pbmRleE9mKHRlbXApO1xuICAgIHRoaXMudXNlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLmVtaXQoJ3JlbmRlckluaXQnLCBudWxsLCBkb2N1bWVudCk7XG4gIH1cblxuICBncm91cERlbGV0ZShpZCkge1xuICAgIGNvbnN0IHRlbXAgPSB0aGlzLmdyb3Vwcy5maW5kKGl0ZW0gPT4gaXRlbS5ncm91cF9pZCA9PT0gaWQpO1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5ncm91cHMuaW5kZXhPZih0ZW1wKTtcbiAgICB0aGlzLmdyb3Vwcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMuZW1pdCgncmVuZGVySW5pdCcsIG51bGwsIGRvY3VtZW50KTtcbiAgfVxuXG4gIGZldGNoRnVuKGRhdGEpIHtcbiAgICBjb25zb2xlLmxvZygnZGF0YScsIGRhdGEpO1xuICAgIGNvbnN0IGFjdGlvbiA9IGRhdGEuYWN0aW9uLnNwbGl0KCc6Jyk7XG4gICAgY29uc3QgaWQgPSBkYXRhLmlkO1xuICAgIC8vIGNvbnN0IHsgYWN0aW9uLCBpZCB9ID0gZGF0YTtcbiAgICAvLyBhY3Rpb24gPSBhY3Rpb24uc3BsaXQoJzonKTtcbiAgICBjb25zb2xlLmxvZygnYWN0aW9uJywgYWN0aW9uKTtcbiAgICBjb25zb2xlLmxvZygnaWQnLCBpZCk7XG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vdW1zLWhvbmV5YmFkZ2VyLmhlcm9rdWFwcC5jb20vJHthY3Rpb25bMF19LyR7aWR9YDtcbiAgICBmZXRjaCh1cmwpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICAgIGlmIChhY3Rpb25bMF0gPT09ICd1c2VyJykge1xuICAgICAgICAgIHRoaXMuYWRkVXNlcihqc29uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWN0aW9uWzBdID09PSAnZ3JvdXAnKSB7XG4gICAgICAgICAgdGhpcy5hZGRHcm91cChqc29uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJ3JlbmRlckluaXQnLCBudWxsLCBkb2N1bWVudCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNvbnNvbGUubG9nKTtcbiAgfVxuXG4gIGFkZFVzZXIodXNlcikge1xuICAgIGNvbnN0IHRlbXAgPSB0aGlzLnVzZXJzLmZpbmQoaXRlbSA9PiBpdGVtLnVzZXJfaWQgPT09IHVzZXIudXNlcl9pZCk7XG4gICAgaWYgKHRlbXApIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy51c2Vycy5pbmRleE9mKHRlbXApO1xuICAgICAgdGhpcy51c2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICB0aGlzLnVzZXJzLnB1c2gobmV3IFVzZXJPYmoodXNlcikpO1xuICAgIHRoaXMuY291bnRVc2Vyc0luR3JvdXBzKCk7XG4gIH1cblxuICBhZGRHcm91cChncm91cCkge1xuICAgIHRoaXMuZ3JvdXBzLnB1c2gobmV3IEdyb3VwT2JqKGdyb3VwKSk7XG4gICAgdGhpcy5jb3VudFVzZXJzSW5Hcm91cHMoKTtcbiAgfVxuXG4gIGNvdW50VXNlcnNJbkdyb3VwcygpIHtcbiAgICB0aGlzLmdyb3Vwcy5mb3JFYWNoKChncm91cCkgPT4ge1xuICAgICAgZ3JvdXAuYW1vdW50T2ZVc2VycyA9IHRoaXMudXNlcnMucmVkdWNlKChhY2MsIGN1cikgPT4ge1xuICAgICAgICBpZiAoY3VyLmdyb3VwX2lkID09PSBncm91cC5ncm91cF9pZCkgcmV0dXJuIGFjYyArIDE7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LCAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gIHB1dFVzZXJSZXF1ZXN0KG9iaikge1xuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3Vtcy1ob25leWJhZGdlci5oZXJva3VhcHAuY29tL3VzZXIvJHtvYmoudXNlcl9pZH1gO1xuICAgIGNvbnN0IHRlbXAgPSBuZXcgVXNlck9iaihvYmopO1xuICAgIGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiAncHV0JyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRlbXApLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBwb3N0VXNlclJlcXVlc3Qob2JqKSB7XG4gICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vdW1zLWhvbmV5YmFkZ2VyLmhlcm9rdWFwcC5jb20vdXNlcic7XG4gICAgY29uc3QgdGVtcCA9IG5ldyBVc2VyT2JqKG9iaik7XG4gICAgdGVtcC51c2VyX2lkID0gdW5kZWZpbmVkO1xuXG4gICAgZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRlbXApLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XG4gIH1cblxuICBwb3N0QmxhbmtFbWl0KCkge1xuICAgIHRoaXMuZW1pdCgncG9zdFNlbmREYXRhJywgdGhpcy5ncm91cHMsIGRvY3VtZW50KTtcbiAgfVxuXG4gIGVkaXRCbGFua0VtaXQoaWQpIHtcbiAgICBjb25zdCB1c2VyID0gdGhpcy51c2Vycy5maW5kKGl0ZW0gPT4gaXRlbS51c2VyX2lkID09IGlkKTtcbiAgICB0aGlzLmVtaXQoJ2VkaXRTZW5kRGF0YScsIFt1c2VyLCB0aGlzLmdyb3Vwc10sIGRvY3VtZW50KTtcbiAgfVxuXG4gIHNvcnREYXRhKCkge1xuICAgIHRoaXMudXNlcnMuc29ydCgoYSwgYikgPT4gYS51c2VyX2lkIC0gYi51c2VyX2lkKTtcbiAgICB0aGlzLmdyb3Vwcy5zb3J0KChhLCBiKSA9PiBhLmdyb3VwX2lkIC0gYi5ncm91cF9pZCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0YVN0b3JlO1xuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudCc7XG5cbmNsYXNzIE15V2ViU29ja2V0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgaW5pdCgpIHtcbiAgICB0aGlzLnNvY2tldCA9IG5ldyBXZWJTb2NrZXQoJ3dzOi8vdW1zLWhvbmV5YmFkZ2VyLmhlcm9rdWFwcC5jb20vdW1zJyk7XG4gICAgdGhpcy5zb2NrZXQub25tZXNzYWdlID0gdGhpcy5vbk1lc3NhZ2VGdW4uYmluZCh0aGlzKTtcbiAgICB0aGlzLnNvY2tldC5vbm9wZW4gPSB0aGlzLm9uT3BlbkZ1bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc29ja2V0Lm9uZXJyb3IgPSB0aGlzLm9uRXJyb3IuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNvY2tldC5vbmNsb3NlID0gdGhpcy5vbkNsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvbk1lc3NhZ2VGdW4obWVzc2FnZSkge1xuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKG1lc3NhZ2UuZGF0YSk7XG4gICAgY29uc29sZS5sb2coJ1dFQiBTT0NLRVQgLSAnLCBkYXRhKTtcbiAgICBpZiAoZGF0YS5tZXNzYWdlKSB7XG4gICAgICBjb25zb2xlLmxvZygnTUVTU0FHRSAtICcsIGRhdGEubWVzc2FnZSk7XG4gICAgfVxuICAgIGlmIChkYXRhLmFjdGlvbikge1xuICAgICAgdGhpcy5lbWl0KCdhY3Rpb25FdmVudCcsIGRhdGEsIGRvY3VtZW50KTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBvbk9wZW5GdW4oZSkge1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgb25FcnJvcihlKSB7XG4gICAgY29uc29sZS5sb2coZSk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBvbkNsb3NlKG0pIHtcbiAgICBjb25zb2xlLmxvZyhtKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNeVdlYlNvY2tldDtcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xuXG5jb25zdCBncm91cHNVbFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzbGlkZS1vdXQnKS5xdWVyeVNlbGVjdG9yKCd1bCcpO1xuY29uc3QgcGFnZVRpdGxlU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UtdGl0bGUnKTtcblxuY2xhc3MgR3JvdXBzVmlldyBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLm9uKCdyZW5kZXJHcm91cHMnLCB0aGlzLnJlbmRlckdyb3Vwcy5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XG4gICAgd2luZG93Lm9uaGFzaGNoYW5nZSA9ICgpID0+IHsgdGhpcy5lbWl0KCdyZW5kZXJJbml0JywgbnVsbCwgZG9jdW1lbnQpOyB9O1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgcmVuZGVyR3JvdXBzKGdyb3Vwcykge1xuICAgIGdyb3Vwc1VsU2VsLmlubmVySFRNTCA9ICcnO1xuICAgIGdyb3Vwcy5mb3JFYWNoKChncm91cCkgPT4ge1xuICAgICAgbGV0IGFjdGl2ZTtcbiAgICAgIGNvbnN0IGhhc2ggPSBkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnNwbGl0KC9bIy9dLylbMV07XG4gICAgICAvLyBpZiAoaGFzaC5zb21lKGl0ZW0gPT4gaXRlbSA9PT0gZ3JvdXAuZ3JvdXBfaWQpKSB7XG4gICAgICBpZiAoaGFzaCA9PT0gZ3JvdXAuZ3JvdXBfaWQpIHtcbiAgICAgICAgcGFnZVRpdGxlU2VsLmlubmVyVGV4dCA9IGdyb3VwLm5hbWU7XG4gICAgICAgIGFjdGl2ZSA9ICdhY3RpdmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZlID0gJyc7XG4gICAgICB9XG4gICAgICBjb25zdCBteVRlbXBsYXRlID0gYDxsaSBjbGFzcz0ke2FjdGl2ZX0+PGEgaHJlZj1cIiMke2dyb3VwLmdyb3VwX2lkfS9cIj4ke2dyb3VwLm5hbWV9IDxzcGFuIGNsYXNzPVwiYmFkZ2VcIiBkYXRhLWJhZGdlLWNhcHRpb249XCJcIj4ke2dyb3VwLmFtb3VudE9mVXNlcnN9PC9zcGFuPjwvYT48L2xpPmA7XG4gICAgICBncm91cHNVbFNlbC5pbm5lckhUTUwgKz0gbXlUZW1wbGF0ZTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEdyb3Vwc1ZpZXc7XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50JztcblxuY29uc3QgdXNlcnNUYWJsZUJvZHlTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RyaXBlZCcpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG5cbmNsYXNzIFVzZXJzVmlldyBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLm9uKCdyZW5kZXJVc2VycycsIHRoaXMucmVuZGVyVXNlcnMuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgcmVuZGVyVXNlcnModXNlcnMpIHtcbiAgICB1c2Vyc1RhYmxlQm9keVNlbC5pbm5lckhUTUwgPSAnJztcbiAgICB1c2Vycy5mb3JFYWNoKCAodXNlcikgPT4ge1xuICAgICAgbGV0IGhhc2ggPSBkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnNwbGl0KC9bI1xcL10vKTtcbiAgICAgIGlmIChoYXNoLnNvbWUoIChpdGVtKSA9PiBpdGVtID09IHVzZXIuZ3JvdXBfaWQpKSB7XG4gICAgICAgIGxldCBteVRlbXBsYXRlID0gYFxuICAgICAgICA8dHIgaWQ9XCIke3VzZXIudXNlcl9pZH1cIj5cbiAgICAgICAgICA8dGQ+JHt1c2VyLm5hbWV9PC90ZD5cbiAgICAgICAgICA8dGQ+JHt1c2VyLnN0cmVldH08L3RkPlxuICAgICAgICAgIDx0ZD4ke3VzZXIuemlwX2NvZGV9PC90ZD5cbiAgICAgICAgICA8dGQ+JHt1c2VyLmNpdHl9PC90ZD5cbiAgICAgICAgICA8dGQ+JHt1c2VyLnBob25lfTwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICAgIGA7XG4gICAgICAgIHVzZXJzVGFibGVCb2R5U2VsLmlubmVySFRNTCArPSBteVRlbXBsYXRlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlcnNWaWV3OyIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xuXG5jb25zdCBuYXZBZGRTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi1hZGQnKS5xdWVyeVNlbGVjdG9yKCdhJyk7XG5jb25zdCBibGFua0dyb3Vwc1NlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNncm91cHMnKTtcblxuY29uc3QgZ3JvdXBTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKTtcblxuY29uc3QgZmlyc3ROYW1lU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI2ZpcnN0X25hbWUnKTtcbmNvbnN0IGxhc3ROYW1lU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI2xhc3RfbmFtZScpO1xuY29uc3Qgc3RyZWV0U2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI3N0cmVldCcpO1xuY29uc3QgemlwQ29kZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyN6aXBfY29kZScpO1xuY29uc3QgY2l0eVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNjaXR5Jyk7XG5jb25zdCBwaG9uZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNwaG9uZScpO1xuY29uc3QgcmFuZ2VDcmVkaXRTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCcjcmFuZ2VfY3JlZGl0Jyk7XG5cbmNvbnN0IGNyZWF0ZUJ1dHRvblNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNjcmVhdGVfYnV0dG9uJyk7XG5cbmNsYXNzIFBvc3RCbGFuayBleHRlbmRzIENvbXBvbmVudCB7XG4gIGluaXQoKSB7XG4gICAgdGhpcy5vbigncG9zdFNlbmREYXRhJywgdGhpcy5pbml0QmxhbmsuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xuICAgIG5hdkFkZFNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucG9zdFJlcXVlc3REYXRhLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICBjcmVhdGVCdXR0b25TZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnBvc3RCbGFua0NyZWF0ZS5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gICAgTS5Nb2RhbC5pbml0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLCB7fSk7XG4gIH1cblxuICBpbml0QmxhbmsoZ3JvdXBzKSB7XG4gICAgZmlyc3ROYW1lU2VsLnZhbHVlID0gJyc7XG4gICAgbGFzdE5hbWVTZWwudmFsdWUgPSAnJztcbiAgICBzdHJlZXRTZWwudmFsdWUgPSAnJztcbiAgICB6aXBDb2RlU2VsLnZhbHVlID0gJyc7XG4gICAgY2l0eVNlbC52YWx1ZSA9ICcnO1xuICAgIHBob25lU2VsLnZhbHVlID0gJyc7XG4gICAgcmFuZ2VDcmVkaXRTZWwudmFsdWUgPSAnJztcbiAgICB0aGlzLmdyb3VwcyA9IGdyb3VwcztcbiAgICBNLnVwZGF0ZVRleHRGaWVsZHMoKTtcblxuICAgIGJsYW5rR3JvdXBzU2VsLmlubmVySFRNTCA9ICcnO1xuICAgIGJsYW5rR3JvdXBzU2VsLmlubmVySFRNTCArPSAnPG9wdGlvbiB2YWx1ZT1cIlwiIGRpc2FibGVkIHNlbGVjdGVkPkNob29zZSBncm91cDwvb3B0aW9uPic7XG4gICAgZ3JvdXBzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGJsYW5rR3JvdXBzU2VsLmlubmVySFRNTCArPSBgPG9wdGlvbiB2YWx1ZT1cIiR7aXRlbS5ncm91cF9pZH1cIiBpZD1cIiR7aXRlbS5ncm91cF9pZH1cIj4ke2l0ZW0ubmFtZX08L29wdGlvbj5gO1xuICAgIH0pO1xuICAgIE0uRm9ybVNlbGVjdC5pbml0KGdyb3VwU2VsLCB7fSk7XG4gIH1cblxuICBwb3N0UmVxdWVzdERhdGEoKSB7XG4gICAgdGhpcy5lbWl0KCdwb3N0UmVxdWVzdERhdGEnLCBudWxsLCBkb2N1bWVudCk7XG4gIH1cblxuICBwb3N0QmxhbmtDcmVhdGUoKSB7XG4gICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5pbml0KGdyb3VwU2VsLCB7fSk7XG4gICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5nZXRJbnN0YW5jZShncm91cFNlbCk7XG5cbiAgICBjb25zdCB0ZW1wVXNlciA9IHt9O1xuICAgIFt0ZW1wVXNlci5ncm91cF9pZF0gPSB0aGlzLmluc3RhbmNlLmdldFNlbGVjdGVkVmFsdWVzKCk7XG4gICAgdGVtcFVzZXIubmFtZSA9IGAke2ZpcnN0TmFtZVNlbC52YWx1ZX0gJHtsYXN0TmFtZVNlbC52YWx1ZX1gO1xuICAgIHRlbXBVc2VyLnN0cmVldCA9IHN0cmVldFNlbC52YWx1ZTtcbiAgICB0ZW1wVXNlci56aXBfY29kZSA9IHppcENvZGVTZWwudmFsdWU7XG4gICAgdGVtcFVzZXIuY2l0eSA9IGNpdHlTZWwudmFsdWU7XG4gICAgdGVtcFVzZXIucGhvbmUgPSBwaG9uZVNlbC52YWx1ZTtcbiAgICB0ZW1wVXNlci5jcmVkaXRzID0gcmFuZ2VDcmVkaXRTZWwudmFsdWU7XG4gICAgdGhpcy5lbWl0KCdmZXRjaFBvc3RSZXF1ZXN0JywgdGVtcFVzZXIsIGRvY3VtZW50KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvc3RCbGFuazsiLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50JztcblxuY29uc3QgbW9kYWxFZGl0U2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpO1xuXG5jb25zdCBibGFua0dyb3Vwc1NlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjZ3JvdXBzJyk7XG5cbmNvbnN0IGdyb3VwU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpO1xuXG5jb25zdCBmaXJzdE5hbWVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI2ZpcnN0X25hbWUnKTtcbmNvbnN0IGxhc3ROYW1lU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJyNsYXN0X25hbWUnKTtcbmNvbnN0IHN0cmVldFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjc3RyZWV0Jyk7XG5jb25zdCB6aXBDb2RlU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJyN6aXBfY29kZScpO1xuY29uc3QgY2l0eVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjY2l0eScpO1xuY29uc3QgcGhvbmVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI3Bob25lJyk7XG5jb25zdCByYW5nZUNyZWRpdFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjcmFuZ2VfY3JlZGl0Jyk7XG5jb25zdCBpZENvbnRhaW5lclNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCcpO1xuXG5jb25zdCB1cGRhdGVCdXR0b25TZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI3VwZGF0ZV9idXR0b24nKTtcblxuY29uc3QgbWFpblRhYmxlU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG5cbmNsYXNzIEVkaXRCbGFuayBleHRlbmRzIENvbXBvbmVudCB7XG4gIGluaXQoKSB7XG4gICAgbWFpblRhYmxlU2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgdGhpcy5kYmxDbGlja0xpc3RlbmVyRnVuLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICB0aGlzLm9uKCdlZGl0U2VuZERhdGEnLCB0aGlzLmluaXRCbGFuay5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XG4gICAgTS5Nb2RhbC5pbml0KG1vZGFsRWRpdFNlbCwge30pO1xuICAgIHVwZGF0ZUJ1dHRvblNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZWRpdEJsYW5rVXBkYXRlLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgfVxuXG4gIGRibENsaWNrTGlzdGVuZXJGdW4oZSkge1xuICAgIHRoaXMuZW1pdCgnZWRpdFJlcXVlc3REYXRhJywgZS50YXJnZXQucGFyZW50Tm9kZS5pZCwgZG9jdW1lbnQpO1xuICB9XG5cbiAgaW5pdEJsYW5rKHBhcmFtcykge1xuICAgIFt0aGlzLnVzZXIsIHRoaXMuZ3JvdXBzXSA9IHBhcmFtcztcbiAgICBjb25zdCBjaG9vc2VkR3JvdXAgPSB0aGlzLmdyb3Vwcy5maW5kKGl0ZW0gPT4gaXRlbS5ncm91cF9pZCA9PT0gdGhpcy51c2VyLmdyb3VwX2lkKTtcbiAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgPSAnJztcbiAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgKz0gYDxvcHRpb24gdmFsdWU9XCIke3RoaXMudXNlci5ncm91cF9pZH1cIiBkaXNhYmxlZCBzZWxlY3RlZD4ke2Nob29zZWRHcm91cC5uYW1lfTwvb3B0aW9uPmA7XG4gICAgdGhpcy5ncm91cHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgYmxhbmtHcm91cHNTZWwuaW5uZXJIVE1MICs9IGA8b3B0aW9uIHZhbHVlPVwiJHtpdGVtLmdyb3VwX2lkfVwiIGlkPVwiJHtpdGVtLmdyb3VwX2lkfVwiPiR7aXRlbS5uYW1lfTwvb3B0aW9uPmA7XG4gICAgfSk7XG5cbiAgICBpZENvbnRhaW5lclNlbC5pZCA9IHRoaXMudXNlci51c2VyX2lkO1xuICAgIGNvbnN0IGZ1bGxuYW1lID0gdGhpcy51c2VyLm5hbWUuc3BsaXQoJyAnKTtcbiAgICBbZmlyc3ROYW1lU2VsLnZhbHVlXSA9IGZ1bGxuYW1lO1xuICAgIGZ1bGxuYW1lLnNwbGljZSgwLCAxKTtcbiAgICBsYXN0TmFtZVNlbC52YWx1ZSA9IGZ1bGxuYW1lLmpvaW4oJyAnKTtcbiAgICBzdHJlZXRTZWwudmFsdWUgPSB0aGlzLnVzZXIuc3RyZWV0O1xuICAgIHppcENvZGVTZWwudmFsdWUgPSB0aGlzLnVzZXIuemlwX2NvZGU7XG4gICAgY2l0eVNlbC52YWx1ZSA9IHRoaXMudXNlci5jaXR5O1xuICAgIHBob25lU2VsLnZhbHVlID0gdGhpcy51c2VyLnBob25lO1xuICAgIHJhbmdlQ3JlZGl0U2VsLnZhbHVlID0gdGhpcy51c2VyLmNyZWRpdHM7XG5cbiAgICBpZiAocGFyc2VGbG9hdChyYW5nZUNyZWRpdFNlbC52YWx1ZSkgPT09IDApIHtcbiAgICAgIGZpcnN0TmFtZVNlbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICBsYXN0TmFtZVNlbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICBzdHJlZXRTZWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgemlwQ29kZVNlbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICBjaXR5U2VsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHBob25lU2VsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHJhbmdlQ3JlZGl0U2VsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIGJsYW5rR3JvdXBzU2VsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmlyc3ROYW1lU2VsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBsYXN0TmFtZVNlbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgc3RyZWV0U2VsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB6aXBDb2RlU2VsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBjaXR5U2VsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBwaG9uZVNlbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgcmFuZ2VDcmVkaXRTZWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIGJsYW5rR3JvdXBzU2VsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGNob29zZWRHcm91cC5pc19hZG1pbikge1xuICAgICAgcmFuZ2VDcmVkaXRTZWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIE0uRm9ybVNlbGVjdC5pbml0KGdyb3VwU2VsLCB7fSk7XG5cbiAgICBNLnVwZGF0ZVRleHRGaWVsZHMoKTtcblxuICAgIGNvbnN0IGluc3RhbmNlID0gTS5Nb2RhbC5nZXRJbnN0YW5jZShtb2RhbEVkaXRTZWwpO1xuICAgIGluc3RhbmNlLm9wZW4oKTtcbiAgfVxuXG4gIGVkaXRCbGFua1VwZGF0ZSgpIHtcbiAgICB0aGlzLmluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmluaXQoZ3JvdXBTZWwsIHt9KTtcbiAgICB0aGlzLmluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmdldEluc3RhbmNlKGdyb3VwU2VsKTtcblxuICAgIGNvbnN0IHRlbXBVc2VyID0ge307XG4gICAgdGVtcFVzZXIudXNlcl9pZCA9IGlkQ29udGFpbmVyU2VsLmlkO1xuICAgIC8vIHRlbXBVc2VyLmdyb3VwX2lkID0gdGhpcy5pbnN0YW5jZS5nZXRTZWxlY3RlZFZhbHVlcygpWzBdO1xuICAgIFt0ZW1wVXNlci5ncm91cF9pZF0gPSB0aGlzLmluc3RhbmNlLmdldFNlbGVjdGVkVmFsdWVzKCk7XG4gICAgdGVtcFVzZXIubmFtZSA9IGAke2ZpcnN0TmFtZVNlbC52YWx1ZX0gJHtsYXN0TmFtZVNlbC52YWx1ZX1gO1xuICAgIHRlbXBVc2VyLnN0cmVldCA9IHN0cmVldFNlbC52YWx1ZTtcbiAgICB0ZW1wVXNlci56aXBfY29kZSA9IHppcENvZGVTZWwudmFsdWU7XG4gICAgdGVtcFVzZXIuY2l0eSA9IGNpdHlTZWwudmFsdWU7XG4gICAgdGVtcFVzZXIucGhvbmUgPSBwaG9uZVNlbC52YWx1ZTtcbiAgICB0ZW1wVXNlci5jcmVkaXRzID0gcmFuZ2VDcmVkaXRTZWwudmFsdWU7XG4gICAgdGhpcy5lbWl0KCdmZXRjaFB1dFJlcXVlc3QnLCB0ZW1wVXNlciwgZG9jdW1lbnQpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEVkaXRCbGFuazsiLCJpbXBvcnQgRGF0YVN0b3JlIGZyb20gJy4vZGF0YV9zdG9yZSc7XG5pbXBvcnQgTXlXZWJTb2NrZXQgZnJvbSAnLi93ZWJfc29ja2V0JztcbmltcG9ydCBHcm91cHNWaWV3IGZyb20gJy4vZ3JvdXBzX3ZpZXcnO1xuaW1wb3J0IFVzZXJzVmlldyBmcm9tICcuL3VzZXJzX3ZpZXcnO1xuaW1wb3J0IFBvc3RCbGFuayBmcm9tICcuL3Bvc3RfYmxhbmsnO1xuaW1wb3J0IEVkaXRCbGFuayBmcm9tICcuL2VkaXRfYmxhbmsnO1xuXG5EYXRhU3RvcmUuYmluZFRvKGRvY3VtZW50KTtcbk15V2ViU29ja2V0LmJpbmRUbyhkb2N1bWVudCk7XG5Hcm91cHNWaWV3LmJpbmRUbyhkb2N1bWVudCk7XG5Vc2Vyc1ZpZXcuYmluZFRvKGRvY3VtZW50KTtcblBvc3RCbGFuay5iaW5kVG8oZG9jdW1lbnQpO1xuRWRpdEJsYW5rLmJpbmRUbyhkb2N1bWVudCk7Il0sInNvdXJjZVJvb3QiOiIifQ==