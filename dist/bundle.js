!function(e){var t={};function o(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);class s{constructor(e){this.element=e}on(e,t,o=this.element){o.addEventListener(e,e=>t(e.detail))}emit(e,t,o=this.element){const s=new CustomEvent(e,{detail:t});o.dispatchEvent(s)}static bindTo(e){let t=e;if("string"==typeof e&&(t=document.querySelector(e)),!(t instanceof HTMLElement||t instanceof HTMLDocument))throw new Error("cannot bound component");new this(t).init()}init(){throw new Error("Must be implemented!")}}class i{constructor(e){this.user_id=parseFloat(e.user_id),this.group_id=parseFloat(e.group_id),this.name=e.name,this.street=e.street,this.zip_code=parseFloat(e.zip_code),this.city=e.city,this.phone=e.phone,this.credits=parseFloat(e.credits)}}class n{constructor(e){this.group_id=e.group_id,this.name=e.name,this.is_admin=e.is_admin}}var r=class extends s{init(){this.users=[],this.groups=[],this.on("actionEvent",this.actionEventFun.bind(this),document),this.on("renderInit",this.renderInitFun.bind(this),document),this.on("postRequestData",this.postBlankEmit.bind(this),document),this.on("editRequestData",this.editBlankEmit.bind(this),document),this.on("fetchPostRequest",this.postUserRequest.bind(this),document),this.on("fetchPutRequest",this.putUserRequest.bind(this),document)}renderInitFun(){this.sortData(),setTimeout(function(){this.emit("renderGroups",this.groups,document),this.emit("renderUsers",this.users,document)}.bind(this),5)}actionEventFun(e){const t=e.action.split(":");"updated"==t[1]&&this.fetchFun(e),"removed"==t[1]&&("user"==t[0]&&this.userDelete(e.id),"group"==t[0]&&this.groupDelete(e.id))}userDelete(e){const t=this.users.find(t=>t.user_id==e),o=this.users.indexOf(t);this.users.splice(o,1),this.emit("renderInit",null,document)}groupDelete(e){const t=this.groups.find(t=>t.group_id==e),o=this.groups.indexOf(t);this.groups.splice(o,1),this.emit("renderInit",null,document)}fetchFun(e){const t=e.action.split(":"),o=e.id,s=`https://ums-honeybadger.herokuapp.com/${t[0]}/${o}`;fetch(s).then(e=>e.json()).then(e=>{"user"===t[0]&&this.addUser(e),"group"===t[0]&&this.addGroup(e),this.emit("renderInit",null,document)}).catch(console.log)}addUser(e){const t=this.users.find(t=>t.user_id==e.user_id);if(t){const e=this.users.indexOf(t);this.users.splice(e,1)}this.users.push(new i(e)),this.countUsersInGroups()}addGroup(e){this.groups.push(new n(e)),this.countUsersInGroups()}countUsersInGroups(){this.groups.forEach(e=>{e.amountOfUsers=this.users.reduce((t,o)=>o.group_id===e.group_id?t+1:t,0)})}putUserRequest(e){const t=`https://ums-honeybadger.herokuapp.com/user/${e.user_id}`,o=new i(e);fetch(t,{method:"put",body:JSON.stringify(o)})}postUserRequest(e){let t=new i(e);t.user_id=void 0,t=JSON.stringify(t),fetch("https://ums-honeybadger.herokuapp.com/user",{method:"post",body:t})}postBlankEmit(){this.emit("postSendData",this.groups,document)}editBlankEmit(e){const t=this.users.find(t=>t.user_id==e);this.emit("editSendData",[t,this.groups],document)}sortData(){this.users.sort((e,t)=>e.user_id-t.user_id),this.groups.sort((e,t)=>e.group_id-t.group_id)}};var d=class extends s{init(){this.socket=new WebSocket("ws://ums-honeybadger.herokuapp.com/ums"),this.socket.onmessage=this.onMessageFun.bind(this),this.socket.onopen=this.onOpenFun.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this)}onMessageFun(e){const t=JSON.parse(e.data);console.log("WEB SOCKET - ",t),t.message&&console.log("MESSAGE - ",t.message),t.action&&this.emit("actionEvent",t,document)}onOpenFun(e){console.log(e)}onError(e){console.log(e)}onClose(e){console.log(e)}};const u=document.querySelector("#slide-out").querySelector("ul"),c=document.querySelector(".page-title");var a=class extends s{init(){this.on("renderGroups",this.renderGroups.bind(this),document),window.onhashchange=(()=>{this.emit("renderInit",null,document)})}renderGroups(e){u.innerHTML="",e.forEach(e=>{let t;document.location.hash.split(/[#/]/).some(t=>t==e.group_id)?(c.innerText=e.name,t="active"):t="";const o=`<li class=${t}><a href="#${e.group_id}/">${e.name} <span class="badge" data-badge-caption="">${e.amountOfUsers}</span></a></li>`;u.innerHTML+=o})}};const l=document.querySelector(".striped").querySelector("tbody");var h=class extends s{init(){this.on("renderUsers",this.renderUsers.bind(this),document)}renderUsers(e){l.innerHTML="",e.forEach(e=>{if(document.location.hash.split(/[#\/]/).some(t=>t==e.group_id)){let t=`\n        <tr id="${e.user_id}">\n          <td>${e.name}</td>\n          <td>${e.street}</td>\n          <td>${e.zip_code}</td>\n          <td>${e.city}</td>\n          <td>${e.phone}</td>\n        </tr>\n        `;l.innerHTML+=t}})}};const m=document.querySelector(".navigation-add").querySelector("a"),p=document.querySelector("#modalAdd").querySelector("#groups"),y=document.querySelector("#modalAdd").querySelector("select"),S=document.querySelector("#modalAdd").querySelector("#first_name"),g=document.querySelector("#modalAdd").querySelector("#last_name"),q=document.querySelector("#modalAdd").querySelector("#street"),b=document.querySelector("#modalAdd").querySelector("#zip_code"),f=document.querySelector("#modalAdd").querySelector("#city"),_=document.querySelector("#modalAdd").querySelector("#phone"),v=document.querySelector("#modalAdd").querySelector("#range_credit"),E=document.querySelector("#modalAdd").querySelector("#create_button");var k=class extends s{init(){this.on("postSendData",this.initBlank.bind(this),document),m.addEventListener("click",this.postRequestData.bind(this),!1),E.addEventListener("click",this.postBlankCreate.bind(this),!1),M.Modal.init(document.querySelector("#modalAdd"),{})}initBlank(e){S.value="",g.value="",q.value="",b.value="",f.value="",_.value="",v.value="",this.groups=e,M.updateTextFields(),p.innerHTML="",p.innerHTML+='<option value="" disabled selected>Choose group</option>',e.forEach(e=>{p.innerHTML+=`<option value="${e.group_id}" id="${e.group_id}">${e.name}</option>`}),M.FormSelect.init(y,{});const t=document.querySelector("#modalAdd").querySelector(".select-wrapper").querySelector("ul");Array.from(t.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}postRequestData(){this.emit("postRequestData",null,document)}groupChoosed(){this.instance=M.FormSelect.init(y,{}),this.instance=M.FormSelect.getInstance(y);const e=this.instance.getSelectedValues()[0];if(e){const t=this.groups.find(t=>t.group_id==e);t&&t.is_admin?v.disabled=!0:v.disabled=!1}const t=document.querySelector("#modalAdd").querySelector(".select-wrapper").querySelector("ul");Array.from(t.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}postBlankCreate(){this.instance=M.FormSelect.init(y,{}),this.instance=M.FormSelect.getInstance(y);const e={};[e.group_id]=this.instance.getSelectedValues(),e.name=`${S.value} ${g.value}`,e.street=q.value,e.zip_code=b.value,e.city=f.value,e.phone=_.value,e.credits=v.value,this.emit("fetchPostRequest",e,document)}};const F=document.querySelector("#modalEdit"),$=document.querySelector("#modalEdit").querySelector("#groups"),T=document.querySelector("#modalEdit").querySelector("select"),w=document.querySelector("#modalEdit").querySelector("#first_name"),L=document.querySelector("#modalEdit").querySelector("#last_name"),A=document.querySelector("#modalEdit").querySelector("#street"),x=document.querySelector("#modalEdit").querySelector("#zip_code"),D=document.querySelector("#modalEdit").querySelector("#city"),U=document.querySelector("#modalEdit").querySelector("#phone"),C=document.querySelector("#modalEdit").querySelector("#range_credit"),I=document.querySelector("#modalEdit").querySelector(".modal-content"),O=document.querySelector("#modalEdit").querySelector("#update_button"),R=document.querySelector("main").querySelector("tbody");var B=class extends s{init(){R.addEventListener("dblclick",this.dblClickListenerFun.bind(this),!1),this.on("editSendData",this.initBlank.bind(this),document),M.Modal.init(F,{}),O.addEventListener("click",this.editBlankUpdate.bind(this),!1)}dblClickListenerFun(e){this.emit("editRequestData",e.target.parentNode.id,document)}initBlank(e){const t=e[0];this.groups=e[1];const o=this.groups.find(e=>e.group_id==t.group_id);$.innerHTML="",$.innerHTML+=`<option value="${t.group_id}" disabled selected>${o.name}</option>`,this.groups.forEach(e=>{$.innerHTML+=`<option value="${e.group_id}" id="${e.group_id}">${e.name}</option>`}),o.is_admin?C.disabled=!0:C.disabled=!1,I.id=t.user_id;const s=t.name.split(" ");w.value=s[0],s.splice(0,1),L.value=s.join(" "),A.value=t.street,x.value=t.zip_code,D.value=t.city,U.value=t.phone,C.value=t.credits,0==C.value?(w.disabled=!0,L.disabled=!0,A.disabled=!0,x.disabled=!0,D.disabled=!0,U.disabled=!0,C.disabled=!0,$.disabled=!0):(w.disabled=!1,L.disabled=!1,A.disabled=!1,x.disabled=!1,D.disabled=!1,U.disabled=!1,C.disabled=!1,$.disabled=!1),o.is_admin?C.disabled=!0:C.disabled=!1,M.FormSelect.init(T,{}),M.updateTextFields(),M.Modal.getInstance(F).open();const i=document.querySelector("#modalEdit").querySelector(".select-wrapper").querySelector("ul");Array.from(i.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}editBlankUpdate(){this.instance=M.FormSelect.init(T,{}),this.instance=M.FormSelect.getInstance(T);const e={};e.user_id=I.id,e.group_id=this.instance.getSelectedValues()[0],e.name=`${w.value} ${L.value}`,e.street=A.value,e.zip_code=x.value,e.city=D.value,e.phone=U.value,e.credits=C.value,this.emit("fetchPutRequest",e,document)}groupChoosed(){this.instance=M.FormSelect.init(T,{}),this.instance=M.FormSelect.getInstance(T);const e=this.instance.getSelectedValues()[0];if(e){const t=this.groups.find(t=>t.group_id==e);t&&t.is_admin?C.disabled=!0:C.disabled=!1}const t=document.querySelector("#modalEdit").querySelector(".select-wrapper").querySelector("ul");Array.from(t.children).forEach(e=>{e.onclick=this.groupChoosed.bind(this)})}};r.bindTo(document),d.bindTo(document),a.bindTo(document),h.bindTo(document),k.bindTo(document),B.bindTo(document)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2pzL2RhdGFfc3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvd2ViX3NvY2tldC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9ncm91cHNfdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9qcy91c2Vyc192aWV3LmpzIiwid2VicGFjazovLy8uL2pzL3Bvc3RfYmxhbmsuanMiLCJ3ZWJwYWNrOi8vLy4vanMvZWRpdF9ibGFuay5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYWluLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDb21wb25lbnQiLCJbb2JqZWN0IE9iamVjdF0iLCJlbGVtZW50IiwidGhpcyIsImV2ZW50VHlwZSIsImNhbGxiYWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZGV0YWlsIiwiZGF0YSIsIkN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTEVsZW1lbnQiLCJIVE1MRG9jdW1lbnQiLCJFcnJvciIsImluaXQiLCJkYXRhX3N0b3JlX1VzZXJPYmoiLCJ1c2VyIiwidXNlcl9pZCIsInBhcnNlRmxvYXQiLCJncm91cF9pZCIsInN0cmVldCIsInppcF9jb2RlIiwiY2l0eSIsInBob25lIiwiY3JlZGl0cyIsImRhdGFfc3RvcmVfR3JvdXBPYmoiLCJnIiwiaXNfYWRtaW4iLCJkYXRhX3N0b3JlIiwidXNlcnMiLCJncm91cHMiLCJvbiIsImFjdGlvbkV2ZW50RnVuIiwiYmluZCIsInJlbmRlckluaXRGdW4iLCJwb3N0QmxhbmtFbWl0IiwiZWRpdEJsYW5rRW1pdCIsInBvc3RVc2VyUmVxdWVzdCIsInB1dFVzZXJSZXF1ZXN0Iiwic29ydERhdGEiLCJzZXRUaW1lb3V0IiwiZW1pdCIsImFjdGlvbiIsInNwbGl0IiwiZmV0Y2hGdW4iLCJ1c2VyRGVsZXRlIiwiaWQiLCJncm91cERlbGV0ZSIsInRlbXAiLCJmaW5kIiwiaXRlbSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsInVybCIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImFkZFVzZXIiLCJhZGRHcm91cCIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsInB1c2giLCJjb3VudFVzZXJzSW5Hcm91cHMiLCJncm91cCIsImZvckVhY2giLCJhbW91bnRPZlVzZXJzIiwicmVkdWNlIiwiYWNjIiwiY3VyIiwib2JqIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJzb3J0IiwiYSIsImIiLCJ3ZWJfc29ja2V0Iiwic29ja2V0IiwiV2ViU29ja2V0Iiwib25tZXNzYWdlIiwib25NZXNzYWdlRnVuIiwib25vcGVuIiwib25PcGVuRnVuIiwib25lcnJvciIsIm9uRXJyb3IiLCJvbmNsb3NlIiwib25DbG9zZSIsIm1lc3NhZ2UiLCJwYXJzZSIsImUiLCJncm91cHNfdmlld19ncm91cHNVbFNlbCIsImdyb3Vwc192aWV3X3BhZ2VUaXRsZVNlbCIsImdyb3Vwc192aWV3IiwicmVuZGVyR3JvdXBzIiwid2luZG93Iiwib25oYXNoY2hhbmdlIiwiaW5uZXJIVE1MIiwiYWN0aXZlIiwibG9jYXRpb24iLCJoYXNoIiwic29tZSIsImlubmVyVGV4dCIsIm15VGVtcGxhdGUiLCJ1c2Vyc192aWV3X3VzZXJzVGFibGVCb2R5U2VsIiwidXNlcnNfdmlldyIsInJlbmRlclVzZXJzIiwicG9zdF9ibGFua19uYXZBZGRTZWwiLCJwb3N0X2JsYW5rX2JsYW5rR3JvdXBzU2VsIiwicG9zdF9ibGFua19ncm91cFNlbCIsInBvc3RfYmxhbmtfZmlyc3ROYW1lU2VsIiwicG9zdF9ibGFua19sYXN0TmFtZVNlbCIsInBvc3RfYmxhbmtfc3RyZWV0U2VsIiwicG9zdF9ibGFua196aXBDb2RlU2VsIiwicG9zdF9ibGFua19jaXR5U2VsIiwicG9zdF9ibGFua19waG9uZVNlbCIsInBvc3RfYmxhbmtfcmFuZ2VDcmVkaXRTZWwiLCJwb3N0X2JsYW5rX2NyZWF0ZUJ1dHRvblNlbCIsInBvc3RfYmxhbmsiLCJpbml0QmxhbmsiLCJwb3N0UmVxdWVzdERhdGEiLCJwb3N0QmxhbmtDcmVhdGUiLCJNIiwiTW9kYWwiLCJ1cGRhdGVUZXh0RmllbGRzIiwiRm9ybVNlbGVjdCIsIm1hdGVyaWFsR3JvdXBVbCIsIkFycmF5IiwiZnJvbSIsImNoaWxkcmVuIiwibGkiLCJvbmNsaWNrIiwiZ3JvdXBDaG9vc2VkIiwiaW5zdGFuY2UiLCJnZXRJbnN0YW5jZSIsImdyb3VwSWQiLCJnZXRTZWxlY3RlZFZhbHVlcyIsInNlbGVjdGVkR3JvdXAiLCJkaXNhYmxlZCIsInRlbXBVc2VyIiwiZWRpdF9ibGFua19tb2RhbEVkaXRTZWwiLCJlZGl0X2JsYW5rX2JsYW5rR3JvdXBzU2VsIiwiZWRpdF9ibGFua19ncm91cFNlbCIsImVkaXRfYmxhbmtfZmlyc3ROYW1lU2VsIiwiZWRpdF9ibGFua19sYXN0TmFtZVNlbCIsImVkaXRfYmxhbmtfc3RyZWV0U2VsIiwiZWRpdF9ibGFua196aXBDb2RlU2VsIiwiZWRpdF9ibGFua19jaXR5U2VsIiwiZWRpdF9ibGFua19waG9uZVNlbCIsImVkaXRfYmxhbmtfcmFuZ2VDcmVkaXRTZWwiLCJlZGl0X2JsYW5rX2lkQ29udGFpbmVyU2VsIiwiZWRpdF9ibGFua191cGRhdGVCdXR0b25TZWwiLCJlZGl0X2JsYW5rX21haW5UYWJsZVNlbCIsImVkaXRfYmxhbmsiLCJkYmxDbGlja0xpc3RlbmVyRnVuIiwiZWRpdEJsYW5rVXBkYXRlIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsInBhcmFtcyIsImNob29zZWRHcm91cCIsImZ1bGxuYW1lIiwiam9pbiIsIm9wZW4iLCJiaW5kVG8iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWpCLEdBQ0FZLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURrQixPQUFBLEtBSWpEcEIsRUFBQXFCLEVBQUEsU0FBQWxCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQW1CLFdBQ0EsV0FBMkIsT0FBQW5CLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFVLEVBQUFDLEdBQXNELE9BQUFWLE9BQUFXLFVBQUFDLGVBQUFuQixLQUFBZ0IsRUFBQUMsSUFHdER4QixFQUFBMkIsRUFBQSxHQUlBM0IsSUFBQTRCLEVBQUEsK0NDbkVBQyxFQUNBQyxZQUFBQyxHQUNBQyxLQUFBRCxVQUdBRCxHQUFBRyxFQUFBQyxFQUFBSCxFQUFBQyxLQUFBRCxT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dUJ5SyxFQUFBaEssU0FBc0JpSyxFQUFBakssUUFDN0M0SixFQUFBM0gsT0FBQWlJLEVBQUFsSyxNQUNBNEosRUFBQTFILFNBQUFpSSxFQUFBbkssTUFDQTRKLEVBQUF6SCxLQUFBaUksRUFBQXBLLE1BQ0E0SixFQUFBeEgsTUFBQWlJLEVBQUFySyxNQUNBNEosRUFBQXZILFFBQUFpSSxFQUFBdEssTUFDQVksS0FBQTBDLEtBQUEsa0JBQUFzRyxFQUFBdEksVUFHQVosZUFDQUUsS0FBQTBJLFNBQUFYLEVBQUFHLFdBQUFuSCxLQUFBb0ksTUFDQW5KLEtBQUEwSSxTQUFBWCxFQUFBRyxXQUFBUyxZQUFBUSxHQUNBLE1BQUFQLEVBQUE1SSxLQUFBMEksU0FBQUcsb0JBQUEsR0FDQSxHQUFBRCxFQUFBLENBQ0EsTUFBQUUsRUFBQTlJLEtBQUErQixPQUFBbUIsS0FBQUMsS0FBQS9CLFVBQUF3SCxHQUNBRSxLQUFBbEgsU0FDQThILEVBQUFYLFVBQUEsRUFFQVcsRUFBQVgsVUFBQSxFQUlBLE1BQUFaLEVBQUF6SCxTQUFBQyxjQUFBLGNBQUFBLGNBQUEsbUJBQUFBLGNBQUEsTUFDQXlILE1BQUFDLEtBQUFGLEVBQUFHLFVBQUFsRSxRQUFBbUUsSUFDQUEsRUFBQUMsUUFBQXhJLEtBQUF5SSxhQUFBdkcsS0FBQWxDLFVDOUhBNkIsRUFBQTJJLE9BQUE5SixVQUNBd0UsRUFBQXNGLE9BQUE5SixVQUNBd0YsRUFBQXNFLE9BQUE5SixVQUNBb0csRUFBQTBELE9BQUE5SixVQUNBaUgsRUFBQTZDLE9BQUE5SixVQUNBb0osRUFBQVUsT0FBQTlKIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBvbihldmVudFR5cGUsIGNhbGxiYWNrLCBlbGVtZW50ID0gdGhpcy5lbGVtZW50KSB7XHJcbiAgICBjb25zdCBjYldyYXAgPSBldmVudCA9PiBjYWxsYmFjayhldmVudC5kZXRhaWwpO1xyXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2JXcmFwKTtcclxuICB9XHJcblxyXG4gIGVtaXQoZXZlbnRUeXBlLCBkYXRhLCBlbGVtZW50ID0gdGhpcy5lbGVtZW50KSB7XHJcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChldmVudFR5cGUsIHsgZGV0YWlsOiBkYXRhIH0pO1xyXG4gICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBiaW5kVG8oc2VsZWN0b3IpIHtcclxuICAgIGxldCBlbGVtZW50ID0gc2VsZWN0b3I7XHJcbiAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xyXG4gICAgICBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCEoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRG9jdW1lbnQpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignY2Fubm90IGJvdW5kIGNvbXBvbmVudCcpO1xyXG4gICAgfVxyXG5cclxuICAgIChuZXcgdGhpcyhlbGVtZW50KSkuaW5pdCgpO1xyXG4gIH1cclxuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcclxuICBpbml0KCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IGJlIGltcGxlbWVudGVkIScpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50JztcclxuXHJcbmNsYXNzIFVzZXJPYmoge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXIpIHtcclxuICAgIHRoaXMudXNlcl9pZCA9IHBhcnNlRmxvYXQodXNlci51c2VyX2lkKTtcclxuICAgIHRoaXMuZ3JvdXBfaWQgPSBwYXJzZUZsb2F0KHVzZXIuZ3JvdXBfaWQpO1xyXG4gICAgdGhpcy5uYW1lID0gdXNlci5uYW1lO1xyXG4gICAgdGhpcy5zdHJlZXQgPSB1c2VyLnN0cmVldDtcclxuICAgIHRoaXMuemlwX2NvZGUgPSBwYXJzZUZsb2F0KHVzZXIuemlwX2NvZGUpO1xyXG4gICAgdGhpcy5jaXR5ID0gdXNlci5jaXR5O1xyXG4gICAgdGhpcy5waG9uZSA9IHVzZXIucGhvbmU7XHJcbiAgICB0aGlzLmNyZWRpdHMgPSBwYXJzZUZsb2F0KHVzZXIuY3JlZGl0cyk7XHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBHcm91cE9iaiB7XHJcbiAgY29uc3RydWN0b3IoZykge1xyXG4gICAgdGhpcy5ncm91cF9pZCA9IGcuZ3JvdXBfaWQ7XHJcbiAgICB0aGlzLm5hbWUgPSBnLm5hbWU7XHJcbiAgICB0aGlzLmlzX2FkbWluID0gZy5pc19hZG1pbjtcclxuICB9XHJcbn1cclxuXHJcbmNsYXNzIERhdGFTdG9yZSBleHRlbmRzIENvbXBvbmVudCB7XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnVzZXJzID0gW107XHJcbiAgICB0aGlzLmdyb3VwcyA9IFtdO1xyXG4gICAgdGhpcy5vbignYWN0aW9uRXZlbnQnLCB0aGlzLmFjdGlvbkV2ZW50RnVuLmJpbmQodGhpcyksIGRvY3VtZW50KTtcclxuICAgIHRoaXMub24oJ3JlbmRlckluaXQnLCB0aGlzLnJlbmRlckluaXRGdW4uYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgdGhpcy5vbigncG9zdFJlcXVlc3REYXRhJywgdGhpcy5wb3N0QmxhbmtFbWl0LmJpbmQodGhpcyksIGRvY3VtZW50KTtcclxuICAgIHRoaXMub24oJ2VkaXRSZXF1ZXN0RGF0YScsIHRoaXMuZWRpdEJsYW5rRW1pdC5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XHJcbiAgICB0aGlzLm9uKCdmZXRjaFBvc3RSZXF1ZXN0JywgdGhpcy5wb3N0VXNlclJlcXVlc3QuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgdGhpcy5vbignZmV0Y2hQdXRSZXF1ZXN0JywgdGhpcy5wdXRVc2VyUmVxdWVzdC5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJbml0RnVuKCkge1xyXG4gICAgdGhpcy5zb3J0RGF0YSgpO1xyXG4gICAgZnVuY3Rpb24gZnVuKCkge1xyXG4gICAgICB0aGlzLmVtaXQoJ3JlbmRlckdyb3VwcycsIHRoaXMuZ3JvdXBzLCBkb2N1bWVudCk7XHJcbiAgICAgIHRoaXMuZW1pdCgncmVuZGVyVXNlcnMnLCB0aGlzLnVzZXJzLCBkb2N1bWVudCk7XHJcbiAgICB9XHJcbiAgICBzZXRUaW1lb3V0KGZ1bi5iaW5kKHRoaXMpLCA1KTtcclxuICB9XHJcblxyXG4gIGFjdGlvbkV2ZW50RnVuKGRhdGEpIHtcclxuICAgIGNvbnN0IGFjdGlvbiA9IGRhdGEuYWN0aW9uLnNwbGl0KCc6Jyk7XHJcbiAgICBpZiAoYWN0aW9uWzFdID09ICd1cGRhdGVkJykge1xyXG4gICAgICB0aGlzLmZldGNoRnVuKGRhdGEpO1xyXG4gICAgfVxyXG4gICAgaWYgKGFjdGlvblsxXSA9PSAncmVtb3ZlZCcpIHtcclxuICAgICAgaWYgKGFjdGlvblswXSA9PSAndXNlcicpIHtcclxuICAgICAgICB0aGlzLnVzZXJEZWxldGUoZGF0YS5pZCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGFjdGlvblswXSA9PSAnZ3JvdXAnKSB7XHJcbiAgICAgICAgdGhpcy5ncm91cERlbGV0ZShkYXRhLmlkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXNlckRlbGV0ZShpZCkge1xyXG4gICAgY29uc3QgdGVtcCA9IHRoaXMudXNlcnMuZmluZChpdGVtID0+IGl0ZW0udXNlcl9pZCA9PSBpZCk7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMudXNlcnMuaW5kZXhPZih0ZW1wKTtcclxuICAgIHRoaXMudXNlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHRoaXMuZW1pdCgncmVuZGVySW5pdCcsIG51bGwsIGRvY3VtZW50KTtcclxuICB9XHJcblxyXG4gIGdyb3VwRGVsZXRlKGlkKSB7XHJcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5ncm91cHMuZmluZChpdGVtID0+IGl0ZW0uZ3JvdXBfaWQgPT0gaWQpO1xyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmdyb3Vwcy5pbmRleE9mKHRlbXApO1xyXG4gICAgdGhpcy5ncm91cHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHRoaXMuZW1pdCgncmVuZGVySW5pdCcsIG51bGwsIGRvY3VtZW50KTtcclxuICB9XHJcblxyXG4gIGZldGNoRnVuKGRhdGEpIHtcclxuICAgIGNvbnN0IGFjdGlvbiA9IGRhdGEuYWN0aW9uLnNwbGl0KCc6Jyk7XHJcbiAgICBjb25zdCBpZCA9IGRhdGEuaWQ7XHJcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly91bXMtaG9uZXliYWRnZXIuaGVyb2t1YXBwLmNvbS8ke2FjdGlvblswXX0vJHtpZH1gO1xyXG4gICAgZmV0Y2godXJsKVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgIC50aGVuKChqc29uKSA9PiB7XHJcbiAgICAgICAgaWYgKGFjdGlvblswXSA9PT0gJ3VzZXInKSB7XHJcbiAgICAgICAgICB0aGlzLmFkZFVzZXIoanNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhY3Rpb25bMF0gPT09ICdncm91cCcpIHtcclxuICAgICAgICAgIHRoaXMuYWRkR3JvdXAoanNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZW1pdCgncmVuZGVySW5pdCcsIG51bGwsIGRvY3VtZW50KTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGNvbnNvbGUubG9nKTtcclxuICB9XHJcblxyXG4gIGFkZFVzZXIodXNlcikge1xyXG4gICAgY29uc3QgdGVtcCA9IHRoaXMudXNlcnMuZmluZChpdGVtID0+IGl0ZW0udXNlcl9pZCA9PSB1c2VyLnVzZXJfaWQpO1xyXG4gICAgaWYgKHRlbXApIHtcclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnVzZXJzLmluZGV4T2YodGVtcCk7XHJcbiAgICAgIHRoaXMudXNlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuICAgIHRoaXMudXNlcnMucHVzaChuZXcgVXNlck9iaih1c2VyKSk7XHJcbiAgICB0aGlzLmNvdW50VXNlcnNJbkdyb3VwcygpO1xyXG4gIH1cclxuXHJcbiAgYWRkR3JvdXAoZ3JvdXApIHtcclxuICAgIHRoaXMuZ3JvdXBzLnB1c2gobmV3IEdyb3VwT2JqKGdyb3VwKSk7XHJcbiAgICB0aGlzLmNvdW50VXNlcnNJbkdyb3VwcygpO1xyXG4gIH1cclxuXHJcbiAgY291bnRVc2Vyc0luR3JvdXBzKCkge1xyXG4gICAgdGhpcy5ncm91cHMuZm9yRWFjaCgoZ3JvdXApID0+IHtcclxuICAgICAgZ3JvdXAuYW1vdW50T2ZVc2VycyA9IHRoaXMudXNlcnMucmVkdWNlKChhY2MsIGN1cikgPT4ge1xyXG4gICAgICAgIGlmIChjdXIuZ3JvdXBfaWQgPT09IGdyb3VwLmdyb3VwX2lkKSByZXR1cm4gYWNjICsgMTtcclxuICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICB9LCAwKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcclxuICBwdXRVc2VyUmVxdWVzdChvYmopIHtcclxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3Vtcy1ob25leWJhZGdlci5oZXJva3VhcHAuY29tL3VzZXIvJHtvYmoudXNlcl9pZH1gO1xyXG4gICAgY29uc3QgdGVtcCA9IG5ldyBVc2VyT2JqKG9iaik7XHJcbiAgICBmZXRjaCh1cmwsIHtcclxuICAgICAgbWV0aG9kOiAncHV0JyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGVtcCksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXHJcbiAgcG9zdFVzZXJSZXF1ZXN0KG9iaikge1xyXG4gICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vdW1zLWhvbmV5YmFkZ2VyLmhlcm9rdWFwcC5jb20vdXNlcic7XHJcbiAgICBsZXQgdGVtcCA9IG5ldyBVc2VyT2JqKG9iaik7XHJcbiAgICB0ZW1wLnVzZXJfaWQgPSB1bmRlZmluZWQ7XHJcbiAgICB0ZW1wID0gSlNPTi5zdHJpbmdpZnkodGVtcCk7XHJcblxyXG4gICAgZmV0Y2godXJsLCB7XHJcbiAgICAgIG1ldGhvZDogJ3Bvc3QnLFxyXG4gICAgICBib2R5OiB0ZW1wLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwb3N0QmxhbmtFbWl0KCkge1xyXG4gICAgdGhpcy5lbWl0KCdwb3N0U2VuZERhdGEnLCB0aGlzLmdyb3VwcywgZG9jdW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZWRpdEJsYW5rRW1pdChpZCkge1xyXG4gICAgY29uc3QgdXNlciA9IHRoaXMudXNlcnMuZmluZChpdGVtID0+IGl0ZW0udXNlcl9pZCA9PSBpZCk7XHJcbiAgICB0aGlzLmVtaXQoJ2VkaXRTZW5kRGF0YScsIFt1c2VyLCB0aGlzLmdyb3Vwc10sIGRvY3VtZW50KTtcclxuICB9XHJcblxyXG4gIHNvcnREYXRhKCkge1xyXG4gICAgdGhpcy51c2Vycy5zb3J0KChhLCBiKSA9PiBhLnVzZXJfaWQgLSBiLnVzZXJfaWQpO1xyXG4gICAgdGhpcy5ncm91cHMuc29ydCgoYSwgYikgPT4gYS5ncm91cF9pZCAtIGIuZ3JvdXBfaWQpO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IERhdGFTdG9yZTtcclxuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudCc7XHJcblxyXG5jbGFzcyBNeVdlYlNvY2tldCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCgnd3M6Ly91bXMtaG9uZXliYWRnZXIuaGVyb2t1YXBwLmNvbS91bXMnKTtcclxuICAgIHRoaXMuc29ja2V0Lm9ubWVzc2FnZSA9IHRoaXMub25NZXNzYWdlRnVuLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnNvY2tldC5vbm9wZW4gPSB0aGlzLm9uT3BlbkZ1bi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5zb2NrZXQub25lcnJvciA9IHRoaXMub25FcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IHRoaXMub25DbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb25NZXNzYWdlRnVuKG1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKG1lc3NhZ2UuZGF0YSk7XHJcbiAgICBjb25zb2xlLmxvZygnV0VCIFNPQ0tFVCAtICcsIGRhdGEpO1xyXG4gICAgaWYgKGRhdGEubWVzc2FnZSkge1xyXG4gICAgICBjb25zb2xlLmxvZygnTUVTU0FHRSAtICcsIGRhdGEubWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YS5hY3Rpb24pIHtcclxuICAgICAgdGhpcy5lbWl0KCdhY3Rpb25FdmVudCcsIGRhdGEsIGRvY3VtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXHJcbiAgb25PcGVuRnVuKGUpIHtcclxuICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gIH1cclxuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcclxuICBvbkVycm9yKGUpIHtcclxuICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gIH1cclxuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcclxuICBvbkNsb3NlKG0pIHtcclxuICAgIGNvbnNvbGUubG9nKG0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTXlXZWJTb2NrZXQ7XHJcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xyXG5cclxuY29uc3QgZ3JvdXBzVWxTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2xpZGUtb3V0JykucXVlcnlTZWxlY3RvcigndWwnKTtcclxuY29uc3QgcGFnZVRpdGxlU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UtdGl0bGUnKTtcclxuXHJcbmNsYXNzIEdyb3Vwc1ZpZXcgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5vbigncmVuZGVyR3JvdXBzJywgdGhpcy5yZW5kZXJHcm91cHMuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gICAgd2luZG93Lm9uaGFzaGNoYW5nZSA9ICgpID0+IHsgdGhpcy5lbWl0KCdyZW5kZXJJbml0JywgbnVsbCwgZG9jdW1lbnQpOyB9O1xyXG4gIH1cclxuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcclxuICByZW5kZXJHcm91cHMoZ3JvdXBzKSB7XHJcbiAgICBncm91cHNVbFNlbC5pbm5lckhUTUwgPSAnJztcclxuICAgIGdyb3Vwcy5mb3JFYWNoKChncm91cCkgPT4ge1xyXG4gICAgICBsZXQgYWN0aXZlO1xyXG4gICAgICBjb25zdCBoYXNoID0gZG9jdW1lbnQubG9jYXRpb24uaGFzaC5zcGxpdCgvWyMvXS8pO1xyXG4gICAgICBpZiAoaGFzaC5zb21lKGl0ZW0gPT4gaXRlbSA9PSBncm91cC5ncm91cF9pZCkpIHtcclxuICAgICAgICBwYWdlVGl0bGVTZWwuaW5uZXJUZXh0ID0gZ3JvdXAubmFtZTtcclxuICAgICAgICBhY3RpdmUgPSAnYWN0aXZlJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhY3RpdmUgPSAnJztcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBteVRlbXBsYXRlID0gYDxsaSBjbGFzcz0ke2FjdGl2ZX0+PGEgaHJlZj1cIiMke2dyb3VwLmdyb3VwX2lkfS9cIj4ke2dyb3VwLm5hbWV9IDxzcGFuIGNsYXNzPVwiYmFkZ2VcIiBkYXRhLWJhZGdlLWNhcHRpb249XCJcIj4ke2dyb3VwLmFtb3VudE9mVXNlcnN9PC9zcGFuPjwvYT48L2xpPmA7XHJcbiAgICAgIGdyb3Vwc1VsU2VsLmlubmVySFRNTCArPSBteVRlbXBsYXRlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgR3JvdXBzVmlldztcclxuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudCc7XHJcblxyXG5jb25zdCB1c2Vyc1RhYmxlQm9keVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdHJpcGVkJykucXVlcnlTZWxlY3RvcigndGJvZHknKTtcclxuXHJcbmNsYXNzIFVzZXJzVmlldyBleHRlbmRzIENvbXBvbmVudCB7XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLm9uKCdyZW5kZXJVc2VycycsIHRoaXMucmVuZGVyVXNlcnMuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcclxuICByZW5kZXJVc2Vycyh1c2Vycykge1xyXG4gICAgdXNlcnNUYWJsZUJvZHlTZWwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB1c2Vycy5mb3JFYWNoKCAodXNlcikgPT4ge1xyXG4gICAgICBsZXQgaGFzaCA9IGRvY3VtZW50LmxvY2F0aW9uLmhhc2guc3BsaXQoL1sjXFwvXS8pO1xyXG4gICAgICBpZiAoaGFzaC5zb21lKCAoaXRlbSkgPT4gaXRlbSA9PSB1c2VyLmdyb3VwX2lkKSkge1xyXG4gICAgICAgIGxldCBteVRlbXBsYXRlID0gYFxyXG4gICAgICAgIDx0ciBpZD1cIiR7dXNlci51c2VyX2lkfVwiPlxyXG4gICAgICAgICAgPHRkPiR7dXNlci5uYW1lfTwvdGQ+XHJcbiAgICAgICAgICA8dGQ+JHt1c2VyLnN0cmVldH08L3RkPlxyXG4gICAgICAgICAgPHRkPiR7dXNlci56aXBfY29kZX08L3RkPlxyXG4gICAgICAgICAgPHRkPiR7dXNlci5jaXR5fTwvdGQ+XHJcbiAgICAgICAgICA8dGQ+JHt1c2VyLnBob25lfTwvdGQ+XHJcbiAgICAgICAgPC90cj5cclxuICAgICAgICBgO1xyXG4gICAgICAgIHVzZXJzVGFibGVCb2R5U2VsLmlubmVySFRNTCArPSBteVRlbXBsYXRlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2Vyc1ZpZXc7IiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudCc7XHJcblxyXG5jb25zdCBuYXZBZGRTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbi1hZGQnKS5xdWVyeVNlbGVjdG9yKCdhJyk7XHJcbmNvbnN0IGJsYW5rR3JvdXBzU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI2dyb3VwcycpO1xyXG5cclxuY29uc3QgZ3JvdXBTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKTtcclxuXHJcbmNvbnN0IGZpcnN0TmFtZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNmaXJzdF9uYW1lJyk7XHJcbmNvbnN0IGxhc3ROYW1lU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI2xhc3RfbmFtZScpO1xyXG5jb25zdCBzdHJlZXRTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCcjc3RyZWV0Jyk7XHJcbmNvbnN0IHppcENvZGVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKS5xdWVyeVNlbGVjdG9yKCcjemlwX2NvZGUnKTtcclxuY29uc3QgY2l0eVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJyNjaXR5Jyk7XHJcbmNvbnN0IHBob25lU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI3Bob25lJyk7XHJcbmNvbnN0IHJhbmdlQ3JlZGl0U2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI3JhbmdlX2NyZWRpdCcpO1xyXG5cclxuY29uc3QgY3JlYXRlQnV0dG9uU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignI2NyZWF0ZV9idXR0b24nKTtcclxuXHJcbmNsYXNzIFBvc3RCbGFuayBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMub24oJ3Bvc3RTZW5kRGF0YScsIHRoaXMuaW5pdEJsYW5rLmJpbmQodGhpcyksIGRvY3VtZW50KTtcclxuICAgIG5hdkFkZFNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucG9zdFJlcXVlc3REYXRhLmJpbmQodGhpcyksIGZhbHNlKTtcclxuICAgIGNyZWF0ZUJ1dHRvblNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucG9zdEJsYW5rQ3JlYXRlLmJpbmQodGhpcyksIGZhbHNlKTtcclxuICAgIE0uTW9kYWwuaW5pdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKSwge30pO1xyXG4gIH1cclxuXHJcbiAgaW5pdEJsYW5rKGdyb3Vwcykge1xyXG4gICAgZmlyc3ROYW1lU2VsLnZhbHVlID0gJyc7XHJcbiAgICBsYXN0TmFtZVNlbC52YWx1ZSA9ICcnO1xyXG4gICAgc3RyZWV0U2VsLnZhbHVlID0gJyc7XHJcbiAgICB6aXBDb2RlU2VsLnZhbHVlID0gJyc7XHJcbiAgICBjaXR5U2VsLnZhbHVlID0gJyc7XHJcbiAgICBwaG9uZVNlbC52YWx1ZSA9ICcnO1xyXG4gICAgcmFuZ2VDcmVkaXRTZWwudmFsdWUgPSAnJztcclxuICAgIHRoaXMuZ3JvdXBzID0gZ3JvdXBzO1xyXG4gICAgTS51cGRhdGVUZXh0RmllbGRzKCk7XHJcblxyXG4gICAgYmxhbmtHcm91cHNTZWwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgKz0gJzxvcHRpb24gdmFsdWU9XCJcIiBkaXNhYmxlZCBzZWxlY3RlZD5DaG9vc2UgZ3JvdXA8L29wdGlvbj4nO1xyXG4gICAgZ3JvdXBzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgYmxhbmtHcm91cHNTZWwuaW5uZXJIVE1MICs9IGA8b3B0aW9uIHZhbHVlPVwiJHtpdGVtLmdyb3VwX2lkfVwiIGlkPVwiJHtpdGVtLmdyb3VwX2lkfVwiPiR7aXRlbS5uYW1lfTwvb3B0aW9uPmA7XHJcbiAgICB9KTtcclxuICAgIE0uRm9ybVNlbGVjdC5pbml0KGdyb3VwU2VsLCB7fSk7XHJcblxyXG4gICAgY29uc3QgbWF0ZXJpYWxHcm91cFVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsQWRkJykucXVlcnlTZWxlY3RvcignLnNlbGVjdC13cmFwcGVyJykucXVlcnlTZWxlY3RvcigndWwnKTtcclxuICAgIEFycmF5LmZyb20obWF0ZXJpYWxHcm91cFVsLmNoaWxkcmVuKS5mb3JFYWNoKChsaSkgPT4ge1xyXG4gICAgICBsaS5vbmNsaWNrID0gdGhpcy5ncm91cENob29zZWQuYmluZCh0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIHBvc3RSZXF1ZXN0RGF0YSgpIHtcclxuICAgIHRoaXMuZW1pdCgncG9zdFJlcXVlc3REYXRhJywgbnVsbCwgZG9jdW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZ3JvdXBDaG9vc2VkKCkge1xyXG4gICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5pbml0KGdyb3VwU2VsLCB7fSk7XHJcbiAgICB0aGlzLmluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmdldEluc3RhbmNlKGdyb3VwU2VsKTtcclxuICAgIGNvbnN0IGdyb3VwSWQgPSB0aGlzLmluc3RhbmNlLmdldFNlbGVjdGVkVmFsdWVzKClbMF07XHJcbiAgICBpZiAoZ3JvdXBJZCkge1xyXG4gICAgICBjb25zdCBzZWxlY3RlZEdyb3VwID0gdGhpcy5ncm91cHMuZmluZChpdGVtID0+IGl0ZW0uZ3JvdXBfaWQgPT0gZ3JvdXBJZCk7XHJcbiAgICAgIGlmIChzZWxlY3RlZEdyb3VwICYmIHNlbGVjdGVkR3JvdXAuaXNfYWRtaW4pIHtcclxuICAgICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmFuZ2VDcmVkaXRTZWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1hdGVyaWFsR3JvdXBVbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEFkZCcpLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3Qtd3JhcHBlcicpLnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7XHJcbiAgICBBcnJheS5mcm9tKG1hdGVyaWFsR3JvdXBVbC5jaGlsZHJlbikuZm9yRWFjaCgobGkpID0+IHtcclxuICAgICAgbGkub25jbGljayA9IHRoaXMuZ3JvdXBDaG9vc2VkLmJpbmQodGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHBvc3RCbGFua0NyZWF0ZSgpIHtcclxuICAgIHRoaXMuaW5zdGFuY2UgPSBNLkZvcm1TZWxlY3QuaW5pdChncm91cFNlbCwge30pO1xyXG4gICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5nZXRJbnN0YW5jZShncm91cFNlbCk7XHJcblxyXG4gICAgY29uc3QgdGVtcFVzZXIgPSB7fTtcclxuICAgIFt0ZW1wVXNlci5ncm91cF9pZF0gPSB0aGlzLmluc3RhbmNlLmdldFNlbGVjdGVkVmFsdWVzKCk7XHJcbiAgICAvLyB0ZW1wVXNlci5ncm91cF9pZCA9IHRoaXMuaW5zdGFuY2UuZ2V0U2VsZWN0ZWRWYWx1ZXMoKVswXTtcclxuICAgIHRlbXBVc2VyLm5hbWUgPSBgJHtmaXJzdE5hbWVTZWwudmFsdWV9ICR7bGFzdE5hbWVTZWwudmFsdWV9YDtcclxuICAgIHRlbXBVc2VyLnN0cmVldCA9IHN0cmVldFNlbC52YWx1ZTtcclxuICAgIHRlbXBVc2VyLnppcF9jb2RlID0gemlwQ29kZVNlbC52YWx1ZTtcclxuICAgIHRlbXBVc2VyLmNpdHkgPSBjaXR5U2VsLnZhbHVlO1xyXG4gICAgdGVtcFVzZXIucGhvbmUgPSBwaG9uZVNlbC52YWx1ZTtcclxuICAgIHRlbXBVc2VyLmNyZWRpdHMgPSByYW5nZUNyZWRpdFNlbC52YWx1ZTtcclxuICAgIHRoaXMuZW1pdCgnZmV0Y2hQb3N0UmVxdWVzdCcsIHRlbXBVc2VyLCBkb2N1bWVudCk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9zdEJsYW5rOyIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xyXG5cclxuY29uc3QgbW9kYWxFZGl0U2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpO1xyXG5cclxuY29uc3QgYmxhbmtHcm91cHNTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI2dyb3VwcycpO1xyXG5cclxuY29uc3QgZ3JvdXBTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XHJcblxyXG5jb25zdCBmaXJzdE5hbWVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI2ZpcnN0X25hbWUnKTtcclxuY29uc3QgbGFzdE5hbWVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI2xhc3RfbmFtZScpO1xyXG5jb25zdCBzdHJlZXRTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI3N0cmVldCcpO1xyXG5jb25zdCB6aXBDb2RlU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJyN6aXBfY29kZScpO1xyXG5jb25zdCBjaXR5U2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJyNjaXR5Jyk7XHJcbmNvbnN0IHBob25lU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJyNwaG9uZScpO1xyXG5jb25zdCByYW5nZUNyZWRpdFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKS5xdWVyeVNlbGVjdG9yKCcjcmFuZ2VfY3JlZGl0Jyk7XHJcbmNvbnN0IGlkQ29udGFpbmVyU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jb250ZW50Jyk7XHJcblxyXG5jb25zdCB1cGRhdGVCdXR0b25TZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignI3VwZGF0ZV9idXR0b24nKTtcclxuXHJcbmNvbnN0IG1haW5UYWJsZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xyXG5cclxuY2xhc3MgRWRpdEJsYW5rIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBpbml0KCkge1xyXG4gICAgbWFpblRhYmxlU2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgdGhpcy5kYmxDbGlja0xpc3RlbmVyRnVuLmJpbmQodGhpcyksIGZhbHNlKTtcclxuICAgIHRoaXMub24oJ2VkaXRTZW5kRGF0YScsIHRoaXMuaW5pdEJsYW5rLmJpbmQodGhpcyksIGRvY3VtZW50KTtcclxuICAgIE0uTW9kYWwuaW5pdChtb2RhbEVkaXRTZWwsIHt9KTtcclxuICAgIHVwZGF0ZUJ1dHRvblNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZWRpdEJsYW5rVXBkYXRlLmJpbmQodGhpcyksIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIGRibENsaWNrTGlzdGVuZXJGdW4oZSkge1xyXG4gICAgdGhpcy5lbWl0KCdlZGl0UmVxdWVzdERhdGEnLCBlLnRhcmdldC5wYXJlbnROb2RlLmlkLCBkb2N1bWVudCk7XHJcbiAgfVxyXG5cclxuICBpbml0QmxhbmsocGFyYW1zKSB7XHJcbiAgICBjb25zdCB1c2VyID0gcGFyYW1zWzBdO1xyXG4gICAgdGhpcy5ncm91cHMgPSBwYXJhbXNbMV07XHJcbiAgICAvLyBjb25zdCB1c2VyO1xyXG4gICAgLy8gW3VzZXIsIHRoaXMuZ3JvdXBzXSA9IHBhcmFtcztcclxuICAgIGNvbnN0IGNob29zZWRHcm91cCA9IHRoaXMuZ3JvdXBzLmZpbmQoaXRlbSA9PiBpdGVtLmdyb3VwX2lkID09IHVzZXIuZ3JvdXBfaWQpO1xyXG4gICAgYmxhbmtHcm91cHNTZWwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgKz0gYDxvcHRpb24gdmFsdWU9XCIke3VzZXIuZ3JvdXBfaWR9XCIgZGlzYWJsZWQgc2VsZWN0ZWQ+JHtjaG9vc2VkR3JvdXAubmFtZX08L29wdGlvbj5gO1xyXG4gICAgdGhpcy5ncm91cHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgKz0gYDxvcHRpb24gdmFsdWU9XCIke2l0ZW0uZ3JvdXBfaWR9XCIgaWQ9XCIke2l0ZW0uZ3JvdXBfaWR9XCI+JHtpdGVtLm5hbWV9PC9vcHRpb24+YDtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChjaG9vc2VkR3JvdXAuaXNfYWRtaW4pIHtcclxuICAgICAgcmFuZ2VDcmVkaXRTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmFuZ2VDcmVkaXRTZWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZENvbnRhaW5lclNlbC5pZCA9IHVzZXIudXNlcl9pZDtcclxuICAgIGNvbnN0IGZ1bGxuYW1lID0gdXNlci5uYW1lLnNwbGl0KCcgJyk7XHJcbiAgICBmaXJzdE5hbWVTZWwudmFsdWUgPSBmdWxsbmFtZVswXTtcclxuICAgIGZ1bGxuYW1lLnNwbGljZSgwLCAxKTtcclxuICAgIGxhc3ROYW1lU2VsLnZhbHVlID0gZnVsbG5hbWUuam9pbignICcpO1xyXG4gICAgc3RyZWV0U2VsLnZhbHVlID0gdXNlci5zdHJlZXQ7XHJcbiAgICB6aXBDb2RlU2VsLnZhbHVlID0gdXNlci56aXBfY29kZTtcclxuICAgIGNpdHlTZWwudmFsdWUgPSB1c2VyLmNpdHk7XHJcbiAgICBwaG9uZVNlbC52YWx1ZSA9IHVzZXIucGhvbmU7XHJcbiAgICByYW5nZUNyZWRpdFNlbC52YWx1ZSA9IHVzZXIuY3JlZGl0cztcclxuXHJcbiAgICBpZiAocmFuZ2VDcmVkaXRTZWwudmFsdWUgPT0gMCkge1xyXG4gICAgICBmaXJzdE5hbWVTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICBsYXN0TmFtZVNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIHN0cmVldFNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIHppcENvZGVTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICBjaXR5U2VsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgcGhvbmVTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIGJsYW5rR3JvdXBzU2VsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZpcnN0TmFtZVNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBsYXN0TmFtZVNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBzdHJlZXRTZWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgemlwQ29kZVNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBjaXR5U2VsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIHBob25lU2VsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIHJhbmdlQ3JlZGl0U2VsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGJsYW5rR3JvdXBzU2VsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNob29zZWRHcm91cC5pc19hZG1pbikge1xyXG4gICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIE0uRm9ybVNlbGVjdC5pbml0KGdyb3VwU2VsLCB7fSk7XHJcblxyXG4gICAgTS51cGRhdGVUZXh0RmllbGRzKCk7XHJcblxyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBNLk1vZGFsLmdldEluc3RhbmNlKG1vZGFsRWRpdFNlbCk7XHJcbiAgICBpbnN0YW5jZS5vcGVuKCk7XHJcblxyXG4gICAgY29uc3QgbWF0ZXJpYWxHcm91cFVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsRWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3Qtd3JhcHBlcicpLnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7XHJcbiAgICBBcnJheS5mcm9tKG1hdGVyaWFsR3JvdXBVbC5jaGlsZHJlbikuZm9yRWFjaCgobGkpID0+IHtcclxuICAgICAgbGkub25jbGljayA9IHRoaXMuZ3JvdXBDaG9vc2VkLmJpbmQodGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBlZGl0QmxhbmtVcGRhdGUoKSB7XHJcbiAgICB0aGlzLmluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmluaXQoZ3JvdXBTZWwsIHt9KTtcclxuICAgIHRoaXMuaW5zdGFuY2UgPSBNLkZvcm1TZWxlY3QuZ2V0SW5zdGFuY2UoZ3JvdXBTZWwpO1xyXG5cclxuICAgIGNvbnN0IHRlbXBVc2VyID0ge307XHJcbiAgICB0ZW1wVXNlci51c2VyX2lkID0gaWRDb250YWluZXJTZWwuaWQ7XHJcbiAgICB0ZW1wVXNlci5ncm91cF9pZCA9IHRoaXMuaW5zdGFuY2UuZ2V0U2VsZWN0ZWRWYWx1ZXMoKVswXTtcclxuICAgIHRlbXBVc2VyLm5hbWUgPSBgJHtmaXJzdE5hbWVTZWwudmFsdWV9ICR7bGFzdE5hbWVTZWwudmFsdWV9YDtcclxuICAgIHRlbXBVc2VyLnN0cmVldCA9IHN0cmVldFNlbC52YWx1ZTtcclxuICAgIHRlbXBVc2VyLnppcF9jb2RlID0gemlwQ29kZVNlbC52YWx1ZTtcclxuICAgIHRlbXBVc2VyLmNpdHkgPSBjaXR5U2VsLnZhbHVlO1xyXG4gICAgdGVtcFVzZXIucGhvbmUgPSBwaG9uZVNlbC52YWx1ZTtcclxuICAgIHRlbXBVc2VyLmNyZWRpdHMgPSByYW5nZUNyZWRpdFNlbC52YWx1ZTtcclxuICAgIHRoaXMuZW1pdCgnZmV0Y2hQdXRSZXF1ZXN0JywgdGVtcFVzZXIsIGRvY3VtZW50KTtcclxuICB9XHJcblxyXG4gIGdyb3VwQ2hvb3NlZCgpIHtcclxuICAgIHRoaXMuaW5zdGFuY2UgPSBNLkZvcm1TZWxlY3QuaW5pdChncm91cFNlbCwge30pO1xyXG4gICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5nZXRJbnN0YW5jZShncm91cFNlbCk7XHJcbiAgICBjb25zdCBncm91cElkID0gdGhpcy5pbnN0YW5jZS5nZXRTZWxlY3RlZFZhbHVlcygpWzBdO1xyXG4gICAgaWYgKGdyb3VwSWQpIHtcclxuICAgICAgY29uc3Qgc2VsZWN0ZWRHcm91cCA9IHRoaXMuZ3JvdXBzLmZpbmQoaXRlbSA9PiBpdGVtLmdyb3VwX2lkID09IGdyb3VwSWQpO1xyXG4gICAgICBpZiAoc2VsZWN0ZWRHcm91cCAmJiBzZWxlY3RlZEdyb3VwLmlzX2FkbWluKSB7XHJcbiAgICAgICAgcmFuZ2VDcmVkaXRTZWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJhbmdlQ3JlZGl0U2VsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBtYXRlcmlhbEdyb3VwVWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxFZGl0JykucXVlcnlTZWxlY3RvcignLnNlbGVjdC13cmFwcGVyJykucXVlcnlTZWxlY3RvcigndWwnKTtcclxuICAgIEFycmF5LmZyb20obWF0ZXJpYWxHcm91cFVsLmNoaWxkcmVuKS5mb3JFYWNoKChsaSkgPT4ge1xyXG4gICAgICBsaS5vbmNsaWNrID0gdGhpcy5ncm91cENob29zZWQuYmluZCh0aGlzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEVkaXRCbGFuazsiLCJpbXBvcnQgRGF0YVN0b3JlIGZyb20gJy4vZGF0YV9zdG9yZSc7XHJcbmltcG9ydCBNeVdlYlNvY2tldCBmcm9tICcuL3dlYl9zb2NrZXQnO1xyXG5pbXBvcnQgR3JvdXBzVmlldyBmcm9tICcuL2dyb3Vwc192aWV3JztcclxuaW1wb3J0IFVzZXJzVmlldyBmcm9tICcuL3VzZXJzX3ZpZXcnO1xyXG5pbXBvcnQgUG9zdEJsYW5rIGZyb20gJy4vcG9zdF9ibGFuayc7XHJcbmltcG9ydCBFZGl0QmxhbmsgZnJvbSAnLi9lZGl0X2JsYW5rJztcclxuXHJcbkRhdGFTdG9yZS5iaW5kVG8oZG9jdW1lbnQpO1xyXG5NeVdlYlNvY2tldC5iaW5kVG8oZG9jdW1lbnQpO1xyXG5Hcm91cHNWaWV3LmJpbmRUbyhkb2N1bWVudCk7XHJcblVzZXJzVmlldy5iaW5kVG8oZG9jdW1lbnQpO1xyXG5Qb3N0QmxhbmsuYmluZFRvKGRvY3VtZW50KTtcclxuRWRpdEJsYW5rLmJpbmRUbyhkb2N1bWVudCk7Il0sInNvdXJjZVJvb3QiOiIifQ==