!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);class i{constructor(e){this.element=e}on(e,t,s=this.element){s.addEventListener(e,e=>t(e.detail))}emit(e,t,s=this.element){const i=new CustomEvent(e,{detail:t});s.dispatchEvent(i)}static bindTo(e){let t=e;if("string"==typeof e&&(t=document.querySelector(e)),!(t instanceof HTMLElement||t instanceof HTMLDocument))throw new Error("cannot bound component");new this(t).init()}init(){throw new Error("Must be implemented!")}}class n{constructor(e){this.user_id=parseFloat(e.user_id),this.group_id=parseFloat(e.group_id),this.name=e.name,this.street=e.street,this.zip_code=parseFloat(e.zip_code),this.city=e.city,this.phone=e.phone,this.credits=parseFloat(e.credits)}}class o{constructor(e){this.group_id=e.group_id,this.name=e.name,this.is_admin=e.is_admin}}var l=class extends i{init(){this.users=[],this.groups=[],this.on("actionEvent",this.actionEventFun.bind(this),document),this.on("renderInit",this.renderInitFun.bind(this),document),this.on("postRequestData",this.postBlankEmit.bind(this),document),this.on("editRequestData",this.editBlankEmit.bind(this),document),this.on("fetchPostRequest",this.postUserRequest.bind(this),document),this.on("fetchPutRequest",this.putUserRequest.bind(this),document)}renderInitFun(){this.sortData(),this.emit("renderGroups",this.groups,document),this.emit("renderUsers",this.users,document)}actionEventFun(e){const t=e.action.split(":");"updated"===t[1]&&this.fetchFun(e),"removed"===t[1]&&("user"===t[0]&&this.userDelete(e.id),"group"===t[0]&&this.groupDelete(e.id))}userDelete(e){const t=this.users.find(t=>t.user_id===e),s=this.users.indexOf(t);this.users.splice(s,1),this.emit("renderInit",null,document)}groupDelete(e){const t=this.groups.find(t=>t.group_id===e),s=this.groups.indexOf(t);this.groups.splice(s,1),this.emit("renderInit",null,document)}fetchFun(e){const t=e.action.split(":"),{id:s}=e,i=`https://ums-honeybadger.herokuapp.com/${t[0]}/${s}`;fetch(i).then(e=>{if(200!==e.status)throw new Error;return e.json()}).then(e=>{"user"===t[0]&&this.addUser(e),"group"===t[0]&&this.addGroup(e),this.emit("renderInit",null,document)}).catch(console.log)}addUser(e){const t=this.users.find(t=>t.user_id===e.user_id);if(t){const e=this.users.indexOf(t);this.users.splice(e,1)}this.users.push(new n(e)),this.countUsersInGroups()}addGroup(e){this.groups.push(new o(e)),this.countUsersInGroups()}countUsersInGroups(){this.groups.forEach(e=>{e.amountOfUsers=this.users.reduce((t,s)=>s.group_id===e.group_id?t+1:t,0)})}putUserRequest(e){const t=`https://ums-honeybadger.herokuapp.com/user/${e.user_id}`,s=new n(e);fetch(t,{method:"put",body:JSON.stringify(s)}).then(e=>{if(200!==e.status)throw new Error}).catch(console.log)}postUserRequest(e){const t=new n(e);t.user_id=void 0,fetch("https://ums-honeybadger.herokuapp.com/user",{method:"post",body:JSON.stringify(t)}).then(e=>{if(201!==e.status)throw new Error}).catch(console.log)}postBlankEmit(){this.emit("postSendData",this.groups,document)}editBlankEmit(e){const t=this.users.find(t=>t.user_id===parseFloat(e));this.emit("editSendData",[t,this.groups],document)}sortData(){this.users.sort((e,t)=>e.user_id-t.user_id),this.groups.sort((e,t)=>e.group_id-t.group_id)}};var r=class extends i{init(){this.socket=new WebSocket("ws://ums-honeybadger.herokuapp.com/ums"),this.socket.onmessage=this.onMessageFun.bind(this),this.socket.onopen=this.onOpenFun.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this)}onMessageFun(e){const t=JSON.parse(e.data);t.message&&console.log("MESSAGE - ",t.message),t.action&&this.emit("actionEvent",t,document)}onOpenFun(e){console.log(e)}onError(e){console.log(e)}onClose(e){console.log(e)}};const a=document.querySelector(".sidenav"),d=document.querySelector("#slide-out").querySelector("ul"),c=document.querySelector(".page-title");var u=class extends i{init(){M.Sidenav.init(a,{}),this.on("renderGroups",this.renderGroups.bind(this),document),window.onhashchange=(()=>{this.emit("renderInit",null,document)})}renderGroups(e){d.innerHTML="",e.forEach(e=>{let t;parseFloat(document.location.hash.split(/[#/]/)[1])===e.group_id?(c.innerText=e.name,t="active"):t="";const s=`<li class=${t}><a href="#${e.group_id}/">${e.name} <span class="badge" data-badge-caption="">${e.amountOfUsers}</span></a></li>`;d.innerHTML+=s})}};const h=document.querySelector(".striped").querySelector("tbody");var p=class extends i{init(){this.on("renderUsers",this.renderUsers.bind(this),document)}renderUsers(e){h.innerHTML="",e.forEach(e=>{if(parseFloat(document.location.hash.split(/[#/]/)[1])===e.group_id){const t=`\n        <tr id="${e.user_id}">\n          <td>${e.name}</td>\n          <td>${e.street}</td>\n          <td>${e.zip_code}</td>\n          <td>${e.city}</td>\n          <td>${e.phone}</td>\n        </tr>\n        `;h.innerHTML+=t}})}};const m=document.querySelector("#modalAdd"),v=document.querySelector(".navigation-add").querySelector("a");var S=class extends i{init(){this.on("postSendData",this.initBlank.bind(this),document),v.addEventListener("click",this.openModalPost.bind(this),!1)}openModalPost(){m.innerHTML='\n    <div class="modal-content">\n        <h4>Add new member</h4>\n        <div class="row">\n            <form class="col s12">\n                <div class="row">\n                    <div class="input-field col s6">\n                        <input id="first_name" type="text" class="validate">\n                        <label for="first_name">First Name</label>\n                    </div>\n                    <div class="input-field col s6">\n                        <input id="last_name" type="text" class="validate">\n                        <label for="last_name">Last Name</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s12">\n                        <input id="street" type="text" class="validate">\n                        <label for="street">Street</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s6">\n                        <input id="zip_code" type="text" class="validate">\n                        <label for="zip_code">Zip code</label>\n                    </div>\n                    <div class="input-field col s6">\n                        <input id="city" type="text" class="validate">\n                        <label for="city">City</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s12">\n                        <input id="phone" type="text" class="validate">\n                        <label for="phone">Phone number</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s12">\n                        <select id="groups">\n                            \n                        </select>\n                        <label>Group</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s12">\n                        <label for="range_credit">Credit</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s12">\n                        <input id="range_credit" type="range" min="0" max="1000" />\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <a id="close_button" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>\n        <a id="create_button" class="modal-action modal-close waves-effect waves-green btn-flat">Create</a>\n    </div>\n    ',M.Modal.init(m,{}),this.instance=M.Modal.getInstance(m),this.instance.open(),this.blankGroupsSel=m.querySelector("#groups"),this.groupSel=m.querySelector("select"),this.firstNameSel=m.querySelector("#first_name"),this.lastNameSel=m.querySelector("#last_name"),this.streetSel=m.querySelector("#street"),this.zipCodeSel=m.querySelector("#zip_code"),this.citySel=m.querySelector("#city"),this.phoneSel=m.querySelector("#phone"),this.rangeCreditSel=m.querySelector("#range_credit"),this.createButtonSel=m.querySelector("#create_button"),this.modalOverlaySel=document.querySelector(".modal-overlay"),this.closeButtonSel=m.querySelector("#close_button"),this.createButtonSel.addEventListener("click",this.postBlankCreate.bind(this),!1),this.closeButtonSel.addEventListener("click",this.closeModalFun.bind(this),!1),this.modalOverlaySel.addEventListener("click",this.closeModalFun.bind(this),!1),this.createButtonSel.addEventListener("click",this.closeModalFun.bind(this),!1),M.Range.init(this.rangeCreditSel,{}),this.emit("postRequestData",null,document)}initBlank(e){this.groups=e,this.blankGroupsSel.innerHTML="",this.blankGroupsSel.innerHTML+='<option value="" disabled selected>Choose group</option>',e.forEach(e=>{this.blankGroupsSel.innerHTML+=`<option value="${e.group_id}" id="${e.group_id}">${e.name}</option>`}),M.FormSelect.init(this.groupSel,{})}postBlankCreate(){this.instance=M.FormSelect.init(this.groupSel,{}),this.instance=M.FormSelect.getInstance(this.groupSel);const e={};[e.group_id]=this.instance.getSelectedValues(),e.name=`${this.firstNameSel.value} ${this.lastNameSel.value}`,e.street=this.streetSel.value,e.zip_code=this.zipCodeSel.value,e.city=this.citySel.value,e.phone=this.phoneSel.value,e.credits=this.rangeCreditSel.value,this.emit("fetchPostRequest",e,document)}closeModalFun(){m.innerHTML=""}};const b=document.querySelector("#modalEdit"),f=document.querySelector("main").querySelector("tbody");var g=class extends i{init(){f.addEventListener("dblclick",this.openModalEdit.bind(this),!1),this.on("editSendData",this.initBlank.bind(this),document)}openModalEdit(e){b.innerHTML='\n    <div class="modal-content">\n        <h4>Edit member</h4>\n        <div class="row">\n            <form class="col s12">\n                <div class="row">\n                    <div class="input-field col s6">\n                        <input id="first_name" type="text" class="validate">\n                        <label for="first_name">First Name</label>\n                    </div>\n                    <div class="input-field col s6">\n                        <input id="last_name" type="text" class="validate">\n                        <label for="last_name">Last Name</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s12">\n                        <input id="street" type="text" class="validate">\n                        <label for="street">Street</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s6">\n                        <input id="zip_code" type="text" class="validate">\n                        <label for="zip_code">Zip code</label>\n                    </div>\n                    <div class="input-field col s6">\n                        <input id="city" type="text" class="validate">\n                        <label for="city">City</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s12">\n                        <input id="phone" type="text" class="validate">\n                        <label for="phone">Phone number</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s12">\n                        <select id="groups">\n\n                        </select>\n                        <label>Group</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s12">\n                        <label for="range_credit">Credit</label>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="input-field col s12">\n                        <input id="range_credit" type="range" min="0" max="1000" />\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <a id="close_button" class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>\n        <a id="update_button" class="modal-action modal-close waves-effect waves-green btn-flat">Update</a>\n    </div>\n    ',M.Modal.init(b,{}),this.instance=M.Modal.getInstance(b),this.instance.open(),this.blankGroupsSel=b.querySelector("#groups"),this.groupSel=b.querySelector("select"),this.firstNameSel=b.querySelector("#first_name"),this.lastNameSel=b.querySelector("#last_name"),this.streetSel=b.querySelector("#street"),this.zipCodeSel=b.querySelector("#zip_code"),this.citySel=b.querySelector("#city"),this.phoneSel=b.querySelector("#phone"),this.rangeCreditSel=b.querySelector("#range_credit"),this.idContainerSel=b.querySelector(".modal-content"),this.modalOverlaySel=document.querySelector(".modal-overlay"),this.updateButtonSel=b.querySelector("#update_button"),this.closeButtonSel=b.querySelector("#close_button"),M.Range.init(this.rangeCreditSel,{}),this.emit("editRequestData",e.target.parentNode.id,document),this.updateButtonSel.addEventListener("click",this.editBlankUpdate.bind(this),!1),this.closeButtonSel.addEventListener("click",this.closeModalFun.bind(this),!1),this.updateButtonSel.addEventListener("click",this.closeModalFun.bind(this),!1),this.modalOverlaySel.addEventListener("click",this.closeModalFun.bind(this),!1)}initBlank(e){[this.user,this.groups]=e;const t=this.groups.find(e=>e.group_id===this.user.group_id);this.blankGroupsSel.innerHTML="",this.blankGroupsSel.innerHTML+=`<option value="${this.user.group_id}" disabled selected>${t.name}</option>`,this.groups.forEach(e=>{this.blankGroupsSel.innerHTML+=`<option value="${e.group_id}" id="${e.group_id}">${e.name}</option>`}),this.idContainerSel.id=this.user.user_id;const s=this.user.name.split(" ");[this.firstNameSel.value]=s,s.splice(0,1),this.lastNameSel.value=s.join(" "),this.streetSel.value=this.user.street,this.zipCodeSel.value=this.user.zip_code,this.citySel.value=this.user.city,this.phoneSel.value=this.user.phone,this.rangeCreditSel.value=this.user.credits,0===parseFloat(this.rangeCreditSel.value)?(this.firstNameSel.disabled=!0,this.lastNameSel.disabled=!0,this.streetSel.disabled=!0,this.zipCodeSel.disabled=!0,this.citySel.disabled=!0,this.phoneSel.disabled=!0,this.rangeCreditSel.disabled=!0,this.blankGroupsSel.disabled=!0):(this.firstNameSel.disabled=!1,this.lastNameSel.disabled=!1,this.streetSel.disabled=!1,this.zipCodeSel.disabled=!1,this.citySel.disabled=!1,this.phoneSel.disabled=!1,this.rangeCreditSel.disabled=!1,this.blankGroupsSel.disabled=!1),t.is_admin&&(this.rangeCreditSel.disabled=!0),M.FormSelect.init(this.groupSel,{}),M.updateTextFields()}editBlankUpdate(){this.instance=M.FormSelect.init(this.groupSel,{}),this.instance=M.FormSelect.getInstance(this.groupSel);const e={};e.user_id=this.idContainerSel.id,[e.group_id]=this.instance.getSelectedValues(),e.name=`${this.firstNameSel.value} ${this.lastNameSel.value}`,e.street=this.streetSel.value,e.zip_code=this.zipCodeSel.value,e.city=this.citySel.value,e.phone=this.phoneSel.value,e.credits=this.rangeCreditSel.value,this.emit("fetchPutRequest",e,document)}closeModalFun(){b.innerHTML=""}};l.bindTo(document),r.bindTo(document),u.bindTo(document),p.bindTo(document),S.bindTo(document),g.bindTo(document)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vanMvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL2pzL2RhdGFfc3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvd2ViX3NvY2tldC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9ncm91cHNfdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9qcy91c2Vyc192aWV3LmpzIiwid2VicGFjazovLy8uL2pzL3Bvc3RfYmxhbmsuanMiLCJ3ZWJwYWNrOi8vLy4vanMvZWRpdF9ibGFuay5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYWluLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDb21wb25lbnQiLCJbb2JqZWN0IE9iamVjdF0iLCJlbGVtZW50IiwidGhpcyIsImV2ZW50VHlwZSIsImNhbGxiYWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZGV0YWlsIiwiZGF0YSIsIkN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTEVsZW1lbnQiLCJIVE1MRG9jdW1lbnQiLCJFcnJvciIsImluaXQiLCJkYXRhX3N0b3JlX1VzZXJPYmoiLCJ1c2VyIiwidXNlcl9pZCIsInBhcnNlRmxvYXQiLCJncm91cF9pZCIsInN0cmVldCIsInppcF9jb2RlIiwiY2l0eSIsInBob25lIiwiY3JlZGl0cyIsImRhdGFfc3RvcmVfR3JvdXBPYmoiLCJnIiwiaXNfYWRtaW4iLCJkYXRhX3N0b3JlIiwidXNlcnMiLCJncm91cHMiLCJvbiIsImFjdGlvbkV2ZW50RnVuIiwiYmluZCIsInJlbmRlckluaXRGdW4iLCJwb3N0QmxhbmtFbWl0IiwiZWRpdEJsYW5rRW1pdCIsInBvc3RVc2VyUmVxdWVzdCIsInB1dFVzZXJSZXF1ZXN0Iiwic29ydERhdGEiLCJlbWl0IiwiYWN0aW9uIiwic3BsaXQiLCJmZXRjaEZ1biIsInVzZXJEZWxldGUiLCJpZCIsImdyb3VwRGVsZXRlIiwidGVtcCIsImZpbmQiLCJpdGVtIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwidXJsIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJqc29uIiwiYWRkVXNlciIsImFkZEdyb3VwIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwicHVzaCIsImNvdW50VXNlcnNJbkdyb3VwcyIsImdyb3VwIiwiZm9yRWFjaCIsImFtb3VudE9mVXNlcnMiLCJyZWR1Y2UiLCJhY2MiLCJjdXIiLCJvYmoiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVuZGVmaW5lZCIsInNvcnQiLCJhIiwiYiIsIndlYl9zb2NrZXQiLCJzb2NrZXQiLCJXZWJTb2NrZXQiLCJvbm1lc3NhZ2UiLCJvbk1lc3NhZ2VGdW4iLCJvbm9wZW4iLCJvbk9wZW5GdW4iLCJvbmVycm9yIiwib25FcnJvciIsIm9uY2xvc2UiLCJvbkNsb3NlIiwibWVzc2FnZSIsInBhcnNlIiwiZSIsImdyb3Vwc192aWV3X3NpZGVuYXYiLCJncm91cHNfdmlld19ncm91cHNVbFNlbCIsImdyb3Vwc192aWV3X3BhZ2VUaXRsZVNlbCIsImdyb3Vwc192aWV3IiwiTSIsIlNpZGVuYXYiLCJyZW5kZXJHcm91cHMiLCJ3aW5kb3ciLCJvbmhhc2hjaGFuZ2UiLCJpbm5lckhUTUwiLCJhY3RpdmUiLCJsb2NhdGlvbiIsImhhc2giLCJpbm5lclRleHQiLCJteVRlbXBsYXRlIiwidXNlcnNfdmlld191c2Vyc1RhYmxlQm9keVNlbCIsInVzZXJzX3ZpZXciLCJyZW5kZXJVc2VycyIsInBvc3RfYmxhbmtfbW9kYWxBZGRTZWwiLCJwb3N0X2JsYW5rX29wZW5Nb2RhbFNlbCIsInBvc3RfYmxhbmsiLCJpbml0QmxhbmsiLCJvcGVuTW9kYWxQb3N0IiwiTW9kYWwiLCJpbnN0YW5jZSIsImdldEluc3RhbmNlIiwib3BlbiIsImJsYW5rR3JvdXBzU2VsIiwiZ3JvdXBTZWwiLCJmaXJzdE5hbWVTZWwiLCJsYXN0TmFtZVNlbCIsInN0cmVldFNlbCIsInppcENvZGVTZWwiLCJjaXR5U2VsIiwicGhvbmVTZWwiLCJyYW5nZUNyZWRpdFNlbCIsImNyZWF0ZUJ1dHRvblNlbCIsIm1vZGFsT3ZlcmxheVNlbCIsImNsb3NlQnV0dG9uU2VsIiwicG9zdEJsYW5rQ3JlYXRlIiwiY2xvc2VNb2RhbEZ1biIsIlJhbmdlIiwiRm9ybVNlbGVjdCIsInRlbXBVc2VyIiwiZ2V0U2VsZWN0ZWRWYWx1ZXMiLCJlZGl0X2JsYW5rX21vZGFsRWRpdFNlbCIsImVkaXRfYmxhbmtfbWFpblRhYmxlU2VsIiwiZWRpdF9ibGFuayIsIm9wZW5Nb2RhbEVkaXQiLCJpZENvbnRhaW5lclNlbCIsInVwZGF0ZUJ1dHRvblNlbCIsInRhcmdldCIsInBhcmVudE5vZGUiLCJlZGl0QmxhbmtVcGRhdGUiLCJwYXJhbXMiLCJjaG9vc2VkR3JvdXAiLCJmdWxsbmFtZSIsImpvaW4iLCJkaXNhYmxlZCIsInVwZGF0ZVRleHRGaWVsZHMiLCJiaW5kVG8iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVB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YUFBQXpJLFNBQTJCWSxLQUFBOEgsWUFBQTFJLFFBQ2xEdUosRUFBQXRILE9BQUFyQixLQUFBK0gsVUFBQTNJLE1BQ0F1SixFQUFBckgsU0FBQXRCLEtBQUFnSSxXQUFBNUksTUFDQXVKLEVBQUFwSCxLQUFBdkIsS0FBQWlJLFFBQUE3SSxNQUNBdUosRUFBQW5ILE1BQUF4QixLQUFBa0ksU0FBQTlJLE1BQ0F1SixFQUFBbEgsUUFBQXpCLEtBQUFtSSxlQUFBL0ksTUFDQVksS0FBQXlDLEtBQUEsa0JBQUFrRyxFQUFBakksVUFJQVosZ0JBQ0ErSSxFQUFBcEMsVUFBQSxLQ3BLQTVFLEVBQUErSCxPQUFBbEosVUFDQXdFLEVBQUEwRSxPQUFBbEosVUFDQXlGLEVBQUF5RCxPQUFBbEosVUFDQXNHLEVBQUE0QyxPQUFBbEosVUFDQTBHLEVBQUF3QyxPQUFBbEosVUFDQXFJLEVBQUFhLE9BQUFsSiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIH1cblxuICBvbihldmVudFR5cGUsIGNhbGxiYWNrLCBlbGVtZW50ID0gdGhpcy5lbGVtZW50KSB7XG4gICAgY29uc3QgY2JXcmFwID0gZXZlbnQgPT4gY2FsbGJhY2soZXZlbnQuZGV0YWlsKTtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYldyYXApO1xuICB9XG5cbiAgZW1pdChldmVudFR5cGUsIGRhdGEsIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQpIHtcbiAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudChldmVudFR5cGUsIHsgZGV0YWlsOiBkYXRhIH0pO1xuICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH1cblxuICBzdGF0aWMgYmluZFRvKHNlbGVjdG9yKSB7XG4gICAgbGV0IGVsZW1lbnQgPSBzZWxlY3RvcjtcbiAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIH1cblxuICAgIGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBlbGVtZW50IGluc3RhbmNlb2YgSFRNTERvY3VtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3QgYm91bmQgY29tcG9uZW50Jyk7XG4gICAgfVxuXG4gICAgKG5ldyB0aGlzKGVsZW1lbnQpKS5pbml0KCk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBpbml0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBiZSBpbXBsZW1lbnRlZCEnKTtcbiAgfVxufVxuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudCc7XG5cbmNsYXNzIFVzZXJPYmoge1xuICBjb25zdHJ1Y3Rvcih1c2VyKSB7XG4gICAgdGhpcy51c2VyX2lkID0gcGFyc2VGbG9hdCh1c2VyLnVzZXJfaWQpO1xuICAgIHRoaXMuZ3JvdXBfaWQgPSBwYXJzZUZsb2F0KHVzZXIuZ3JvdXBfaWQpO1xuICAgIHRoaXMubmFtZSA9IHVzZXIubmFtZTtcbiAgICB0aGlzLnN0cmVldCA9IHVzZXIuc3RyZWV0O1xuICAgIHRoaXMuemlwX2NvZGUgPSBwYXJzZUZsb2F0KHVzZXIuemlwX2NvZGUpO1xuICAgIHRoaXMuY2l0eSA9IHVzZXIuY2l0eTtcbiAgICB0aGlzLnBob25lID0gdXNlci5waG9uZTtcbiAgICB0aGlzLmNyZWRpdHMgPSBwYXJzZUZsb2F0KHVzZXIuY3JlZGl0cyk7XG4gIH1cbn1cblxuY2xhc3MgR3JvdXBPYmoge1xuICBjb25zdHJ1Y3RvcihnKSB7XG4gICAgdGhpcy5ncm91cF9pZCA9IGcuZ3JvdXBfaWQ7XG4gICAgdGhpcy5uYW1lID0gZy5uYW1lO1xuICAgIHRoaXMuaXNfYWRtaW4gPSBnLmlzX2FkbWluO1xuICB9XG59XG5cbmNsYXNzIERhdGFTdG9yZSBleHRlbmRzIENvbXBvbmVudCB7XG4gIGluaXQoKSB7XG4gICAgdGhpcy51c2VycyA9IFtdO1xuICAgIHRoaXMuZ3JvdXBzID0gW107XG4gICAgdGhpcy5vbignYWN0aW9uRXZlbnQnLCB0aGlzLmFjdGlvbkV2ZW50RnVuLmJpbmQodGhpcyksIGRvY3VtZW50KTtcbiAgICB0aGlzLm9uKCdyZW5kZXJJbml0JywgdGhpcy5yZW5kZXJJbml0RnVuLmJpbmQodGhpcyksIGRvY3VtZW50KTtcbiAgICB0aGlzLm9uKCdwb3N0UmVxdWVzdERhdGEnLCB0aGlzLnBvc3RCbGFua0VtaXQuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xuICAgIHRoaXMub24oJ2VkaXRSZXF1ZXN0RGF0YScsIHRoaXMuZWRpdEJsYW5rRW1pdC5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XG4gICAgdGhpcy5vbignZmV0Y2hQb3N0UmVxdWVzdCcsIHRoaXMucG9zdFVzZXJSZXF1ZXN0LmJpbmQodGhpcyksIGRvY3VtZW50KTtcbiAgICB0aGlzLm9uKCdmZXRjaFB1dFJlcXVlc3QnLCB0aGlzLnB1dFVzZXJSZXF1ZXN0LmJpbmQodGhpcyksIGRvY3VtZW50KTtcbiAgfVxuXG4gIHJlbmRlckluaXRGdW4oKSB7XG4gICAgdGhpcy5zb3J0RGF0YSgpO1xuICAgIHRoaXMuZW1pdCgncmVuZGVyR3JvdXBzJywgdGhpcy5ncm91cHMsIGRvY3VtZW50KTtcbiAgICB0aGlzLmVtaXQoJ3JlbmRlclVzZXJzJywgdGhpcy51c2VycywgZG9jdW1lbnQpO1xuICB9XG5cbiAgYWN0aW9uRXZlbnRGdW4oZGF0YSkge1xuICAgIGNvbnN0IGFjdGlvbiA9IGRhdGEuYWN0aW9uLnNwbGl0KCc6Jyk7XG4gICAgaWYgKGFjdGlvblsxXSA9PT0gJ3VwZGF0ZWQnKSB7XG4gICAgICB0aGlzLmZldGNoRnVuKGRhdGEpO1xuICAgIH1cbiAgICBpZiAoYWN0aW9uWzFdID09PSAncmVtb3ZlZCcpIHtcbiAgICAgIGlmIChhY3Rpb25bMF0gPT09ICd1c2VyJykge1xuICAgICAgICB0aGlzLnVzZXJEZWxldGUoZGF0YS5pZCk7XG4gICAgICB9XG4gICAgICBpZiAoYWN0aW9uWzBdID09PSAnZ3JvdXAnKSB7XG4gICAgICAgIHRoaXMuZ3JvdXBEZWxldGUoZGF0YS5pZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXNlckRlbGV0ZShpZCkge1xuICAgIGNvbnN0IHRlbXAgPSB0aGlzLnVzZXJzLmZpbmQoaXRlbSA9PiBpdGVtLnVzZXJfaWQgPT09IGlkKTtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMudXNlcnMuaW5kZXhPZih0ZW1wKTtcbiAgICB0aGlzLnVzZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgdGhpcy5lbWl0KCdyZW5kZXJJbml0JywgbnVsbCwgZG9jdW1lbnQpO1xuICB9XG5cbiAgZ3JvdXBEZWxldGUoaWQpIHtcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5ncm91cHMuZmluZChpdGVtID0+IGl0ZW0uZ3JvdXBfaWQgPT09IGlkKTtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZ3JvdXBzLmluZGV4T2YodGVtcCk7XG4gICAgdGhpcy5ncm91cHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLmVtaXQoJ3JlbmRlckluaXQnLCBudWxsLCBkb2N1bWVudCk7XG4gIH1cblxuICBmZXRjaEZ1bihkYXRhKSB7XG4gICAgY29uc3QgYWN0aW9uID0gZGF0YS5hY3Rpb24uc3BsaXQoJzonKTtcbiAgICBjb25zdCB7IGlkIH0gPSBkYXRhO1xuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3Vtcy1ob25leWJhZGdlci5oZXJva3VhcHAuY29tLyR7YWN0aW9uWzBdfS8ke2lkfWA7XG4gICAgZmV0Y2godXJsKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgICAgaWYgKGFjdGlvblswXSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgdGhpcy5hZGRVc2VyKGpzb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3Rpb25bMF0gPT09ICdncm91cCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEdyb3VwKGpzb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgncmVuZGVySW5pdCcsIG51bGwsIGRvY3VtZW50KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xuICB9XG5cbiAgYWRkVXNlcih1c2VyKSB7XG4gICAgY29uc3QgdGVtcCA9IHRoaXMudXNlcnMuZmluZChpdGVtID0+IGl0ZW0udXNlcl9pZCA9PT0gdXNlci51c2VyX2lkKTtcbiAgICBpZiAodGVtcCkge1xuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnVzZXJzLmluZGV4T2YodGVtcCk7XG4gICAgICB0aGlzLnVzZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIHRoaXMudXNlcnMucHVzaChuZXcgVXNlck9iaih1c2VyKSk7XG4gICAgdGhpcy5jb3VudFVzZXJzSW5Hcm91cHMoKTtcbiAgfVxuXG4gIGFkZEdyb3VwKGdyb3VwKSB7XG4gICAgdGhpcy5ncm91cHMucHVzaChuZXcgR3JvdXBPYmooZ3JvdXApKTtcbiAgICB0aGlzLmNvdW50VXNlcnNJbkdyb3VwcygpO1xuICB9XG5cbiAgY291bnRVc2Vyc0luR3JvdXBzKCkge1xuICAgIHRoaXMuZ3JvdXBzLmZvckVhY2goKGdyb3VwKSA9PiB7XG4gICAgICBncm91cC5hbW91bnRPZlVzZXJzID0gdGhpcy51c2Vycy5yZWR1Y2UoKGFjYywgY3VyKSA9PiB7XG4gICAgICAgIGlmIChjdXIuZ3JvdXBfaWQgPT09IGdyb3VwLmdyb3VwX2lkKSByZXR1cm4gYWNjICsgMTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIDApO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgcHV0VXNlclJlcXVlc3Qob2JqKSB7XG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vdW1zLWhvbmV5YmFkZ2VyLmhlcm9rdWFwcC5jb20vdXNlci8ke29iai51c2VyX2lkfWA7XG4gICAgY29uc3QgdGVtcCA9IG5ldyBVc2VyT2JqKG9iaik7XG4gICAgZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6ICdwdXQnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGVtcCksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBwb3N0VXNlclJlcXVlc3Qob2JqKSB7XG4gICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vdW1zLWhvbmV5YmFkZ2VyLmhlcm9rdWFwcC5jb20vdXNlcic7XG4gICAgY29uc3QgdGVtcCA9IG5ldyBVc2VyT2JqKG9iaik7XG4gICAgdGVtcC51c2VyX2lkID0gdW5kZWZpbmVkO1xuXG4gICAgZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRlbXApLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xuICB9XG5cbiAgcG9zdEJsYW5rRW1pdCgpIHtcbiAgICB0aGlzLmVtaXQoJ3Bvc3RTZW5kRGF0YScsIHRoaXMuZ3JvdXBzLCBkb2N1bWVudCk7XG4gIH1cblxuICBlZGl0QmxhbmtFbWl0KGlkKSB7XG4gICAgY29uc3QgdXNlciA9IHRoaXMudXNlcnMuZmluZChpdGVtID0+IGl0ZW0udXNlcl9pZCA9PT0gcGFyc2VGbG9hdChpZCkpO1xuICAgIHRoaXMuZW1pdCgnZWRpdFNlbmREYXRhJywgW3VzZXIsIHRoaXMuZ3JvdXBzXSwgZG9jdW1lbnQpO1xuICB9XG5cbiAgc29ydERhdGEoKSB7XG4gICAgdGhpcy51c2Vycy5zb3J0KChhLCBiKSA9PiBhLnVzZXJfaWQgLSBiLnVzZXJfaWQpO1xuICAgIHRoaXMuZ3JvdXBzLnNvcnQoKGEsIGIpID0+IGEuZ3JvdXBfaWQgLSBiLmdyb3VwX2lkKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhU3RvcmU7XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50JztcblxuY2xhc3MgTXlXZWJTb2NrZXQgZXh0ZW5kcyBDb21wb25lbnQge1xuICBpbml0KCkge1xuICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCgnd3M6Ly91bXMtaG9uZXliYWRnZXIuaGVyb2t1YXBwLmNvbS91bXMnKTtcbiAgICB0aGlzLnNvY2tldC5vbm1lc3NhZ2UgPSB0aGlzLm9uTWVzc2FnZUZ1bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc29ja2V0Lm9ub3BlbiA9IHRoaXMub25PcGVuRnVuLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zb2NrZXQub25lcnJvciA9IHRoaXMub25FcnJvci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc29ja2V0Lm9uY2xvc2UgPSB0aGlzLm9uQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9uTWVzc2FnZUZ1bihtZXNzYWdlKSB7XG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UobWVzc2FnZS5kYXRhKTtcbiAgICBpZiAoZGF0YS5tZXNzYWdlKSB7XG4gICAgICBjb25zb2xlLmxvZygnTUVTU0FHRSAtICcsIGRhdGEubWVzc2FnZSk7XG4gICAgfVxuICAgIGlmIChkYXRhLmFjdGlvbikge1xuICAgICAgdGhpcy5lbWl0KCdhY3Rpb25FdmVudCcsIGRhdGEsIGRvY3VtZW50KTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBvbk9wZW5GdW4oZSkge1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgb25FcnJvcihlKSB7XG4gICAgY29uc29sZS5sb2coZSk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBvbkNsb3NlKG0pIHtcbiAgICBjb25zb2xlLmxvZyhtKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNeVdlYlNvY2tldDtcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xuXG5jb25zdCBzaWRlbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGVuYXYnKTtcbmNvbnN0IGdyb3Vwc1VsU2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NsaWRlLW91dCcpLnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7XG5jb25zdCBwYWdlVGl0bGVTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZS10aXRsZScpO1xuXG5jbGFzcyBHcm91cHNWaWV3IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgaW5pdCgpIHtcbiAgICBNLlNpZGVuYXYuaW5pdChzaWRlbmF2LCB7fSk7XG4gICAgdGhpcy5vbigncmVuZGVyR3JvdXBzJywgdGhpcy5yZW5kZXJHcm91cHMuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xuICAgIHdpbmRvdy5vbmhhc2hjaGFuZ2UgPSAoKSA9PiB7IHRoaXMuZW1pdCgncmVuZGVySW5pdCcsIG51bGwsIGRvY3VtZW50KTsgfTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gIHJlbmRlckdyb3Vwcyhncm91cHMpIHtcbiAgICBncm91cHNVbFNlbC5pbm5lckhUTUwgPSAnJztcbiAgICBncm91cHMuZm9yRWFjaCgoZ3JvdXApID0+IHtcbiAgICAgIGxldCBhY3RpdmU7XG4gICAgICBjb25zdCBoYXNoID0gcGFyc2VGbG9hdChkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnNwbGl0KC9bIy9dLylbMV0pO1xuICAgICAgaWYgKGhhc2ggPT09IGdyb3VwLmdyb3VwX2lkKSB7XG4gICAgICAgIHBhZ2VUaXRsZVNlbC5pbm5lclRleHQgPSBncm91cC5uYW1lO1xuICAgICAgICBhY3RpdmUgPSAnYWN0aXZlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdGl2ZSA9ICcnO1xuICAgICAgfVxuICAgICAgY29uc3QgbXlUZW1wbGF0ZSA9IGA8bGkgY2xhc3M9JHthY3RpdmV9PjxhIGhyZWY9XCIjJHtncm91cC5ncm91cF9pZH0vXCI+JHtncm91cC5uYW1lfSA8c3BhbiBjbGFzcz1cImJhZGdlXCIgZGF0YS1iYWRnZS1jYXB0aW9uPVwiXCI+JHtncm91cC5hbW91bnRPZlVzZXJzfTwvc3Bhbj48L2E+PC9saT5gO1xuICAgICAgZ3JvdXBzVWxTZWwuaW5uZXJIVE1MICs9IG15VGVtcGxhdGU7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR3JvdXBzVmlldztcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xuXG5jb25zdCB1c2Vyc1RhYmxlQm9keVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdHJpcGVkJykucXVlcnlTZWxlY3RvcigndGJvZHknKTtcblxuY2xhc3MgVXNlcnNWaWV3IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgaW5pdCgpIHtcbiAgICB0aGlzLm9uKCdyZW5kZXJVc2VycycsIHRoaXMucmVuZGVyVXNlcnMuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgcmVuZGVyVXNlcnModXNlcnMpIHtcbiAgICB1c2Vyc1RhYmxlQm9keVNlbC5pbm5lckhUTUwgPSAnJztcbiAgICB1c2Vycy5mb3JFYWNoKCh1c2VyKSA9PiB7XG4gICAgICBjb25zdCBoYXNoID0gcGFyc2VGbG9hdChkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnNwbGl0KC9bIy9dLylbMV0pO1xuICAgICAgaWYgKGhhc2ggPT09IHVzZXIuZ3JvdXBfaWQpIHtcbiAgICAgICAgY29uc3QgbXlUZW1wbGF0ZSA9IGBcbiAgICAgICAgPHRyIGlkPVwiJHt1c2VyLnVzZXJfaWR9XCI+XG4gICAgICAgICAgPHRkPiR7dXNlci5uYW1lfTwvdGQ+XG4gICAgICAgICAgPHRkPiR7dXNlci5zdHJlZXR9PC90ZD5cbiAgICAgICAgICA8dGQ+JHt1c2VyLnppcF9jb2RlfTwvdGQ+XG4gICAgICAgICAgPHRkPiR7dXNlci5jaXR5fTwvdGQ+XG4gICAgICAgICAgPHRkPiR7dXNlci5waG9uZX08L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICBgO1xuICAgICAgICB1c2Vyc1RhYmxlQm9keVNlbC5pbm5lckhUTUwgKz0gbXlUZW1wbGF0ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2Vyc1ZpZXc7XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vY29tcG9uZW50JztcblxuY29uc3QgbW9kYWxBZGRTZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWxBZGQnKTtcbmNvbnN0IG9wZW5Nb2RhbFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLWFkZCcpLnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcblxuY2xhc3MgUG9zdEJsYW5rIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgaW5pdCgpIHtcbiAgICB0aGlzLm9uKCdwb3N0U2VuZERhdGEnLCB0aGlzLmluaXRCbGFuay5iaW5kKHRoaXMpLCBkb2N1bWVudCk7XG4gICAgb3Blbk1vZGFsU2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuTW9kYWxQb3N0LmJpbmQodGhpcyksIGZhbHNlKTtcbiAgfVxuXG4gIG9wZW5Nb2RhbFBvc3QoKSB7XG4gICAgbW9kYWxBZGRTZWwuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgIDxoND5BZGQgbmV3IG1lbWJlcjwvaDQ+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgIDxmb3JtIGNsYXNzPVwiY29sIHMxMlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWZpZWxkIGNvbCBzNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwiZmlyc3RfbmFtZVwiIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ2YWxpZGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImZpcnN0X25hbWVcIj5GaXJzdCBOYW1lPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1maWVsZCBjb2wgczZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cImxhc3RfbmFtZVwiIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ2YWxpZGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImxhc3RfbmFtZVwiPkxhc3QgTmFtZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWZpZWxkIGNvbCBzMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cInN0cmVldFwiIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ2YWxpZGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInN0cmVldFwiPlN0cmVldDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWZpZWxkIGNvbCBzNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwiemlwX2NvZGVcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwidmFsaWRhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ6aXBfY29kZVwiPlppcCBjb2RlPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1maWVsZCBjb2wgczZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cImNpdHlcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwidmFsaWRhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjaXR5XCI+Q2l0eTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWZpZWxkIGNvbCBzMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cInBob25lXCIgdHlwZT1cInRleHRcIiBjbGFzcz1cInZhbGlkYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicGhvbmVcIj5QaG9uZSBudW1iZXI8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1maWVsZCBjb2wgczEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwiZ3JvdXBzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Hcm91cDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWZpZWxkIGNvbCBzMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJyYW5nZV9jcmVkaXRcIj5DcmVkaXQ8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1maWVsZCBjb2wgczEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJyYW5nZV9jcmVkaXRcIiB0eXBlPVwicmFuZ2VcIiBtaW49XCIwXCIgbWF4PVwiMTAwMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgIDxhIGlkPVwiY2xvc2VfYnV0dG9uXCIgY2xhc3M9XCJtb2RhbC1hY3Rpb24gbW9kYWwtY2xvc2Ugd2F2ZXMtZWZmZWN0IHdhdmVzLWdyZWVuIGJ0bi1mbGF0XCI+Q2xvc2U8L2E+XG4gICAgICAgIDxhIGlkPVwiY3JlYXRlX2J1dHRvblwiIGNsYXNzPVwibW9kYWwtYWN0aW9uIG1vZGFsLWNsb3NlIHdhdmVzLWVmZmVjdCB3YXZlcy1ncmVlbiBidG4tZmxhdFwiPkNyZWF0ZTwvYT5cbiAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgTS5Nb2RhbC5pbml0KG1vZGFsQWRkU2VsLCB7fSk7XG5cbiAgICB0aGlzLmluc3RhbmNlID0gTS5Nb2RhbC5nZXRJbnN0YW5jZShtb2RhbEFkZFNlbCk7XG4gICAgdGhpcy5pbnN0YW5jZS5vcGVuKCk7XG5cbiAgICB0aGlzLmJsYW5rR3JvdXBzU2VsID0gbW9kYWxBZGRTZWwucXVlcnlTZWxlY3RvcignI2dyb3VwcycpO1xuICAgIHRoaXMuZ3JvdXBTZWwgPSBtb2RhbEFkZFNlbC5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKTtcbiAgICB0aGlzLmZpcnN0TmFtZVNlbCA9IG1vZGFsQWRkU2VsLnF1ZXJ5U2VsZWN0b3IoJyNmaXJzdF9uYW1lJyk7XG4gICAgdGhpcy5sYXN0TmFtZVNlbCA9IG1vZGFsQWRkU2VsLnF1ZXJ5U2VsZWN0b3IoJyNsYXN0X25hbWUnKTtcbiAgICB0aGlzLnN0cmVldFNlbCA9IG1vZGFsQWRkU2VsLnF1ZXJ5U2VsZWN0b3IoJyNzdHJlZXQnKTtcbiAgICB0aGlzLnppcENvZGVTZWwgPSBtb2RhbEFkZFNlbC5xdWVyeVNlbGVjdG9yKCcjemlwX2NvZGUnKTtcbiAgICB0aGlzLmNpdHlTZWwgPSBtb2RhbEFkZFNlbC5xdWVyeVNlbGVjdG9yKCcjY2l0eScpO1xuICAgIHRoaXMucGhvbmVTZWwgPSBtb2RhbEFkZFNlbC5xdWVyeVNlbGVjdG9yKCcjcGhvbmUnKTtcbiAgICB0aGlzLnJhbmdlQ3JlZGl0U2VsID0gbW9kYWxBZGRTZWwucXVlcnlTZWxlY3RvcignI3JhbmdlX2NyZWRpdCcpO1xuICAgIHRoaXMuY3JlYXRlQnV0dG9uU2VsID0gbW9kYWxBZGRTZWwucXVlcnlTZWxlY3RvcignI2NyZWF0ZV9idXR0b24nKTtcbiAgICB0aGlzLm1vZGFsT3ZlcmxheVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1vdmVybGF5Jyk7XG4gICAgdGhpcy5jbG9zZUJ1dHRvblNlbCA9IG1vZGFsQWRkU2VsLnF1ZXJ5U2VsZWN0b3IoJyNjbG9zZV9idXR0b24nKTtcblxuICAgIHRoaXMuY3JlYXRlQnV0dG9uU2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5wb3N0QmxhbmtDcmVhdGUuYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgIHRoaXMuY2xvc2VCdXR0b25TZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlTW9kYWxGdW4uYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgIHRoaXMubW9kYWxPdmVybGF5U2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZU1vZGFsRnVuLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICB0aGlzLmNyZWF0ZUJ1dHRvblNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VNb2RhbEZ1bi5iaW5kKHRoaXMpLCBmYWxzZSk7XG5cbiAgICBNLlJhbmdlLmluaXQodGhpcy5yYW5nZUNyZWRpdFNlbCwge30pO1xuICAgIHRoaXMuZW1pdCgncG9zdFJlcXVlc3REYXRhJywgbnVsbCwgZG9jdW1lbnQpO1xuICB9XG5cbiAgaW5pdEJsYW5rKGdyb3Vwcykge1xuICAgIHRoaXMuZ3JvdXBzID0gZ3JvdXBzO1xuICAgIHRoaXMuYmxhbmtHcm91cHNTZWwuaW5uZXJIVE1MID0gJyc7XG4gICAgdGhpcy5ibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgKz0gJzxvcHRpb24gdmFsdWU9XCJcIiBkaXNhYmxlZCBzZWxlY3RlZD5DaG9vc2UgZ3JvdXA8L29wdGlvbj4nO1xuICAgIGdyb3Vwcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLmJsYW5rR3JvdXBzU2VsLmlubmVySFRNTCArPSBgPG9wdGlvbiB2YWx1ZT1cIiR7aXRlbS5ncm91cF9pZH1cIiBpZD1cIiR7aXRlbS5ncm91cF9pZH1cIj4ke2l0ZW0ubmFtZX08L29wdGlvbj5gO1xuICAgIH0pO1xuICAgIE0uRm9ybVNlbGVjdC5pbml0KHRoaXMuZ3JvdXBTZWwsIHt9KTtcbiAgfVxuXG4gIHBvc3RCbGFua0NyZWF0ZSgpIHtcbiAgICB0aGlzLmluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmluaXQodGhpcy5ncm91cFNlbCwge30pO1xuICAgIHRoaXMuaW5zdGFuY2UgPSBNLkZvcm1TZWxlY3QuZ2V0SW5zdGFuY2UodGhpcy5ncm91cFNlbCk7XG4gICAgY29uc3QgdGVtcFVzZXIgPSB7fTtcbiAgICBbdGVtcFVzZXIuZ3JvdXBfaWRdID0gdGhpcy5pbnN0YW5jZS5nZXRTZWxlY3RlZFZhbHVlcygpO1xuICAgIHRlbXBVc2VyLm5hbWUgPSBgJHt0aGlzLmZpcnN0TmFtZVNlbC52YWx1ZX0gJHt0aGlzLmxhc3ROYW1lU2VsLnZhbHVlfWA7XG4gICAgdGVtcFVzZXIuc3RyZWV0ID0gdGhpcy5zdHJlZXRTZWwudmFsdWU7XG4gICAgdGVtcFVzZXIuemlwX2NvZGUgPSB0aGlzLnppcENvZGVTZWwudmFsdWU7XG4gICAgdGVtcFVzZXIuY2l0eSA9IHRoaXMuY2l0eVNlbC52YWx1ZTtcbiAgICB0ZW1wVXNlci5waG9uZSA9IHRoaXMucGhvbmVTZWwudmFsdWU7XG4gICAgdGVtcFVzZXIuY3JlZGl0cyA9IHRoaXMucmFuZ2VDcmVkaXRTZWwudmFsdWU7XG4gICAgdGhpcy5lbWl0KCdmZXRjaFBvc3RSZXF1ZXN0JywgdGVtcFVzZXIsIGRvY3VtZW50KTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gIGNsb3NlTW9kYWxGdW4oKSB7XG4gICAgbW9kYWxBZGRTZWwuaW5uZXJIVE1MID0gJyc7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9zdEJsYW5rO1xuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudCc7XG5cbmNvbnN0IG1vZGFsRWRpdFNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbEVkaXQnKTtcbmNvbnN0IG1haW5UYWJsZVNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuXG5jbGFzcyBFZGl0QmxhbmsgZXh0ZW5kcyBDb21wb25lbnQge1xuICBpbml0KCkge1xuICAgIG1haW5UYWJsZVNlbC5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIHRoaXMub3Blbk1vZGFsRWRpdC5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gICAgdGhpcy5vbignZWRpdFNlbmREYXRhJywgdGhpcy5pbml0QmxhbmsuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xuICB9XG5cbiAgb3Blbk1vZGFsRWRpdChlKSB7XG4gICAgbW9kYWxFZGl0U2VsLmlubmVySFRNTCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICA8aDQ+RWRpdCBtZW1iZXI8L2g0PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICA8Zm9ybSBjbGFzcz1cImNvbCBzMTJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1maWVsZCBjb2wgczZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cImZpcnN0X25hbWVcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwidmFsaWRhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJmaXJzdF9uYW1lXCI+Rmlyc3QgTmFtZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZmllbGQgY29sIHM2XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJsYXN0X25hbWVcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwidmFsaWRhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJsYXN0X25hbWVcIj5MYXN0IE5hbWU8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1maWVsZCBjb2wgczEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJzdHJlZXRcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwidmFsaWRhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJzdHJlZXRcIj5TdHJlZXQ8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1maWVsZCBjb2wgczZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD1cInppcF9jb2RlXCIgdHlwZT1cInRleHRcIiBjbGFzcz1cInZhbGlkYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiemlwX2NvZGVcIj5aaXAgY29kZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZmllbGQgY29sIHM2XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJjaXR5XCIgdHlwZT1cInRleHRcIiBjbGFzcz1cInZhbGlkYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiY2l0eVwiPkNpdHk8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1maWVsZCBjb2wgczEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJwaG9uZVwiIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ2YWxpZGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInBob25lXCI+UGhvbmUgbnVtYmVyPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZmllbGQgY29sIHMxMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD1cImdyb3Vwc1wiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Hcm91cDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWZpZWxkIGNvbCBzMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJyYW5nZV9jcmVkaXRcIj5DcmVkaXQ8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1maWVsZCBjb2wgczEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJyYW5nZV9jcmVkaXRcIiB0eXBlPVwicmFuZ2VcIiBtaW49XCIwXCIgbWF4PVwiMTAwMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgIDxhIGlkPVwiY2xvc2VfYnV0dG9uXCIgY2xhc3M9XCJtb2RhbC1hY3Rpb24gbW9kYWwtY2xvc2Ugd2F2ZXMtZWZmZWN0IHdhdmVzLWdyZWVuIGJ0bi1mbGF0XCI+Q2xvc2U8L2E+XG4gICAgICAgIDxhIGlkPVwidXBkYXRlX2J1dHRvblwiIGNsYXNzPVwibW9kYWwtYWN0aW9uIG1vZGFsLWNsb3NlIHdhdmVzLWVmZmVjdCB3YXZlcy1ncmVlbiBidG4tZmxhdFwiPlVwZGF0ZTwvYT5cbiAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgTS5Nb2RhbC5pbml0KG1vZGFsRWRpdFNlbCwge30pO1xuXG4gICAgdGhpcy5pbnN0YW5jZSA9IE0uTW9kYWwuZ2V0SW5zdGFuY2UobW9kYWxFZGl0U2VsKTtcbiAgICB0aGlzLmluc3RhbmNlLm9wZW4oKTtcblxuICAgIHRoaXMuYmxhbmtHcm91cHNTZWwgPSBtb2RhbEVkaXRTZWwucXVlcnlTZWxlY3RvcignI2dyb3VwcycpO1xuICAgIHRoaXMuZ3JvdXBTZWwgPSBtb2RhbEVkaXRTZWwucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XG4gICAgdGhpcy5maXJzdE5hbWVTZWwgPSBtb2RhbEVkaXRTZWwucXVlcnlTZWxlY3RvcignI2ZpcnN0X25hbWUnKTtcbiAgICB0aGlzLmxhc3ROYW1lU2VsID0gbW9kYWxFZGl0U2VsLnF1ZXJ5U2VsZWN0b3IoJyNsYXN0X25hbWUnKTtcbiAgICB0aGlzLnN0cmVldFNlbCA9IG1vZGFsRWRpdFNlbC5xdWVyeVNlbGVjdG9yKCcjc3RyZWV0Jyk7XG4gICAgdGhpcy56aXBDb2RlU2VsID0gbW9kYWxFZGl0U2VsLnF1ZXJ5U2VsZWN0b3IoJyN6aXBfY29kZScpO1xuICAgIHRoaXMuY2l0eVNlbCA9IG1vZGFsRWRpdFNlbC5xdWVyeVNlbGVjdG9yKCcjY2l0eScpO1xuICAgIHRoaXMucGhvbmVTZWwgPSBtb2RhbEVkaXRTZWwucXVlcnlTZWxlY3RvcignI3Bob25lJyk7XG4gICAgdGhpcy5yYW5nZUNyZWRpdFNlbCA9IG1vZGFsRWRpdFNlbC5xdWVyeVNlbGVjdG9yKCcjcmFuZ2VfY3JlZGl0Jyk7XG4gICAgdGhpcy5pZENvbnRhaW5lclNlbCA9IG1vZGFsRWRpdFNlbC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCcpO1xuICAgIHRoaXMubW9kYWxPdmVybGF5U2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLW92ZXJsYXknKTtcbiAgICB0aGlzLnVwZGF0ZUJ1dHRvblNlbCA9IG1vZGFsRWRpdFNlbC5xdWVyeVNlbGVjdG9yKCcjdXBkYXRlX2J1dHRvbicpO1xuICAgIHRoaXMuY2xvc2VCdXR0b25TZWwgPSBtb2RhbEVkaXRTZWwucXVlcnlTZWxlY3RvcignI2Nsb3NlX2J1dHRvbicpO1xuXG4gICAgTS5SYW5nZS5pbml0KHRoaXMucmFuZ2VDcmVkaXRTZWwsIHt9KTtcbiAgICB0aGlzLmVtaXQoJ2VkaXRSZXF1ZXN0RGF0YScsIGUudGFyZ2V0LnBhcmVudE5vZGUuaWQsIGRvY3VtZW50KTtcblxuICAgIHRoaXMudXBkYXRlQnV0dG9uU2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5lZGl0QmxhbmtVcGRhdGUuYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgIHRoaXMuY2xvc2VCdXR0b25TZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlTW9kYWxGdW4uYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgIHRoaXMudXBkYXRlQnV0dG9uU2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZU1vZGFsRnVuLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICB0aGlzLm1vZGFsT3ZlcmxheVNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VNb2RhbEZ1bi5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gIH1cblxuICBpbml0QmxhbmsocGFyYW1zKSB7XG4gICAgW3RoaXMudXNlciwgdGhpcy5ncm91cHNdID0gcGFyYW1zO1xuICAgIGNvbnN0IGNob29zZWRHcm91cCA9IHRoaXMuZ3JvdXBzLmZpbmQoaXRlbSA9PiBpdGVtLmdyb3VwX2lkID09PSB0aGlzLnVzZXIuZ3JvdXBfaWQpO1xuICAgIHRoaXMuYmxhbmtHcm91cHNTZWwuaW5uZXJIVE1MID0gJyc7XG4gICAgdGhpcy5ibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgKz0gYDxvcHRpb24gdmFsdWU9XCIke3RoaXMudXNlci5ncm91cF9pZH1cIiBkaXNhYmxlZCBzZWxlY3RlZD4ke2Nob29zZWRHcm91cC5uYW1lfTwvb3B0aW9uPmA7XG4gICAgdGhpcy5ncm91cHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5ibGFua0dyb3Vwc1NlbC5pbm5lckhUTUwgKz0gYDxvcHRpb24gdmFsdWU9XCIke2l0ZW0uZ3JvdXBfaWR9XCIgaWQ9XCIke2l0ZW0uZ3JvdXBfaWR9XCI+JHtpdGVtLm5hbWV9PC9vcHRpb24+YDtcbiAgICB9KTtcblxuICAgIHRoaXMuaWRDb250YWluZXJTZWwuaWQgPSB0aGlzLnVzZXIudXNlcl9pZDtcbiAgICBjb25zdCBmdWxsbmFtZSA9IHRoaXMudXNlci5uYW1lLnNwbGl0KCcgJyk7XG4gICAgW3RoaXMuZmlyc3ROYW1lU2VsLnZhbHVlXSA9IGZ1bGxuYW1lO1xuICAgIGZ1bGxuYW1lLnNwbGljZSgwLCAxKTtcbiAgICB0aGlzLmxhc3ROYW1lU2VsLnZhbHVlID0gZnVsbG5hbWUuam9pbignICcpO1xuICAgIHRoaXMuc3RyZWV0U2VsLnZhbHVlID0gdGhpcy51c2VyLnN0cmVldDtcbiAgICB0aGlzLnppcENvZGVTZWwudmFsdWUgPSB0aGlzLnVzZXIuemlwX2NvZGU7XG4gICAgdGhpcy5jaXR5U2VsLnZhbHVlID0gdGhpcy51c2VyLmNpdHk7XG4gICAgdGhpcy5waG9uZVNlbC52YWx1ZSA9IHRoaXMudXNlci5waG9uZTtcbiAgICB0aGlzLnJhbmdlQ3JlZGl0U2VsLnZhbHVlID0gdGhpcy51c2VyLmNyZWRpdHM7XG5cbiAgICBpZiAocGFyc2VGbG9hdCh0aGlzLnJhbmdlQ3JlZGl0U2VsLnZhbHVlKSA9PT0gMCkge1xuICAgICAgdGhpcy5maXJzdE5hbWVTZWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5sYXN0TmFtZVNlbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLnN0cmVldFNlbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLnppcENvZGVTZWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5jaXR5U2VsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMucGhvbmVTZWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5yYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLmJsYW5rR3JvdXBzU2VsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maXJzdE5hbWVTZWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMubGFzdE5hbWVTZWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc3RyZWV0U2VsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnppcENvZGVTZWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuY2l0eVNlbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5waG9uZVNlbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5yYW5nZUNyZWRpdFNlbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5ibGFua0dyb3Vwc1NlbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChjaG9vc2VkR3JvdXAuaXNfYWRtaW4pIHtcbiAgICAgIHRoaXMucmFuZ2VDcmVkaXRTZWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIE0uRm9ybVNlbGVjdC5pbml0KHRoaXMuZ3JvdXBTZWwsIHt9KTtcblxuICAgIE0udXBkYXRlVGV4dEZpZWxkcygpO1xuICB9XG5cbiAgZWRpdEJsYW5rVXBkYXRlKCkge1xuICAgIHRoaXMuaW5zdGFuY2UgPSBNLkZvcm1TZWxlY3QuaW5pdCh0aGlzLmdyb3VwU2VsLCB7fSk7XG4gICAgdGhpcy5pbnN0YW5jZSA9IE0uRm9ybVNlbGVjdC5nZXRJbnN0YW5jZSh0aGlzLmdyb3VwU2VsKTtcblxuICAgIGNvbnN0IHRlbXBVc2VyID0ge307XG4gICAgdGVtcFVzZXIudXNlcl9pZCA9IHRoaXMuaWRDb250YWluZXJTZWwuaWQ7XG4gICAgW3RlbXBVc2VyLmdyb3VwX2lkXSA9IHRoaXMuaW5zdGFuY2UuZ2V0U2VsZWN0ZWRWYWx1ZXMoKTtcbiAgICB0ZW1wVXNlci5uYW1lID0gYCR7dGhpcy5maXJzdE5hbWVTZWwudmFsdWV9ICR7dGhpcy5sYXN0TmFtZVNlbC52YWx1ZX1gO1xuICAgIHRlbXBVc2VyLnN0cmVldCA9IHRoaXMuc3RyZWV0U2VsLnZhbHVlO1xuICAgIHRlbXBVc2VyLnppcF9jb2RlID0gdGhpcy56aXBDb2RlU2VsLnZhbHVlO1xuICAgIHRlbXBVc2VyLmNpdHkgPSB0aGlzLmNpdHlTZWwudmFsdWU7XG4gICAgdGVtcFVzZXIucGhvbmUgPSB0aGlzLnBob25lU2VsLnZhbHVlO1xuICAgIHRlbXBVc2VyLmNyZWRpdHMgPSB0aGlzLnJhbmdlQ3JlZGl0U2VsLnZhbHVlO1xuICAgIHRoaXMuZW1pdCgnZmV0Y2hQdXRSZXF1ZXN0JywgdGVtcFVzZXIsIGRvY3VtZW50KTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gIGNsb3NlTW9kYWxGdW4oKSB7XG4gICAgbW9kYWxFZGl0U2VsLmlubmVySFRNTCA9ICcnO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEVkaXRCbGFuaztcbiIsImltcG9ydCBEYXRhU3RvcmUgZnJvbSAnLi9kYXRhX3N0b3JlJztcbmltcG9ydCBNeVdlYlNvY2tldCBmcm9tICcuL3dlYl9zb2NrZXQnO1xuaW1wb3J0IEdyb3Vwc1ZpZXcgZnJvbSAnLi9ncm91cHNfdmlldyc7XG5pbXBvcnQgVXNlcnNWaWV3IGZyb20gJy4vdXNlcnNfdmlldyc7XG5pbXBvcnQgUG9zdEJsYW5rIGZyb20gJy4vcG9zdF9ibGFuayc7XG5pbXBvcnQgRWRpdEJsYW5rIGZyb20gJy4vZWRpdF9ibGFuayc7XG5cbkRhdGFTdG9yZS5iaW5kVG8oZG9jdW1lbnQpO1xuTXlXZWJTb2NrZXQuYmluZFRvKGRvY3VtZW50KTtcbkdyb3Vwc1ZpZXcuYmluZFRvKGRvY3VtZW50KTtcblVzZXJzVmlldy5iaW5kVG8oZG9jdW1lbnQpO1xuUG9zdEJsYW5rLmJpbmRUbyhkb2N1bWVudCk7XG5FZGl0QmxhbmsuYmluZFRvKGRvY3VtZW50KTsiXSwic291cmNlUm9vdCI6IiJ9